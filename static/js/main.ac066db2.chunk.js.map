{"version":3,"sources":["img/curvedtrack.png","img/straighttrack.png","js/components/WhiteSquareBackground.jsx","js/styles/tileCornerBtn.js","js/styles/tileAxisBtn.js","js/components/TileButtons.jsx","js/styles/tileCenterBtn.js","js/trackFunctions/railTypeProcessing.js","js/styles/square.js","js/components/MapTile.jsx","js/trackFunctions/railImageProcessing.js","js/components/HeadingTile.jsx","js/components/EmptyTile.jsx","js/components/TransparentTile.jsx","js/utility/utilityFunctions.js","js/trackFunctions/trackParsing.js","js/components/Board.jsx","js/trackFunctions/trackPlacement.js","js/utility/directionsConversions.js","js/trackFunctions/trackUtilities.js","js/trackFunctions/railDragEvent.js","js/utility/colorFunctions.js","js/components/MapAmbientBackground.jsx","js/components/Map.jsx","js/components/WaveButton.jsx","js/styles/waveButton.js","js/components/OptionsButtons.jsx","js/utility/localStorage.js","js/components/SaveMapDisplay.jsx","js/components/WinDisplayBackground.jsx","js/components/GameWinDisplay.jsx","js/generation/icon/generateMapIcon.js","js/styles/game.js","js/components/Game.jsx","js/components/Dropdown.jsx","js/screen/deleteMapConfirmScreen.jsx","js/components/ReturnToMainMenuBtn.jsx","js/screen/loadMapScreen.jsx","js/generation/map/genericGenMapFunctions.js","js/generation/map/checkIfPossibleToReachTargetIterative.js","js/generation/map/generateDefaultTileIndices.js","js/generation/map/mutateMoveArray/removeExitMove.js","js/generation/map/mutateMoveArray/removeAroundExitMoves.js","js/generation/map/mutateMoveArray/removeSealingMoves.js","js/generation/map/mutateMoveArray/removeHookMoves.js","js/generation/map/mutateMoveArray/removeMovesWithLessTilesFromExit.js","js/generation/map/generateMap.js","js/generation/map/generateStartEndPoints.js","js/screen/howToPlayScreen.jsx","js/components/DifficultySlider.jsx","js/screen/startMapScreen.jsx","js/screen/aboutScreen.jsx","js/screen/mainMenuScreen.jsx","js/components/Screen.jsx","js/generation/icon/generateUnknownTrackIcon.js","js/generation/icon/generateCrossTrackIcon.js","js/components/App.jsx","index.js"],"names":["module","exports","WhiteSquareBackground","props","className","style","position","top","left","height","width","background","zIndex","cornerStyles","BOX_DIM_REM","borderWidth","axisStyles","bottom","right","CornerButton","cornerStyle","cornerType","selectedCornerStyle","opacity","borderStyle","getCornerStyle","tileRemSize","corner","AxisButton","axisStyle","axisType","defaultStyle","WebkitTransform","MozTransform","OTransform","msTransform","transform","transformOrigin","selectedAxisStyle","getAxisStyle","edge","CentreButton","centerStyle","borderRadius","TileButtons","map","el","key","x","convertDirectionTupleToRailTypes","dirArr","previousTileRailType","currentHoverTileRailType","length","convertRailTypeToTrackImage","railType","trackData","trackType","straighttrack","trackRotation","curvedtrack","convertButtonClassToRailType","e","target","classList","contains","getSquareStyle","minHeight","minWidth","display","Square","squareStyling","railImages","useState","hoverTrack","setHoverTrack","getMouseEventObject","tile","y","tileClass","getTileClassFromEvent","mouseButton","buttons","currentTarget","includes","unknownRailImage","trackImage","backgroundImage","setHoverTrackImage","unknown","cross","highlighted","filter","transition","setDefaultTrackImage","backgroundEnabled","onContextMenu","preventDefault","onMouseOver","mouseEventObject","hoverStartEvent","squareHoverStart","onMouseLeave","onMouseDown","leftClickEvent","rightClickEvent","bothClickEvent","squareMouseDown","onMouseUp","button","leftReleaseEvent","rightReleaseEvent","squareMouseUp","boxStyling","trackText","HeadingTile","border","alignItems","justifyContent","fillState","WebkitTextFillColor","WebkitTextStrokeColor","convertFillStateToStyle","headerLabel","EmptyTile","emptyTileStyle","TransparentTile","transparentTileStyle","randomIntFromInterval","min","max","Math","floor","random","findIndexOfArrayInMatrix","array","matrix","index","i","compareArrays","arr1","arr2","arrEqual","every","v","isNonEmptyArray","Array","isArray","removeDuplicateArraysFromMatrix","loopIndex","removeNonDuplicateArraysFromMatrix","removeArraysFromMatrix","arrays","forEach","arr","getRandomSeed","pow","convertRemToPx","rem","parseFloat","getComputedStyle","document","documentElement","fontSize","checkIfArrayIsInMatrix","count","Boolean","randomArrayEntry","halveArray","halfIndex","slice","getAllDefaultTiles","trainTrackMap","defaultTileArr","tracks","defaultTrack","push","getRailTypeOfPlacedTile","coordinate","placedTracks","getPlacedRailTrackCount","getCorrectTileCount","winning","correctTile","placed","Board","renderMapTile","railImage","mapSolutionVisible","MapTile","activeMouseEventsObject","staticTile","defaultRailType","mouseEvents","placeCompletedMapTrack","defaultTile","defaultTilesHighlighted","emptyMouseEventsObject","renderCompleteTrack","placeGameActiveMapTrack","trackDefaultTile","checkIfTileIsDefault","renderDefaultTrack","placeUserPlacedTrack","getRowColumnFillstate","axis","defaultTiles","axisNum","placedTrackCount","tilesOnAxis","mapBoard","mapWidth","headerLabels","gameComplete","placeColumnHeader","placeRowHeader","mapVisible","placeMainMapTile","mapHeight","getCombinedArrayOfNewAndOldTiles","newTiles","tilesToPlace","filterNewTilesOfDefaultTiles","mapTracks","alreadyPlacedTiles","filterAlreadyPlacedTracksOfNewTiles","newTile","mapTile","nonConflictingPlacedTracks","track","placedTrackConflict","findDirectionFromMove","currentMove","lastMove","moveDirection","moveOne","moveTwo","moveCalc","getTilesInEachDirection","currentTile","generatedTiles","tilesInEachDirection","sign","ceil","directionTiles","getDirectionOfEachMove","allTiles","parameters","directions","start","possibleStartDirections","possibleDirections","getPossibleStartDirections","getStartingDirection","currentMoveDir","end","possibleEndDirections","getPossibleEndDirections","getEndingDirection","standardDrag","dragArray","convertPathToDirectionArray","initialDrag","currentMapInfo","connectedAdjacentTracks","getConnectedAdjacentTracks","doDragTilesContainTracks","draggingFromExistingTiles","draggingFromAdjacentConnectedTile","dragConnections","getDragTilesConnectedTiles","getTrackDirectionPath","convertDirectionsArrayToRailTypes","dragDirection","moveArr","direction","convertMoveArrayToDirections","dragPath","directionToFirstTile","railTypeArray","directionTuple","tileRailType","reversedDragArray","reverse","getSingleDragTilesConnection","dragRailType","getRailTypeOfTile","dragFacingTracks","connections","railTypes","checkIfTwoRailTypesConnected","tiles","tracksOnMap","firstTileTaken","secondTileTaken","connectedTracks","connectedTiles","coordinates","initialTile","adjacentTracks","adjacentTiles","axisMax","getAdjacentTiles","trackCoordinates","getAdjacentTracks","getTileArrayData","tileArray","tileArrayData","adj","ROYGBIV_HEX_CODES","generateRandomRGBColor","minValue","r","g","b","colorToWhiteArray","hexColor","numberOfShades","createColorMatrixByStep","colorOneArray","convertHexToRgbArray","colorTwoArray","convertRgbArrayToHex","replace","match","parseInt","Number","rgbArray","value","toString","join","colorData","colorMatrix","colorStepValues","getColorStepValues","iteration","color","roygbivArray","colorTwo","rainbowPart","flat","MapAmbientBackground","colorSelected","themeColor","available","selected","backgroundShapes","visualEffects","colorArray","numberOfShapes","backgroundShapeStyle","backgroundColor","animation","lightenedColor","Map","setCurrentMapInfo","useRef","rightClickDragValue","currentHoverTile","previousHoverTile","determineIfToPlaceT","placeTile","placeMultipleTiles","a","allTilesOnMap","setPlacedTracks","checkIfGameComplete","removePlacedTrack","filteredTracks","correctTileCount","defaultTileCount","placedRailTrackCount","checkIfPlacedTilesAllCorrect","setGameCompleteState","useEffect","defaultTracks","controlsActive","current","tileValue","setRightClickDragValue","determineRemoveOrPlaceX","o","undefined","checkIfHoverTileChanged","updateHoverTileState","hoverAdjacent","checkIfHoverToAdjacent","items","concat","truncatedDragArray","railDragEvent","hoverWhileHoldingLeftMouseButton","hoverWhileHoldingRightMouseButton","hoverWhileHoldingBothMouseButtons","WaveButton","onClick","text","bounceDelay","clickDelay","hovered","setHoveredState","buttonPressed","setPressedState","bounceTimer","clickTimer","btnDefaultStyle","overflow","cursor","outline","boxShadow","btnPressedStyle","rectangleStyle","textStyle","whiteBackground","getWaveButtonStyles","rectangleArray","recCount","blueRecColors","purpleRecColors","curRecStyle","id","createRectangleArray","btnStyle","setTimeout","clearTimeout","OptionsButtons","setGameWinState","setDisplay","seed","inGameNewMap","quitGame","clipboard","newTrackArray","newTrack","replaceOldTrackInArray","placedTracksArray","placedRailTypesArray","unplacedTracks","getRandomNonPlacedTrack","defaultHighlights","solutionVisible","winPopUp","savePopUp","select","execCommand","ref","readOnly","unselectable","resize","saveMapToLocal","mapToSave","localMaps","JSON","parse","window","localStorage","getItem","newMapArray","setItem","stringify","getLocalStorageMaps","deleteLocalSavedMap","deleteMapSeed","deleteAllLocalSavedMaps","SaveMapDisplay","gameState","mapSaveName","setMapSaveName","onChange","name","WinDisplayBackground","balloonContainer","delay","balloonStyle","animationDelay","GameWinDisplay","generateMapIcon","mapObject","complete","options","headers","dimensions","cutOut","generateCanvas","canvas","image","toDataURL","generateMapBackground","remSize","getTrackImages","Promise","all","loadImage","generateCanvasObject","createElement","context","getContext","gridMapWidth","gridMapHeight","iconTileWidth","iconTileHeight","straightTrackImage","curvedTrackImage","iconTile","gridMap","straight","curved","canvasObj","drawWhiteBackground","drawAllTracks","drawGrid","cutOutBackgroundBox","imgURL","resolve","reject","img","Image","onload","onerror","src","fillStyle","fillRect","rotation","getRotationFromRailType","save","translate","rotate","PI","drawImage","restore","drawRotatedImage","drawStraightImage","drawHeaderBox","strokeRect","drawObj","drawHeaderBoxBackground","font","textAlign","textBaseline","fillText","headerText","getHeaderBoxText","drawHeaderBoxText","clearRect","boxWidth","boxHeight","getGameMapContainerStyle","mapSize","marginBottom","WebkitUserSelect","MozUserSelect","msUserSelect","userSelect","boxSizing","Game","gameWon","saveBoxCutOut","addCutOutToScreen","size","mapSeed","val","alt","draggable","Dropdown","placeholder","onHover","listOpen","setListOpen","defaultValue","setDefaultValue","hoveredOption","setHoveredOption","containerStyle","lineHeight","listItemStyle","borderTop","addEventListener","whileDropdownOpenClick","removeEventListener","optionSelected","item","optionHovered","dropDownList","renderDropDownList","DeleteMapConfirmScreen","deleteModeOnAll","mapIcon","quitToLoadScreen","ReturnToMainMenuBtn","setCurrentScreen","renderSavedMapsDropdownValues","dropDownValues","LoadMapScreen","screenState","setScreenState","setMapIcon","setGameState","displaySavedGameMapIcon","active","getLegalMoves","genMap","adjacentMoves","legalMoves","removeOutOfBoundsMoves","removeMovesToVisitedTiles","moves","fill","checkIfPossibleToReachTargetIterative","move","currentMoves","apply","generateDefaultTileIndices","definitiveIndices","defaultCoordinates","nonDefaultTrackTiles","getSquareDefaultCoordinates","iterateThroughEachPossibleSquare","defaultIndices","currentDefaultTiles","moreThanOneAdj","adjTiles","getAdjacentDefaultTileCount","removeDefaultTilesWithMoreThanOneAdjacent","Set","getAllTwoByTwoDefaultIndices","mapInfo","mapLength","difficulty","optionalIndices","modifyDefinitiveIndices","mandatoryIndices","getStartAndEndIndices","helperIndices","getHelperIndices","indices","shuffled","temp","remaining","shuffleArray","keys","indexOf","offset","getRandomNonDuplicateCoordinatesFromMatrix","squares","square","arrayOfMatrices","matricesUnique","mat","commonArrays","combinedArrays","findCommonArraysOfAllMatrices","checkIfSquareIsFull","filterForFullSquares","getTwoByTwoSquare","splitMapIntoSquares","removeExitMove","removeAroundExitMoves","tilesAroundExit","getTilesAdjacentAndExit","checkIfTilesAdjacent","getSurroundingTiles","getTilesSurroundingExit","chooseSurroundOrAdjacentExitTiles","moveIsAdjExit","checkIfMoveIsAroundExitTile","removeSealingMoves","checkIfMapCovered","checkIfMoveSeals","modifier","mapCoverage","newGenMapObj","nextLegalMoves","removeHookMoves","checkIfMoveWillBeHook","prospectiveMove","lastThreeTiles","getLastSpecifiedAmountOfTiles","prospectiveLastFourTiles","getSeriesOfDirectionsFromMoveArray","checkIfMoveArrayFormsHook","unshift","numberOfTiles","moveArray","movesFormHook","removeMovesWithLessTilesFromExit","moveWithMore","pathLengths","getMinimumDistanceToExit","getIndicesOfLargestElementsInArray","getMovesWithMoreTilesAwayFromExit","largestValue","largestIndices","generateNewMap","passedParameters","seedrandom","global","edges","getEdgeCoordinatesClockwiseOrder","splice","generateStartEndPoints","mapComplete","nextMove","newMove","generateMapTiles","dirs","directionsToTrackRailType","defaultTilesIndices","mapHeaders","generateMapHeaders","isDefaultTrack","endCoordinate","checkIfOnlyLegalMoveIsExit","moveMutateFunctions","mutatedMoveArray","currentFunc","mutateMoveArray","HowToPlayScreen","maps","setMaps","emptyMap","completeMap","empty","getMaps","DifficultySlider","hover","setHover","labelDefaultStyle","labelHoverStyle","labelStyle","type","getMapSizeOptions","mapSizeOptions","StartMapScreen","padding","setThemeColor","SLIDER_WIDTH_REM","defaultChecked","setVisualEffects","checked","generateMap","AboutScreen","href","MainMenuScreen","Screen","currentScreen","screen","getScreenDisplay","generateUnknownTrackIcon","tilePixelSize","clearCircle","radius","beginPath","arc","clip","generateCrossTrackIcon","clearCross","rect","App","gameParameters","mapSeedInput","getElementById","screenProps","ReactDOM","render"],"mappings":"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","file":"static/js/main.ac066db2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/curvedtrack.513c0cf6.png\";","module.exports = __webpack_public_path__ + \"static/media/straighttrack.9d34a133.png\";","import React from 'react';\n\nexport const WhiteSquareBackground = (props) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={'white-background'}\n\t\t\tstyle={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\ttop: '0',\n\t\t\t\tleft: '0',\n\t\t\t\theight: '100%',\n\t\t\t\twidth: '100%',\n\t\t\t\tbackground: 'white',\n\t\t\t\tzIndex: '-2'\n\t\t\t}}\n\t\t/>\n\t);\n};\n\nexport default WhiteSquareBackground;\n","export const getCornerStyle = (BOX_DIM_REM, cornerType) => {\n\tconst defaultStyle = {\n\t\tzIndex: '1',\n\t\topacity: '0',\n\t\theight: '0',\n\t\twidth: '0',\n\t\tborderStyle: 'solid',\n\t\tposition: 'absolute'\n\t};\n\tconst selectedCornerStyle = cornerStyles(BOX_DIM_REM)[cornerType];\n\treturn { ...defaultStyle, ...selectedCornerStyle };\n};\n\nconst cornerStyles = (BOX_DIM_REM) => {\n\treturn {\n\t\t'top-left': {\n\t\t\ttop: '0',\n\t\t\tleft: '0',\n\t\t\tborderWidth: `0 0 ${BOX_DIM_REM / 2}rem ${BOX_DIM_REM / 2}rem`\n\t\t},\n\t\t'top-right': {\n\t\t\ttop: '0',\n\t\t\tleft: `${BOX_DIM_REM / 2}rem`,\n\t\t\tborderWidth: `0 ${BOX_DIM_REM / 2}rem ${BOX_DIM_REM / 2}rem 0`\n\t\t},\n\n\t\t'bottom-left': {\n\t\t\ttop: `${BOX_DIM_REM / 2}rem`,\n\t\t\tleft: '0',\n\t\t\tborderWidth: `${BOX_DIM_REM / 2}rem 0 0 ${BOX_DIM_REM / 2}rem`\n\t\t},\n\n\t\t'bottom-right': {\n\t\t\ttop: `${BOX_DIM_REM / 2}rem`,\n\t\t\tleft: `${BOX_DIM_REM / 2}rem`,\n\t\t\tborderWidth: `${BOX_DIM_REM / 2}rem ${BOX_DIM_REM / 2}rem 0 0`\n\t\t}\n\t};\n};\n","export const getAxisStyle = (BOX_DIM_REM, axisType) => {\n\tconst defaultStyle = {\n\t\topacity: '0',\n\t\tposition: 'absolute',\n\t\theight: `${BOX_DIM_REM / 2 * 0.707106781}rem`,\n\t\twidth: `${BOX_DIM_REM / 2 * 0.707106781}rem`,\n\t\tzIndex: '1',\n\t\tWebkitTransform: 'rotate(45deg) translate(-50%, -50%)',\n\t\tMozTransform: 'rotate(45deg) translate(-50%, -50%)',\n\t\tOTransform: 'rotate(45deg) translate(-50%, -50%)',\n\t\tmsTransform: 'rotate(45deg) translate(-50%, -50%)',\n\t\ttransform: 'rotate(45deg) translate(-50%, -50%)',\n\t\ttransformOrigin: 'top left'\n\t};\n\tconst selectedAxisStyle = axisStyles()[axisType];\n\treturn { ...defaultStyle, ...selectedAxisStyle };\n};\n\nconst axisStyles = () => {\n\treturn {\n\t\ttop: {\n\t\t\ttop: '25%',\n\t\t\tleft: '50%'\n\t\t},\n\n\t\tleft: {\n\t\t\ttop: '50%',\n\t\t\tleft: '25%'\n\t\t},\n\n\t\tbottom: {\n\t\t\ttop: '75%',\n\t\t\tleft: '50%'\n\t\t},\n\n\t\tright: {\n\t\t\ttop: '50%',\n\t\t\tleft: '75%'\n\t\t}\n\t};\n};\n","import React from 'react';\nimport { getCornerStyle } from 'js/styles/tileCornerBtn';\nimport { getAxisStyle } from 'js/styles/tileAxisBtn';\nimport { getCenterStyle } from 'js/styles/tileCenterBtn';\n\nconst CornerButton = (props) => {\n\tconst cornerStyle = getCornerStyle(props.tileRemSize, props.corner);\n\treturn <div className={`cornerButton ${props.corner}`} style={cornerStyle} />;\n};\n\nconst AxisButton = (props) => {\n\tconst axisStyle = getAxisStyle(props.tileRemSize, props.edge);\n\treturn <div className={`axisButton ${props.edge}`} style={axisStyle} />;\n};\n\nconst CentreButton = (props) => {\n\tconst centerStyle = getCenterStyle(props.tileRemSize);\n\treturn <div className={`centreButton`} style={centerStyle} />;\n};\n\nexport const TileButtons = (props) => {\n\tconst corners = [ 'top-left', 'top-right', 'bottom-left', 'bottom-right' ];\n\tconst edges = [ 'top', 'right', 'bottom', 'left' ];\n\treturn [\n\t\tcorners.map((el) => <CornerButton corner={el} key={el} tileRemSize={props.tileRemSize} />),\n\t\tedges.map((el) => <AxisButton edge={el} key={el} tileRemSize={props.tileRemSize} />),\n\t\t<CentreButton key={props.x} tileRemSize={props.tileRemSize} />\n\t];\n};\n\nexport default TileButtons;\n","export const getCenterStyle = (BOX_DIM_REM) => {\n\treturn {\n\t\topacity: '0',\n\t\tposition: 'absolute',\n\t\ttop: '50%',\n\t\tleft: '50%',\n\t\ttransform: 'translate(-50%, -50%)',\n\t\theight: `${BOX_DIM_REM / 5 * 2}rem`,\n\t\twidth: `${BOX_DIM_REM / 5 * 2}rem`,\n\t\tzIndex: '1',\n\t\tborderRadius: '5rem'\n\t};\n};\n","import curvedtrack from 'img/curvedtrack.png';\nimport straighttrack from 'img/straighttrack.png';\n\nexport const convertDirectionTupleToRailTypes = (dirArr) => {\n\tlet previousTileRailType, currentHoverTileRailType;\n\n\tif (dirArr.length === 1) {\n\t\tif (dirArr[0] % 2 === 0) previousTileRailType = 'vertical';\n\t\tif (dirArr[0] % 2 === 1) previousTileRailType = 'horizontal';\n\n\t\tcurrentHoverTileRailType = previousTileRailType;\n\t}\n\tif (dirArr.length === 2) {\n\t\tif (dirArr[0] % 2 === 0 && dirArr[1] % 2 === 0) previousTileRailType = 'vertical';\n\t\tif (dirArr[0] % 2 === 1 && dirArr[1] % 2 === 1) previousTileRailType = 'horizontal';\n\n\t\tif ((dirArr[0] === 0 && dirArr[1] === 1) || (dirArr[0] === 3 && dirArr[1] === 2))\n\t\t\tpreviousTileRailType = 'bottomRightCorner';\n\t\tif ((dirArr[0] === 1 && dirArr[1] === 2) || (dirArr[0] === 0 && dirArr[1] === 3))\n\t\t\tpreviousTileRailType = 'bottomLeftCorner';\n\t\tif ((dirArr[0] === 2 && dirArr[1] === 3) || (dirArr[0] === 1 && dirArr[1] === 0))\n\t\t\tpreviousTileRailType = 'topLeftCorner';\n\t\tif ((dirArr[0] === 3 && dirArr[1] === 0) || (dirArr[0] === 2 && dirArr[1] === 1))\n\t\t\tpreviousTileRailType = 'topRightCorner';\n\n\t\tcurrentHoverTileRailType = dirArr[1] % 2 === 0 ? 'vertical' : 'horizontal';\n\t}\n\treturn [ previousTileRailType, currentHoverTileRailType ];\n};\n\nexport const convertRailTypeToTrackImage = (railType) => {\n\tlet trackData;\n\tswitch (railType) {\n\t\tcase 'vertical':\n\t\t\ttrackData = {\n\t\t\t\ttrackType: straighttrack,\n\t\t\t\ttrackRotation: 0\n\t\t\t};\n\t\t\tbreak;\n\t\tcase 'horizontal':\n\t\t\ttrackData = {\n\t\t\t\ttrackType: straighttrack,\n\t\t\t\ttrackRotation: 90\n\t\t\t};\n\t\t\tbreak;\n\t\tcase 'bottomLeftCorner':\n\t\t\ttrackData = {\n\t\t\t\ttrackType: curvedtrack,\n\t\t\t\ttrackRotation: 0\n\t\t\t};\n\t\t\tbreak;\n\t\tcase 'topLeftCorner':\n\t\t\ttrackData = {\n\t\t\t\ttrackType: curvedtrack,\n\t\t\t\ttrackRotation: 90\n\t\t\t};\n\t\t\tbreak;\n\t\tcase 'topRightCorner':\n\t\t\ttrackData = {\n\t\t\t\ttrackType: curvedtrack,\n\t\t\t\ttrackRotation: 180\n\t\t\t};\n\t\t\tbreak;\n\t\tcase 'bottomRightCorner':\n\t\t\ttrackData = {\n\t\t\t\ttrackType: curvedtrack,\n\t\t\t\ttrackRotation: 270\n\t\t\t};\n\t\t\tbreak;\n\t\tcase 'T':\n\t\t\ttrackData = {\n\t\t\t\ttrackType: railType,\n\t\t\t\ttrackRotation: 'none'\n\t\t\t};\n\t\t\tbreak;\n\t\tcase 'X':\n\t\t\ttrackData = {\n\t\t\t\ttrackType: railType,\n\t\t\t\ttrackRotation: 'none'\n\t\t\t};\n\t\t\tbreak;\n\t\tdefault:\n\t\t\ttrackData = { trackType: 'none', trackRotation: 'none' };\n\t}\n\treturn trackData;\n};\n\nexport const convertButtonClassToRailType = (e) => {\n\tlet railType;\n\tif (e.target.classList.contains('axisButton')) {\n\t\tif (e.target.classList.contains('top') || e.target.classList.contains('bottom')) {\n\t\t\trailType = 'vertical';\n\t\t}\n\t\tif (e.target.classList.contains('right') || e.target.classList.contains('left')) {\n\t\t\trailType = 'horizontal';\n\t\t}\n\t}\n\tif (e.target.classList.contains('cornerButton')) {\n\t\tif (e.target.classList.contains('top-left')) railType = 'topLeftCorner';\n\t\tif (e.target.classList.contains('top-right')) railType = 'topRightCorner';\n\t\tif (e.target.classList.contains('bottom-left')) railType = 'bottomLeftCorner';\n\t\tif (e.target.classList.contains('bottom-right')) railType = 'bottomRightCorner';\n\t}\n\tif (e.target.classList.contains('centreButton')) {\n\t\trailType = 'T';\n\t}\n\treturn railType;\n};\n\nexport const checkIfTwoRailTypesConnected = (direction, railTypes) => {\n\tswitch (direction) {\n\t\tcase 0:\n\t\t\tif (\n\t\t\t\t((railTypes[0] === 'vertical' ||\n\t\t\t\t\trailTypes[0] === 'topLeftCorner' ||\n\t\t\t\t\trailTypes[0] === 'topRightCorner') &&\n\t\t\t\t\trailTypes[1] === 'vertical') ||\n\t\t\t\t(railTypes[1] === 'bottomLeftCorner' || railTypes[1] === 'bottomRightCorner')\n\t\t\t)\n\t\t\t\treturn true;\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tif (\n\t\t\t\t(railTypes[0] === 'horizontal' ||\n\t\t\t\t\trailTypes[0] === 'topRightCorner' ||\n\t\t\t\t\trailTypes[0] === 'bottomRightCorner') &&\n\t\t\t\t(railTypes[1] === 'horizontal' ||\n\t\t\t\t\trailTypes[1] === 'topLeftCorner' ||\n\t\t\t\t\trailTypes[1] === 'bottomLeftCorner')\n\t\t\t)\n\t\t\t\treturn true;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tif (\n\t\t\t\t((railTypes[0] === 'vertical' ||\n\t\t\t\t\trailTypes[0] === 'bottomLeftCorner' ||\n\t\t\t\t\trailTypes[0] === 'bottomRightCorner') &&\n\t\t\t\t\trailTypes[1] === 'vertical') ||\n\t\t\t\t(railTypes[1] === 'topLeftCorner' || railTypes[1] === 'topRightCorner')\n\t\t\t)\n\t\t\t\treturn true;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tif (\n\t\t\t\t(railTypes[0] === 'horizontal' ||\n\t\t\t\t\trailTypes[0] === 'topLeftCorner' ||\n\t\t\t\t\trailTypes[0] === 'bottomLeftCorner') &&\n\t\t\t\t(railTypes[1] === 'horizontal' ||\n\t\t\t\t\trailTypes[1] === 'topRightCorner' ||\n\t\t\t\t\trailTypes[1] === 'bottomRightCorner')\n\t\t\t)\n\t\t\t\treturn true;\n\t\t\tbreak;\n\t\tdefault:\n\t}\n\treturn false;\n};\n\nexport const checkIfAdjacentTileConnected = (position, railType) => {\n\tif (position === 0) {\n\t\tif (railType === 'vertical' || railType === 'bottomLeftCorner' || railType === 'bottomRightCorner') {\n\t\t\treturn true;\n\t\t}\n\t}\n\tif (position === 3) {\n\t\tif (railType === 'horizontal' || railType === 'bottomRightCorner' || railType === 'topRightCorner') {\n\t\t\treturn true;\n\t\t}\n\t}\n\tif (position === 2) {\n\t\tif (railType === 'vertical' || railType === 'topLeftCorner' || railType === 'topRightCorner') {\n\t\t\treturn true;\n\t\t}\n\t}\n\tif (position === 1) {\n\t\tif (railType === 'horizontal' || railType === 'topLeftCorner' || railType === 'bottomLeftCorner') {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n","export const getSquareStyle = (BOX_DIM_REM) => {\n\treturn {\n\t\tminHeight: `${BOX_DIM_REM}rem`,\n\t\tminWidth: `${BOX_DIM_REM}rem`,\n\t\tdisplay: 'block',\n\t\tposition: 'relative',\n\t\ttop: '0',\n\t\tleft: '0',\n\t\theight: `${BOX_DIM_REM}rem`,\n\t\twidth: `${BOX_DIM_REM}rem`\n\t};\n};\n","import React, { useState } from 'react';\nimport WhiteSquareBackground from 'js/components/WhiteSquareBackground';\nimport TileButtons from 'js/components/TileButtons';\nimport { convertButtonClassToRailType } from 'js/trackFunctions/railTypeProcessing';\nimport { setHoverTrackImage, setPlacedTrackImage, setDefaultTrackImage } from 'js/trackFunctions/railImageProcessing';\nimport { getSquareStyle } from 'js/styles/square';\n\nexport const Square = (props) => {\n\tconst [ hoverTrack, setHoverTrack ] = useState(null);\n\n\t///////////// SQUARE - MOUSE EVENTS FUNCTIONS /////////////\n\n\tfunction getMouseEventObject(e) {\n\t\tconst mouseEventObject = {\n\t\t\ttile: [ props.x, props.y ],\n\t\t\trailType: convertButtonClassToRailType(e),\n\t\t\ttileClass: getTileClassFromEvent(e),\n\t\t\tmouseButton: e.buttons\n\t\t};\n\t\treturn mouseEventObject;\n\t}\n\n\tfunction squareHoverStart(e) {\n\t\tconst mouseEventObject = getMouseEventObject(e);\n\t\tprops.hoverStartEvent(mouseEventObject);\n\t\tif (e.buttons === 0) setHoverTrack(mouseEventObject.railType);\n\t}\n\n\tfunction squareHoverEnd(e) {\n\t\tsetHoverTrack(null);\n\t}\n\n\tfunction squareMouseDown(e) {\n\t\tconst mouseEventObject = getMouseEventObject(e);\n\t\tif (mouseEventObject.mouseButton === 1) props.leftClickEvent(mouseEventObject);\n\t\tif (mouseEventObject.mouseButton === 2) props.rightClickEvent(mouseEventObject);\n\t\tif (mouseEventObject.mouseButton === 3) props.bothClickEvent(mouseEventObject);\n\t}\n\n\tfunction squareMouseUp(e) {\n\t\tconst mouseEventObject = getMouseEventObject(e);\n\t\tif (e.button === 0) props.leftReleaseEvent(mouseEventObject);\n\t\tif (e.button === 2) props.rightReleaseEvent();\n\t}\n\n\t///////////// SQUARE - CLASSNAME CONVERSION FUNCTIONS /////////////\n\n\tfunction getTileClassFromEvent(e) {\n\t\tconst classList = e.currentTarget.className;\n\t\tlet tileClass;\n\t\tif (classList.includes('mapTile')) tileClass = 'mapTile';\n\t\tif (classList.includes('defaultTrack')) tileClass = 'defaultTrack';\n\t\treturn tileClass;\n\t}\n\n\t///////////// SQUARE - RENDER FUNCTIONS /////////////\n\n\tlet squareStyling, trackText, boxStyling;\n\n\tif (!props.trackData && hoverTrack) {\n\t\tsquareStyling = setHoverTrackImage(hoverTrack, props.railImages.unknown);\n\t}\n\n\tif (props.className === 'mapTile') {\n\t\tif (props.trackData) {\n\t\t\tsquareStyling = setPlacedTrackImage(props.trackData, props.railImages);\n\t\t}\n\t}\n\n\tif (\n\t\t(props.trackData && props.className === 'defaultTrack') ||\n\t\t(props.trackData && props.className === 'completeTrack')\n\t) {\n\t\tsquareStyling = setDefaultTrackImage(props.trackData, props.highlighted);\n\t}\n\n\tlet backgroundEnabled = true;\n\tif (props.className === 'mapTile') {\n\t\tif (props.trackData) backgroundEnabled = props.trackData.trackType.length !== 1;\n\t\telse if (hoverTrack) backgroundEnabled = hoverTrack !== 'T';\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tstyle={getSquareStyle(props.tileRemSize)}\n\t\t\tclassName={`square ${props.className}`}\n\t\t\tonContextMenu={(e) => e.preventDefault()}\n\t\t\tonMouseOver={(e) => squareHoverStart(e)}\n\t\t\tonMouseLeave={(e) => squareHoverEnd(e)}\n\t\t\tonMouseDown={(e) => squareMouseDown(e)}\n\t\t\tonMouseUp={(e) => squareMouseUp(e)}\n\t\t>\n\t\t\t<div className={`tile-button-container`} style={boxStyling}>\n\t\t\t\t<TileButtons {...props} />\n\t\t\t</div>\n\t\t\t<div className={'tile-display'} style={squareStyling}>\n\t\t\t\t{trackText}\n\t\t\t</div>\n\t\t\t{backgroundEnabled && <WhiteSquareBackground {...props} />}\n\t\t</div>\n\t);\n};\n\nexport default Square;\n","import { convertRailTypeToTrackImage } from 'js/trackFunctions/railTypeProcessing';\n\nexport const setHoverTrackImage = (hoverTrack, unknownRailImage) => {\n\tlet squareStyling;\n\tconst trackImage = convertRailTypeToTrackImage(hoverTrack);\n\tif (trackImage.trackType !== 'T') {\n\t\tsquareStyling = {\n\t\t\tbackgroundImage: `url(${trackImage.trackType})`,\n\t\t\ttransform: `rotate(${trackImage.trackRotation}deg)`,\n\t\t\topacity: 0.5\n\t\t};\n\t} else {\n\t\tsquareStyling = {\n\t\t\tbackgroundImage: `url(${unknownRailImage})`,\n\t\t\topacity: 1\n\t\t};\n\t}\n\treturn squareStyling;\n};\n\nexport const setPlacedTrackImage = (trackData, railImages) => {\n\tlet squareStyling;\n\tif (trackData.trackType !== 'T' && trackData.trackType !== 'X') {\n\t\tsquareStyling = {\n\t\t\tbackgroundImage: `url(${trackData.trackType})`,\n\t\t\ttransform: `rotate(${trackData.trackRotation}deg)`,\n\t\t\topacity: 1\n\t\t};\n\t} else if (trackData.trackType === 'T') {\n\t\tsquareStyling = {\n\t\t\tbackgroundImage: `url(${railImages.unknown})`,\n\t\t\topacity: 1\n\t\t};\n\t} else {\n\t\tsquareStyling = {\n\t\t\tbackgroundImage: `url(${railImages.cross})`,\n\t\t\topacity: 1\n\t\t};\n\t}\n\treturn squareStyling;\n};\n\nexport const setDefaultTrackImage = (trackData, highlighted) => {\n\tlet squareStyling;\n\tsquareStyling = {\n\t\tbackgroundImage: `url(${trackData.trackType})`,\n\t\ttransform: `rotate(${trackData.trackRotation}deg)`,\n\t\topacity: 1,\n\t\tfilter: highlighted ? 'hue-rotate(200deg) saturate(10)' : 'none',\n\t\ttransition: 'filter 1s ease-in-out'\n\t};\n\treturn squareStyling;\n};\n","import React from 'react';\nimport { getSquareStyle } from 'js/styles/square';\n\nexport const HeadingTile = (props) => {\n\tfunction convertFillStateToStyle(fillState) {\n\t\tswitch (fillState) {\n\t\t\tcase 'underfilled':\n\t\t\t\treturn {\n\t\t\t\t\tWebkitTextFillColor: 'white',\n\t\t\t\t\tWebkitTextStrokeColor: 'black'\n\t\t\t\t};\n\t\t\tcase 'full':\n\t\t\t\treturn {\n\t\t\t\t\tWebkitTextFillColor: 'green',\n\t\t\t\t\tWebkitTextStrokeColor: 'white'\n\t\t\t\t};\n\t\t\tcase 'overfilled':\n\t\t\t\treturn {\n\t\t\t\t\tWebkitTextFillColor: 'red',\n\t\t\t\t\tWebkitTextStrokeColor: 'white'\n\t\t\t\t};\n\t\t\tdefault:\n\t\t\t\treturn {\n\t\t\t\t\tWebkitTextFillColor: 'white',\n\t\t\t\t\tWebkitTextStrokeColor: 'black'\n\t\t\t\t};\n\t\t}\n\t}\n\n\tconst headerTextBoxStyle = {\n\t\twidth: '100%',\n\t\theight: '100%',\n\t\tborder: '1px solid black',\n\t\tdisplay: 'flex',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center'\n\t};\n\n\treturn (\n\t\t<div style={getSquareStyle(props.tileRemSize)} className={`square`} onContextMenu={(e) => e.preventDefault()}>\n\t\t\t<div style={headerTextBoxStyle}>\n\t\t\t\t<p className=\"boxLabel\" style={convertFillStateToStyle(props.fillState)}>\n\t\t\t\t\t{props.headerLabel}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default HeadingTile;\n","import React from 'react';\nimport { getSquareStyle } from 'js/styles/square';\n\nexport const EmptyTile = (props) => {\n\tconst emptyTileStyle = {\n\t\t...getSquareStyle(props.tileRemSize)\n\t};\n\tconst squareStyling = {\n\t\tborder: '1px solid black',\n\t\tzIndex: '1'\n\t};\n\treturn (\n\t\t<div style={emptyTileStyle}>\n\t\t\t<div className={'tile-display'} style={squareStyling} />\n\t\t</div>\n\t);\n};\n\nexport default EmptyTile;\n","import React from 'react';\nimport { getSquareStyle } from 'js/styles/square';\n\nexport const TransparentTile = (props) => {\n\tconst transparentTileStyle = {\n\t\t...getSquareStyle(props.tileRemSize),\n\t\tzIndex: '-2',\n\t\topacity: '0'\n\t};\n\n\treturn <div style={transparentTileStyle} />;\n};\n\nexport default TransparentTile;\n","///UTILITY FUNCTIONS\n\nexport const randomIntFromInterval = (min, max) => {\n\treturn Math.floor(Math.random() * (max - min + 1) + min); // min and max included\n};\n\nexport const removeArrayValue = (array, value) => {\n\tif (isNonEmptyArray(array)) {\n\t\tconst index = array.indexOf(value);\n\t\tif (index > -1) {\n\t\t\tarray.splice(index, 1);\n\t\t}\n\t\treturn array;\n\t} else {\n\t\treturn null;\n\t}\n};\n\nexport const findIndexOfArrayInMatrix = (array, matrix) => {\n\tlet index = -1;\n\tfor (let i = 0; i < matrix.length; i++) {\n\t\tif (compareArrays(array, matrix[i])) index = i;\n\t}\n\treturn index;\n};\n\nexport const compareArrays = (arr1, arr2) => {\n\tlet arrEqual = false;\n\tif (arr1.length === arr2.length) {\n\t\tarrEqual = arr1.every((v, i) => v === arr2[i]);\n\t}\n\treturn arrEqual;\n};\n\nexport const getIndexOfLongestArrayInMatrix = (matrix) => {\n\tlet index = -1;\n\tlet curMaxLength = 0;\n\tfor (let i = 0; i < matrix.length; i++) {\n\t\tif (matrix[i].length > curMaxLength) {\n\t\t\tindex = i;\n\t\t\tcurMaxLength = matrix[i].length;\n\t\t}\n\t}\n\treturn index;\n};\n\nexport const isNonEmptyArray = (array) => {\n\t//return false if equal to [] or data type other than array\n\treturn Array.isArray(array) && array.length > 0;\n};\n\nexport const print = (value) => {\n\tconsole.log(JSON.parse(JSON.stringify(value)));\n};\n\nexport const removeDuplicateArraysFromMatrix = (matrix) => {\n\treturn matrix.filter((el, loopIndex) => {\n\t\tconst elIndex = findIndexOfArrayInMatrix(el, matrix);\n\t\tif (loopIndex === elIndex) return true;\n\t\telse return false;\n\t});\n};\n\nexport const removeNonDuplicateArraysFromMatrix = (matrix) => {\n\treturn matrix.filter((el, loopIndex) => {\n\t\tconst elIndex = findIndexOfArrayInMatrix(el, matrix);\n\t\tif (loopIndex === elIndex) return false;\n\t\telse return true;\n\t});\n};\n\nexport const removeArraysFromMatrix = (arrays, matrix) => {\n\tarrays.forEach(function(arr) {\n\t\tmatrix = matrix.filter((el) => !compareArrays(el, arr));\n\t});\n\treturn matrix;\n};\n\nexport const getRandomSeed = () => {\n\treturn Math.floor(Math.random() * Math.pow(10, 15));\n};\n\nexport const convertRemToPx = (rem) => {\n\treturn rem * parseFloat(getComputedStyle(document.documentElement).fontSize);\n};\n\nexport const checkIfArrayIsInMatrix = (array, matrix) => {\n\tconst count = matrix.filter((el) => compareArrays(array, el));\n\treturn Boolean(count.length);\n};\n\nexport const findCommonArraysOfAllMatrices = (arrayOfMatrices) => {\n\tconst matricesUnique = arrayOfMatrices.map((mat) => removeDuplicateArraysFromMatrix(mat));\n\tlet commonArrays = matricesUnique[0];\n\tfor (let i = 0; i < matricesUnique.length - 1; i++) {\n\t\tlet combinedArrays = [ ...commonArrays, ...matricesUnique[i + 1] ];\n\t\tcommonArrays = removeNonDuplicateArraysFromMatrix(combinedArrays);\n\t}\n\treturn commonArrays;\n};\n\nexport const randomArrayEntry = (array) => {\n\treturn array[randomIntFromInterval(0, array.length - 1)];\n};\n\nexport const shiftPushArray = (array, items) => {\n\treturn array.slice(items.length).concat(items);\n};\n\nexport const halveArray = (array) => {\n\tconst halfIndex = Math.floor(array.length / 2);\n\treturn array.slice(0, halfIndex);\n};\n\nexport const shuffleArray = (array) => {\n\tlet remaining = array.length;\n\tlet temp, index;\n\twhile (remaining) {\n\t\tindex = Math.floor(Math.random() * remaining);\n\t\tremaining--;\n\t\ttemp = array[remaining];\n\t\tarray[remaining] = array[index];\n\t\tarray[index] = temp;\n\t}\n\n\treturn array;\n};\n","import { compareArrays } from 'js/utility/utilityFunctions';\n\nexport const getAllDefaultTiles = (trainTrackMap) => {\n\tlet defaultTileArr = [];\n\ttrainTrackMap.tracks.forEach(function(el) {\n\t\tif (el.defaultTrack) defaultTileArr.push(el);\n\t});\n\treturn defaultTileArr;\n};\n\nexport const getRailTypeOfPlacedTile = (coordinate, placedTracks) => {\n\tlet railType = null;\n\tplacedTracks.forEach(function(el) {\n\t\tif (el.tile[0] === coordinate[0] && el.tile[1] === coordinate[1]) railType = el.railType;\n\t});\n\treturn railType;\n};\n\nexport const checkIfPlacedTilesAllCorrect = (trainTrackMap, placedTracks) => {\n\tconst correctTileCount = getCorrectTileCount(trainTrackMap, placedTracks);\n\tconst defaultTileCount = getAllDefaultTiles(trainTrackMap).length;\n\tconst placedRailTrackCount = getPlacedRailTrackCount(placedTracks);\n\tif (\n\t\tcorrectTileCount === trainTrackMap.tracks.length &&\n\t\ttrainTrackMap.tracks.length === placedRailTrackCount + defaultTileCount\n\t) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n};\n\nconst getPlacedRailTrackCount = (placedTracks) => {\n\tconst placedTiles = placedTracks;\n\tconst placedRailTrackCount = placedTiles.filter((el) => el.railType !== 'X').length;\n\treturn placedRailTrackCount;\n};\n\nconst getCorrectTileCount = (trainTrackMap, placedTracks) => {\n\treturn trainTrackMap.tracks.filter(function(winning) {\n\t\tlet correctTile = winning.defaultTrack;\n\t\tplacedTracks.forEach(function(placed) {\n\t\t\tif (compareArrays(winning.tile, placed.tile) && winning.railType === placed.railType) correctTile = true;\n\t\t});\n\t\treturn correctTile;\n\t}).length;\n};\n","import React from 'react';\n\nimport MapTile from 'js/components/MapTile';\nimport HeadingTile from 'js/components/HeadingTile';\nimport EmptyTile from 'js/components/EmptyTile';\nimport TransparentTile from 'js/components/TransparentTile';\n\nimport { convertRailTypeToTrackImage } from 'js/trackFunctions/railTypeProcessing';\nimport { getAllDefaultTiles } from 'js/trackFunctions/trackParsing';\n\nexport const Board = (props) => {\n\tfunction renderMapTile(x, y, railImage, mapSolutionVisible) {\n\t\treturn (\n\t\t\t<MapTile\n\t\t\t\tclassName=\"mapTile\"\n\t\t\t\ttileRemSize={props.tileRemSize}\n\t\t\t\trailImages={props.railImages}\n\t\t\t\tkey={x}\n\t\t\t\tx={x}\n\t\t\t\ty={y}\n\t\t\t\tmapSolutionVisible={mapSolutionVisible}\n\t\t\t\ttrackData={railImage}\n\t\t\t\t{...props.activeMouseEventsObject}\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst staticTile = (x, y, defaultRailType, highlighted, mouseEvents) => {\n\t\treturn (\n\t\t\t<MapTile\n\t\t\t\tclassName=\"defaultTrack\"\n\t\t\t\ttileRemSize={props.tileRemSize}\n\t\t\t\tkey={x}\n\t\t\t\tx={x}\n\t\t\t\ty={y}\n\t\t\t\thighlighted={highlighted}\n\t\t\t\ttrackData={convertRailTypeToTrackImage(defaultRailType)}\n\t\t\t\t{...mouseEvents}\n\t\t\t/>\n\t\t);\n\t};\n\n\tfunction renderDefaultTrack(x, y, defaultRailType, highlighted) {\n\t\treturn staticTile(x, y, defaultRailType, highlighted, props.activeMouseEventsObject);\n\t}\n\n\tfunction renderCompleteTrack(x, y, defaultRailType, highlighted) {\n\t\treturn staticTile(x, y, defaultRailType, highlighted, props.emptyMouseEventsObject);\n\t}\n\n\t///////////// MAP - MAP COMPONENT GENERATION FUNCTIONS /////////////\n\n\tfunction placeColumnHeader(trainTrackMap, x, y) {\n\t\tconst headerLabel = trainTrackMap.headerLabels.x[x];\n\t\tconst fillState = props.gameComplete ? 'full' : getRowColumnFillstate('x', x);\n\t\treturn (\n\t\t\t<HeadingTile\n\t\t\t\tkey={x}\n\t\t\t\tx={x}\n\t\t\t\ty={y - 1}\n\t\t\t\theaderLabel={headerLabel}\n\t\t\t\tfillState={fillState}\n\t\t\t\ttileRemSize={props.tileRemSize}\n\t\t\t/>\n\t\t);\n\t}\n\n\tfunction placeRowHeader(trainTrackMap, x, y) {\n\t\tconst headerLabel = trainTrackMap.headerLabels.y[y - 1];\n\t\tconst fillState = props.gameComplete ? 'full' : getRowColumnFillstate('y', y - 1);\n\t\treturn (\n\t\t\t<HeadingTile\n\t\t\t\tkey={x}\n\t\t\t\tx={x}\n\t\t\t\ty={y - 1}\n\t\t\t\theaderLabel={headerLabel}\n\t\t\t\tfillState={fillState}\n\t\t\t\ttileRemSize={props.tileRemSize}\n\t\t\t/>\n\t\t);\n\t}\n\n\tfunction placeCompletedMapTrack(trainTrackMap, x, y) {\n\t\tlet defaultTile;\n\t\tlet highlighted = false;\n\t\ttrainTrackMap.tracks.forEach(function(el) {\n\t\t\tif (el.tile[0] === x && el.tile[1] === y - 1) {\n\t\t\t\tdefaultTile = el.railType;\n\t\t\t\tif (props.defaultTilesHighlighted && el.defaultTrack) highlighted = true;\n\t\t\t}\n\t\t});\n\t\tif (defaultTile) return renderCompleteTrack(x, y - 1, defaultTile, highlighted);\n\t\telse return <EmptyTile key={x} tileRemSize={props.tileRemSize} />;\n\t}\n\n\tfunction placeUserPlacedTrack(x, y) {\n\t\tlet railImage;\n\t\tprops.placedTracks.forEach(function(el) {\n\t\t\tif (el.tile[0] === x && el.tile[1] === y - 1) railImage = convertRailTypeToTrackImage(el.railType);\n\t\t});\n\t\tif (railImage) return renderMapTile(x, y - 1, railImage);\n\t\telse return renderMapTile(x, y - 1, null);\n\t}\n\n\tfunction placeGameActiveMapTrack(trainTrackMap, x, y) {\n\t\tconst defaultTile = checkIfTileIsDefault(trainTrackMap, x, y - 1);\n\t\tif (defaultTile) return renderDefaultTrack(x, y - 1, defaultTile, props.defaultTilesHighlighted);\n\t\telse return placeUserPlacedTrack(x, y);\n\t}\n\tfunction placeMainMapTile(trainTrackMap, x, y) {\n\t\tif (props.gameComplete || props.mapSolutionVisible) return placeCompletedMapTrack(trainTrackMap, x, y);\n\t\telse return placeGameActiveMapTrack(trainTrackMap, x, y);\n\t}\n\n\tfunction checkIfTileIsDefault(trainTrackMap, x, y) {\n\t\tlet trackDefaultTile = null;\n\t\ttrainTrackMap.tracks.forEach(function(el) {\n\t\t\tif (el.tile[0] === x && el.tile[1] === y && el.defaultTrack) trackDefaultTile = el.railType;\n\t\t});\n\t\treturn trackDefaultTile;\n\t}\n\n\tfunction getRowColumnFillstate(axis, index) {\n\t\tlet fillState = 'underfilled';\n\t\tconst defaultTiles = getAllDefaultTiles(props.trainTrackMap);\n\t\tlet axisNum = axis === 'x' ? 0 : 1;\n\n\t\tlet placedTrackCount = defaultTiles.filter((el) => el.tile[axisNum] === index).length;\n\t\tconst tilesOnAxis = props.trainTrackMap.tracks.filter((el) => el.tile[axisNum] === index).length;\n\t\tprops.placedTracks.forEach(function(el) {\n\t\t\tif (el.tile[axisNum] === index && el.railType !== 'X') placedTrackCount++;\n\t\t});\n\n\t\tif (tilesOnAxis < placedTrackCount) fillState = 'overfilled';\n\t\telse if (tilesOnAxis === placedTrackCount) fillState = 'full';\n\t\treturn fillState;\n\t}\n\n\tlet mapBoard = [];\n\tfor (let y = 0; y < props.mapHeight + 1; y++) {\n\t\tmapBoard.push(\n\t\t\t<div className=\"mapRow\" key={y}>\n\t\t\t\t{[ ...Array(props.mapWidth + 1) ].map((el, x) => {\n\t\t\t\t\tif (y === 0) return placeColumnHeader(props.trainTrackMap, x, y);\n\t\t\t\t\telse if (x === props.mapWidth) return placeRowHeader(props.trainTrackMap, x, y);\n\t\t\t\t\telse if (!props.mapVisible) return <TransparentTile key={x} tileRemSize={props.tileRemSize} />;\n\t\t\t\t\telse return placeMainMapTile(props.trainTrackMap, x, y);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn mapBoard;\n};\n\nexport default Board;\n","import { compareArrays } from 'js/utility/utilityFunctions';\n\nexport const getCombinedArrayOfNewAndOldTiles = (newTiles, map) => {\n\tconst tilesToPlace = filterNewTilesOfDefaultTiles(newTiles, map.mapTracks);\n\tconst alreadyPlacedTiles = filterAlreadyPlacedTracksOfNewTiles(tilesToPlace, map.placedTracks);\n\treturn [ ...tilesToPlace, ...alreadyPlacedTiles ];\n};\n\nconst filterNewTilesOfDefaultTiles = (newTiles, mapTracks) => {\n\tconst filteredTiles = newTiles.filter((newTile) => {\n\t\tconst defaultOverlapTiles = mapTracks.filter(\n\t\t\t(mapTile) => compareArrays(newTile.tile, mapTile.tile) && mapTile.defaultTrack\n\t\t);\n\t\treturn defaultOverlapTiles.length === 0;\n\t});\n\treturn filteredTiles;\n};\n\nconst filterAlreadyPlacedTracksOfNewTiles = (newTiles, placedTracks) => {\n\tlet nonConflictingPlacedTracks = [];\n\tplacedTracks.forEach(function(track) {\n\t\tlet placedTrackConflict = false;\n\t\tnewTiles.forEach(function(el) {\n\t\t\tif (compareArrays(track.tile, el.tile)) placedTrackConflict = true;\n\t\t});\n\t\tif (!placedTrackConflict) nonConflictingPlacedTracks.push(track);\n\t});\n\treturn nonConflictingPlacedTracks;\n};\n","import { randomIntFromInterval, compareArrays } from 'js/utility/utilityFunctions';\n\nexport const findDirectionFromMove = (currentMove, lastMove) => {\n\tlet moveDirection;\n\tconst moveCalc = differenceBetweenTwoMoves(currentMove, lastMove);\n\tif (compareArrays(moveCalc, [ 0, -1 ])) moveDirection = 0; //= 'up';\n\tif (compareArrays(moveCalc, [ 1, 0 ])) moveDirection = 1; //= 'right';\n\tif (compareArrays(moveCalc, [ 0, 1 ])) moveDirection = 2; //= 'down';\n\tif (compareArrays(moveCalc, [ -1, 0 ])) moveDirection = 3; //= 'left';\n\treturn moveDirection;\n};\n\nfunction differenceBetweenTwoMoves(moveOne, moveTwo) {\n\treturn [ moveOne[0] - moveTwo[0], moveOne[1] - moveTwo[1] ];\n}\n\nexport const directionsToTrackRailType = (dirs) => {\n\tlet railTypeArray = [];\n\tfor (let i = 0; i < dirs.length; i++) {\n\t\tif ((dirs[i] === 0 && dirs[i + 1] === 0) || (dirs[i] === 2 && dirs[i + 1] === 2))\n\t\t\trailTypeArray.push('vertical');\n\t\tif ((dirs[i] === 1 && dirs[i + 1] === 1) || (dirs[i] === 3 && dirs[i + 1] === 3))\n\t\t\trailTypeArray.push('horizontal');\n\t\tif ((dirs[i] === 2 && dirs[i + 1] === 1) || (dirs[i] === 3 && dirs[i + 1] === 0))\n\t\t\trailTypeArray.push('topRightCorner');\n\t\tif ((dirs[i] === 3 && dirs[i + 1] === 2) || (dirs[i] === 0 && dirs[i + 1] === 1))\n\t\t\trailTypeArray.push('bottomRightCorner');\n\t\tif ((dirs[i] === 0 && dirs[i + 1] === 3) || (dirs[i] === 1 && dirs[i + 1] === 2))\n\t\t\trailTypeArray.push('bottomLeftCorner');\n\t\tif ((dirs[i] === 1 && dirs[i + 1] === 0) || (dirs[i] === 2 && dirs[i + 1] === 3))\n\t\t\trailTypeArray.push('topLeftCorner');\n\t}\n\treturn railTypeArray;\n};\n\nexport const getTilesInEachDirection = (currentTile, generatedTiles) => {\n\tlet tilesInEachDirection = [];\n\tfor (let i = 0; i < 4; i++) {\n\t\tlet sign = Math.ceil((i % 3) / 2) * 2 + 1; //\n\t\tlet lineTiles = generatedTiles.filter((tile) => tile[i % 2] === currentTile[i % 2]);\n\t\tlet directionTiles = lineTiles.filter((tile) => tile[(i + 1) % 2] * -sign < currentTile[(i + 1) % 2] * -sign);\n\t\ttilesInEachDirection.push(directionTiles);\n\t}\n\treturn tilesInEachDirection;\n};\n\nexport const getDirectionOfEachMove = (allTiles, parameters) => {\n\tlet directions = [];\n\tdirections.push(getStartingDirection(allTiles[0], parameters));\n\tfor (let i = 0; i < allTiles.length - 1; i++) {\n\t\tlet currentMoveDir = findDirectionFromMove(allTiles[i + 1], allTiles[i]);\n\t\tdirections.push(currentMoveDir);\n\t}\n\tdirections.push(getEndingDirection(allTiles[allTiles.length - 1], parameters));\n\treturn directions;\n};\n\nfunction getStartingDirection(start, parameters) {\n\tconst possibleStartDirections = getPossibleStartDirections(start, parameters);\n\treturn possibleStartDirections[randomIntFromInterval(0, possibleStartDirections.length - 1)];\n}\n\nfunction getEndingDirection(end, parameters) {\n\tconst possibleEndDirections = getPossibleEndDirections(end, parameters);\n\treturn possibleEndDirections[randomIntFromInterval(0, possibleEndDirections.length - 1)];\n}\n\nfunction getPossibleStartDirections(start, parameters) {\n\tconst { mapWidth, mapHeight } = parameters;\n\tlet possibleDirections = [];\n\tif (start[0] === 0) possibleDirections.push(1); // comes in from left\n\tif (start[1] === 0) possibleDirections.push(2); // comes in from top\n\tif (start[0] === mapWidth - 1) possibleDirections.push(3); // comes in from right\n\tif (start[1] === mapHeight - 1) possibleDirections.push(0); // comes in from bottom\n\treturn possibleDirections;\n}\n\nfunction getPossibleEndDirections(end, parameters) {\n\tconst { mapWidth, mapHeight } = parameters;\n\tlet possibleDirections = [];\n\tif (end[0] === 0) possibleDirections.push(3); // leaves via left\n\tif (end[1] === 0) possibleDirections.push(0); // leaves via top\n\tif (end[0] === mapWidth - 1) possibleDirections.push(1); // leaves via right\n\tif (end[1] === mapHeight - 1) possibleDirections.push(2); // leaves via bottom\n\treturn possibleDirections;\n}\n","import { checkIfArrayIsInMatrix } from 'js/utility/utilityFunctions';\nimport { findDirectionFromMove } from 'js/utility/directionsConversions';\n\nfunction getAdjacentTiles(coordinate, axisMax) {\n\tlet adjacentTiles = [];\n\tif (coordinate[1] > 0) adjacentTiles.push({ tile: [ coordinate[0], coordinate[1] - 1 ], position: 0 });\n\tif (coordinate[0] < axisMax.x) adjacentTiles.push({ tile: [ coordinate[0] + 1, coordinate[1] ], position: 1 });\n\tif (coordinate[1] < axisMax.y) adjacentTiles.push({ tile: [ coordinate[0], coordinate[1] + 1 ], position: 2 });\n\tif (coordinate[0] > 0) adjacentTiles.push({ tile: [ coordinate[0] - 1, coordinate[1] ], position: 3 });\n\treturn adjacentTiles;\n}\n\nexport const getAdjacentTracks = (coordinate, currentMapInfo) => {\n\tconst adjacentTiles = getAdjacentTiles(coordinate, currentMapInfo.axisMax);\n\tconst trackCoordinates = currentMapInfo.tracksOnMap.map((el) => el.tile);\n\treturn adjacentTiles.filter((arr) => checkIfArrayIsInMatrix(arr.tile, trackCoordinates));\n};\n\nexport const convertMoveArrayToDirections = (moveArr) => {\n\tlet directions = [];\n\tfor (let i = 0; i < moveArr.length - 1; i++) {\n\t\tconst direction = findDirectionFromMove(moveArr[i + 1], moveArr[i]);\n\t\tdirections.push(direction);\n\t}\n\treturn directions;\n};\n","import {\n\tconvertDirectionTupleToRailTypes,\n\tcheckIfTwoRailTypesConnected,\n\tcheckIfAdjacentTileConnected\n} from 'js/trackFunctions/railTypeProcessing';\nimport { findDirectionFromMove } from 'js/utility/directionsConversions.js';\nimport { getAdjacentTracks, convertMoveArrayToDirections } from 'js/trackFunctions/trackUtilities';\nimport { randomArrayEntry, isNonEmptyArray, compareArrays } from 'js/utility/utilityFunctions';\n\nexport const railDragEvent = (dragArray, currentMapInfo) => {\n\tconst truncatedDragArray = dragArray.slice(1);\n\tif (dragArray[0] === null) return initialDrag(truncatedDragArray, currentMapInfo);\n\telse return standardDrag(dragArray);\n};\n\nconst standardDrag = (dragArray) => {\n\tconst directions = convertPathToDirectionArray(dragArray);\n\tconst railTypes = convertDirectionTupleToRailTypes(directions);\n\treturn railTypes.map((el, i) => {\n\t\treturn { tile: dragArray[i + 1], railType: el };\n\t});\n};\n\nconst initialDrag = (dragArray, currentMapInfo) => {\n\tconst connectedAdjacentTracks = getConnectedAdjacentTracks(dragArray[0], currentMapInfo);\n\tconst existingTilesBoo = doDragTilesContainTracks(dragArray, currentMapInfo);\n\tif (existingTilesBoo) return draggingFromExistingTiles(dragArray, currentMapInfo);\n\telse if (isNonEmptyArray(connectedAdjacentTracks))\n\t\treturn draggingFromAdjacentConnectedTile(dragArray, connectedAdjacentTracks);\n\telse return standardDrag([ null, ...dragArray ]);\n};\n\nconst draggingFromExistingTiles = (dragArray, currentMapInfo) => {\n\tconst dragConnections = getDragTilesConnectedTiles(dragArray, currentMapInfo);\n\tconst directions = getTrackDirectionPath(dragConnections, dragArray);\n\tconst railTypeArray = convertDirectionsArrayToRailTypes(directions);\n\treturn railTypeArray.map((el, i) => {\n\t\treturn { tile: dragArray[i], railType: el };\n\t});\n};\n\nconst getTrackDirectionPath = (dragConnections, dragArray) => {\n\tconst dragDirection = convertMoveArrayToDirections(dragArray)[0];\n\tlet dragPath = [];\n\tif (dragConnections[0]) {\n\t\tconst directionToFirstTile = (dragConnections[0].position + 2) % 4;\n\t\tdragPath.push(directionToFirstTile);\n\t} else dragPath.push(dragDirection);\n\tdragPath.push(dragDirection);\n\tif (dragConnections[1]) dragPath.push(dragConnections[1].position);\n\telse dragPath.push(dragDirection);\n\treturn dragPath;\n};\n\nconst convertDirectionsArrayToRailTypes = (directions) => {\n\tlet railTypeArray = [];\n\tfor (let i = 0; i < directions.length - 1; i++) {\n\t\tconst directionTuple = [ directions[i], directions[i + 1] ];\n\t\tconst tileRailType = convertDirectionTupleToRailTypes(directionTuple)[0];\n\t\trailTypeArray.push(tileRailType);\n\t}\n\treturn railTypeArray;\n};\n\nconst getDragTilesConnectedTiles = (dragArray, currentMapInfo) => {\n\tconst reversedDragArray = dragArray.slice().reverse();\n\tconst firstConnections = getSingleDragTilesConnection(dragArray, currentMapInfo);\n\tconst secondConnections = getSingleDragTilesConnection(reversedDragArray, currentMapInfo);\n\treturn [ firstConnections, secondConnections ];\n};\n\nconst getSingleDragTilesConnection = (dragArray, currentMapInfo) => {\n\tconst dragRailType = getRailTypeOfTile(dragArray[0], currentMapInfo);\n\tif (dragRailType) {\n\t\tlet dragFacingTracks = getConnectedAdjacentTracks(dragArray[0], currentMapInfo);\n\t\tdragFacingTracks = dragFacingTracks.filter((el) => !compareArrays(el.tile, dragArray[1]));\n\t\tconst connections = dragFacingTracks.filter((el) =>\n\t\t\tcheckIfTwoRailTypesConnected(el.position, [ dragRailType, el.railType ])\n\t\t);\n\t\treturn randomArrayEntry(connections);\n\t} else return null;\n};\n\nconst getRailTypeOfTile = (coordinate, currentMapInfo) => {\n\tconst tiles = currentMapInfo.tracksOnMap.filter((el) => compareArrays(coordinate, el.tile));\n\tif (isNonEmptyArray(tiles)) return tiles[0].railType;\n\telse return null;\n};\n\nconst doDragTilesContainTracks = (dragArray, currentMapInfo) => {\n\tconst firstTileTaken = currentMapInfo.tracksOnMap.filter((el) => compareArrays(el.tile, dragArray[0])).length;\n\tconst secondTileTaken = currentMapInfo.tracksOnMap.filter((el) => compareArrays(el.tile, dragArray[1])).length;\n\treturn Boolean(firstTileTaken + secondTileTaken > 0);\n};\n\nconst draggingFromAdjacentConnectedTile = (dragArray, connectedTracks) => {\n\tconst connectedTiles = connectedTracks.map((el) => el.tile);\n\tconst randAdj = randomArrayEntry(connectedTiles);\n\tconst coordinates = [ randAdj, dragArray[0], dragArray[1] ];\n\treturn standardDrag(coordinates);\n};\n\nconst getConnectedAdjacentTracks = (initialTile, currentMapInfo) => {\n\tconst adjacentTracks = getAdjacentTracks(initialTile, currentMapInfo);\n\tconst adjacentTrackData = getTileArrayData(adjacentTracks, currentMapInfo.tracksOnMap);\n\treturn adjacentTrackData.filter((el) => checkIfAdjacentTileConnected(el.position, el.railType));\n};\n\nconst getTileArrayData = (tileArray, tracksOnMap) => {\n\tlet tileArrayData = [];\n\ttileArray.forEach((adj) => {\n\t\ttracksOnMap.forEach((mapTile) => {\n\t\t\tif (compareArrays(adj.tile, mapTile.tile))\n\t\t\t\ttileArrayData.push({\n\t\t\t\t\ttile: mapTile.tile,\n\t\t\t\t\trailType: mapTile.railType,\n\t\t\t\t\tposition: adj.position\n\t\t\t\t});\n\t\t});\n\t});\n\treturn tileArrayData;\n};\n\nconst convertPathToDirectionArray = (array) => {\n\tlet directions = [];\n\tfor (let i = 0; i < array.length - 1; i++) {\n\t\tif (array[i] !== null && array[i + 1] !== null) directions.push(findDirectionFromMove(array[i + 1], array[i]));\n\t}\n\treturn directions;\n};\n","import { randomIntFromInterval } from 'js/utility/utilityFunctions';\nconst ROYGBIV_HEX_CODES = [ '#ff0000', '#ffa500', '#ffff00', '#008000', '#0000ff', '#4b0082', '#ee82ee' ];\n\nexport const generateRandomRGBColor = () => {\n\tlet minValue = 100;\n\tconst modAmount = 0.8;\n\tconst r = randomIntFromInterval(minValue, 255);\n\tr > 255 - minValue / 2 ? (minValue *= modAmount) : (minValue /= modAmount);\n\tconst g = randomIntFromInterval(minValue, 255);\n\tg > 255 - minValue / 2 ? (minValue *= modAmount) : (minValue /= modAmount);\n\tconst b = randomIntFromInterval(minValue, 255);\n\treturn `rgb(${[ r, g, b ]})`;\n};\n\nexport const colorToWhiteArray = (hexColor, numberOfShades) => {\n\tconst colorArray = convertHexToRgbArray(hexColor);\n\tconst colorData = {\n\t\tcolorOneArray: colorArray,\n\t\tcolorTwoArray: [ 255, 255, 255 ],\n\t\tnumberOfShades: Math.ceil(numberOfShades)\n\t};\n\tconst colorMatrix = createColorMatrixByStep(colorData);\n\treturn colorMatrix.map((el) => convertRgbArrayToHex(el));\n};\n\nexport const convertHexToRgbArray = (hexColor) => {\n\tconst parseStringAsArray = hexColor.replace('#', '').match(/.{1,2}/g);\n\treturn parseStringAsArray.map((el) => parseInt(Number(`0x${el}`), 10));\n};\n\nexport const convertRgbArrayToHex = (rgbArray) => {\n\tconst hexCode = rgbArray\n\t\t.map(function(el) {\n\t\t\tconst value = el.toString(16);\n\t\t\tif (value.length === 1) return '0' + value;\n\t\t\telse return value;\n\t\t})\n\t\t.join('');\n\treturn '#' + hexCode;\n};\n\nfunction getColorStepValues(colorData) {\n\tconst { colorOneArray, colorTwoArray, numberOfShades } = colorData;\n\treturn colorOneArray.map((el, i) => (colorTwoArray[i] - el) / (numberOfShades - 1));\n}\n\nfunction createColorMatrixByStep(colorData) {\n\tconst { colorOneArray, numberOfShades } = colorData;\n\tlet colorMatrix = [];\n\tconst colorStepValues = getColorStepValues(colorData);\n\tfor (let iteration = 0; iteration < numberOfShades; iteration++) {\n\t\tconst color = colorOneArray.map((el, index) => Math.floor(el + iteration * colorStepValues[index]));\n\t\tcolorMatrix.push(color);\n\t}\n\treturn colorMatrix;\n}\n\nconst colorToColorArray = (colorOne, colorTwo, numberOfShades) => {\n\tconst colorOneArray = convertHexToRgbArray(colorOne);\n\tconst colorTwoArray = convertHexToRgbArray(colorTwo);\n\tconst colorData = {\n\t\tcolorOneArray,\n\t\tcolorTwoArray,\n\t\tnumberOfShades: Math.ceil(numberOfShades)\n\t};\n\tconst colorMatrix = createColorMatrixByStep(colorData);\n\treturn colorMatrix.map((el) => convertRgbArrayToHex(el));\n};\n\nexport const roygbivArray = () => {\n\tlet roygbivArray = [];\n\tfor (let i = 0; i < ROYGBIV_HEX_CODES.length - 1; i++) {\n\t\tconst rainbowPart = colorToColorArray(ROYGBIV_HEX_CODES[i], ROYGBIV_HEX_CODES[i + 1], 100);\n\t\troygbivArray.push(rainbowPart);\n\t}\n\troygbivArray = roygbivArray.flat();\n\treturn roygbivArray;\n};\n","import React from 'react';\nimport { colorToWhiteArray } from 'js/utility/colorFunctions';\n\nexport const MapAmbientBackground = (props) => {\n\tconst colorSelected = props.themeColor.available[props.themeColor.selected];\n\tlet backgroundShapes = [];\n\tif (props.visualEffects) {\n\t\tconst numberOfShapes = 20;\n\t\tconst colorArray = colorToWhiteArray(colorSelected, numberOfShapes + 1);\n\t\tfor (let i = 0; i < numberOfShapes; i++) {\n\t\t\tconst backgroundShapeStyle = {\n\t\t\t\tbackgroundColor: colorArray[i],\n\t\t\t\tanimation: `spin ${15 + 0.25 * (i + 1)}s infinite linear`,\n\t\t\t\theight: `${100 - 4 * i}%`,\n\t\t\t\twidth: `${100 - 4 * i}%`\n\t\t\t};\n\t\t\tbackgroundShapes.push(<div key={i} className=\"mapBackgroundShape\" style={backgroundShapeStyle} />);\n\t\t}\n\t} else {\n\t\tconst lightenedColor = colorToWhiteArray(colorSelected, 10)[6];\n\t\tbackgroundShapes.push(<div style={{ width: '100%', height: '100%', backgroundColor: lightenedColor }} />);\n\t}\n\treturn <div className=\"mapBackgroundContainer\">{backgroundShapes}</div>;\n};\n\nexport default MapAmbientBackground;\n","import React, { useRef, useEffect, useState } from 'react';\nimport Board from 'js/components/Board';\n\nimport { compareArrays, isNonEmptyArray, shiftPushArray } from 'js/utility/utilityFunctions';\nimport { getCombinedArrayOfNewAndOldTiles } from 'js/trackFunctions/trackPlacement';\nimport { railDragEvent } from 'js/trackFunctions/railDragEvent';\nimport { getRailTypeOfPlacedTile, checkIfPlacedTilesAllCorrect } from 'js/trackFunctions/trackParsing';\n\nimport MapAmbientBackground from 'js/components/MapAmbientBackground.jsx';\n\nexport const Map = (props) => {\n\tconst [ currentMapInfo, setCurrentMapInfo ] = useState([]);\n\tconst dragArray = useRef([ null, null, null ]);\n\tconst rightClickDragValue = useRef();\n\n\tconst currentHoverTile = useRef([ null, null ]);\n\tconst previousHoverTile = useRef();\n\n\t///////////// MAP - MOUSE EVENTS FUNCTIONS /////////////\n\n\tfunction leftClickEvent(mouseEventObject) {\n\t\tdragArray.current = [ null, null, mouseEventObject.tile ];\n\t}\n\n\tfunction rightClickEvent(mouseEventObject) {\n\t\tsetRightClickDragValue(mouseEventObject);\n\t\tdetermineRemoveOrPlaceX(mouseEventObject);\n\t}\n\n\tfunction bothClickEvent(mouseEventObject) {\n\t\tdetermineIfToPlaceT(mouseEventObject);\n\t}\n\n\tfunction setRightClickDragValue(mouseEventObject) {\n\t\tconst tileValue = getRailTypeOfPlacedTile(mouseEventObject.tile, props.placedTracks);\n\t\trightClickDragValue.current = tileValue === null ? 'X' : 'DELETE';\n\t}\n\n\tfunction determineRemoveOrPlaceX(mouseEventObject) {\n\t\tif (mouseEventObject.tileClass === 'mapTile') {\n\t\t\tif (getRailTypeOfPlacedTile(mouseEventObject.tile, props.placedTracks))\n\t\t\t\tremovePlacedTrack(mouseEventObject.tile);\n\t\t\telse placeTile(mouseEventObject.tile, rightClickDragValue.current);\n\t\t}\n\t}\n\n\tfunction leftReleaseEvent(mouseEventObject) {\n\t\tif (dragArray.current.filter((o) => o).length === 1 && mouseEventObject.tileClass === 'mapTile') {\n\t\t\tplaceTile(mouseEventObject.tile, mouseEventObject.railType);\n\t\t\tdragArray.current = [];\n\t\t}\n\t}\n\n\tfunction rightReleaseEvent() {\n\t\trightClickDragValue.current = undefined;\n\t}\n\n\tfunction checkIfHoverTileChanged(mouseEventObject) {\n\t\treturn !compareArrays(mouseEventObject.tile, currentHoverTile.current);\n\t}\n\n\tfunction updateHoverTileState(mouseEventObject) {\n\t\tpreviousHoverTile.current = currentHoverTile.current;\n\t\tcurrentHoverTile.current = mouseEventObject.tile;\n\t}\n\n\tfunction hoverStartEvent(mouseEventObject) {\n\t\tif (checkIfHoverTileChanged(mouseEventObject)) {\n\t\t\tupdateHoverTileState(mouseEventObject);\n\t\t\tif (mouseEventObject.mouseButton === 1 && checkIfHoverToAdjacent()) {\n\t\t\t\thoverWhileHoldingLeftMouseButton(mouseEventObject);\n\t\t\t}\n\t\t\tif (mouseEventObject.mouseButton === 2) {\n\t\t\t\thoverWhileHoldingRightMouseButton(mouseEventObject);\n\t\t\t}\n\t\t\tif (mouseEventObject.mouseButton === 3) {\n\t\t\t\thoverWhileHoldingBothMouseButtons(mouseEventObject);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction checkIfHoverToAdjacent() {\n\t\tlet hoverAdjacent = true;\n\t\tif (currentHoverTile.current[0] > previousHoverTile.current[0] + 1) hoverAdjacent = false;\n\t\tif (currentHoverTile.current[0] < previousHoverTile.current[0] - 1) hoverAdjacent = false;\n\t\tif (currentHoverTile.current[1] > previousHoverTile.current[1] + 1) hoverAdjacent = false;\n\t\tif (currentHoverTile.current[1] < previousHoverTile.current[1] - 1) hoverAdjacent = false;\n\t\treturn hoverAdjacent;\n\t}\n\n\tfunction hoverWhileHoldingLeftMouseButton(mouseEventObject) {\n\t\tif (isNonEmptyArray(dragArray.current)) {\n\t\t\tdragArray.current = shiftPushArray(dragArray.current, [ mouseEventObject.tile ]);\n\t\t\tconst draggedTilesToPlace = railDragEvent(dragArray.current, currentMapInfo);\n\t\t\tplaceMultipleTiles(draggedTilesToPlace);\n\t\t}\n\t}\n\n\tfunction hoverWhileHoldingRightMouseButton(mouseEventObject) {\n\t\tif (rightClickDragValue.current === 'X') {\n\t\t\tif (mouseEventObject.tileClass === 'mapTile') placeTile(mouseEventObject.tile, rightClickDragValue.current);\n\t\t} else if (rightClickDragValue.current === 'DELETE') removePlacedTrack(mouseEventObject.tile);\n\t}\n\n\tfunction hoverWhileHoldingBothMouseButtons(mouseEventObject) {\n\t\tdetermineIfToPlaceT(mouseEventObject);\n\t}\n\n\tfunction determineIfToPlaceT(mouseEventObject) {\n\t\tconst { tile, mouseButton, tileClass } = mouseEventObject;\n\t\tif (mouseButton === 3 && tileClass === 'mapTile') placeTile(tile, 'T');\n\t}\n\n\t///////////// MAP - TRACK PLACEMENT FUNCTIONS /////////////\n\n\tfunction placeTile(coordinate, value) {\n\t\tconst trackSquareInfo = {\n\t\t\ttile: coordinate,\n\t\t\trailType: value\n\t\t};\n\t\tplaceMultipleTiles([ trackSquareInfo ]);\n\t}\n\n\tasync function placeMultipleTiles(newTiles) {\n\t\tconst allTilesOnMap = getCombinedArrayOfNewAndOldTiles(newTiles, {\n\t\t\tmapTracks: props.trainTrackMap.tracks,\n\t\t\tplacedTracks: props.placedTracks\n\t\t});\n\t\tawait props.setPlacedTracks(allTilesOnMap);\n\t\tawait checkIfGameComplete();\n\t}\n\n\tasync function removePlacedTrack(trackCoordinates) {\n\t\tconst filteredTracks = props.placedTracks.filter(function(track) {\n\t\t\treturn !(track.tile[0] === trackCoordinates[0] && track.tile[1] === trackCoordinates[1]);\n\t\t});\n\t\tawait props.setPlacedTracks(filteredTracks);\n\t\tawait checkIfGameComplete();\n\t}\n\n\t///////////// ///////////// /////////////\n\n\tconst checkIfGameComplete = () => {\n\t\tconst placedTilesAllCorrect = checkIfPlacedTilesAllCorrect(props.trainTrackMap, props.placedTracks);\n\t\tif (placedTilesAllCorrect) props.setGameCompleteState(true);\n\t};\n\n\tuseEffect(\n\t\t() => {\n\t\t\tcheckIfGameComplete();\n\t\t},\n\t\t[ props.placedTracks ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tconst defaultTracks = props.trainTrackMap.tracks.filter((el) => el.defaultTrack);\n\t\t\tconst placedTracks = props.placedTracks.filter((el) => el.railType !== 'X');\n\t\t\tsetCurrentMapInfo({\n\t\t\t\ttracksOnMap: [ ...defaultTracks, ...placedTracks ],\n\t\t\t\taxisMax: { x: props.mapWidth, y: props.mapHeight }\n\t\t\t});\n\t\t},\n\t\t[ props.placedTracks ]\n\t);\n\n\t///////////// MAP - MOUSE EVENTS OBJECTS /////////////\n\n\tconst activeMouseEventsObject = {\n\t\tleftClickEvent: props.controlsActive ? leftClickEvent : () => null,\n\t\trightClickEvent: props.controlsActive ? rightClickEvent : () => null,\n\t\tbothClickEvent: props.controlsActive ? bothClickEvent : () => null,\n\t\tleftReleaseEvent: props.controlsActive ? leftReleaseEvent : () => null,\n\t\trightReleaseEvent: props.controlsActive ? rightReleaseEvent : () => null,\n\t\thoverStartEvent: props.controlsActive ? hoverStartEvent : () => null\n\t};\n\n\tconst emptyMouseEventsObject = {\n\t\tleftClickEvent: () => null,\n\t\trightClickEvent: () => null,\n\t\tbothClickEvent: () => null,\n\t\tleftReleaseEvent: () => null,\n\t\trightReleaseEvent: () => null,\n\t\thoverStartEvent: () => null,\n\t\tdragArray: null,\n\t\trightClickDragValue: null\n\t};\n\n\treturn (\n\t\t<div className=\"map\">\n\t\t\t<Board\n\t\t\t\t{...props}\n\t\t\t\tactiveMouseEventsObject={activeMouseEventsObject}\n\t\t\t\temptyMouseEventsObject={emptyMouseEventsObject}\n\t\t\t/>\n\t\t\t<MapAmbientBackground themeColor={props.themeColor} visualEffects={props.visualEffects} />\n\t\t</div>\n\t);\n};\n\nexport default Map;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { colorToWhiteArray } from 'js/utility/colorFunctions';\nimport { getWaveButtonStyles } from 'js/styles/waveButton';\n\nconst WaveButton = ({ className, onClick, text, bounceDelay = 200, clickDelay = 500 }) => {\n\tconst [ hovered, setHoveredState ] = useState(false);\n\tconst [ buttonPressed, setPressedState ] = useState(false);\n\tconst bounceTimer = useRef();\n\tconst clickTimer = useRef();\n\n\tconst { btnDefaultStyle, btnPressedStyle, rectangleStyle, textStyle, whiteBackground } = getWaveButtonStyles(\n\t\thovered\n\t);\n\n\tconst rectangleCount = 5;\n\tconst startRotation = 30;\n\tconst rotationOffset = 2;\n\tconst endRotation = -15 + rectangleCount * rotationOffset;\n\tconst startTransition = 1.5;\n\tconst endTransition = 3;\n\tconst transitionOffset = 0.1;\n\tconst cubicBezierFunction = 'cubic-bezier(0,1.84,0,.32)';\n\n\tconst rectangleArray = createRectangleArray(rectangleCount);\n\n\tfunction createRectangleArray(recCount) {\n\t\tlet rectangleArray = [];\n\t\tconst blueRecColors = colorToWhiteArray('#5bb1cd', recCount * 1.2);\n\t\tconst purpleRecColors = colorToWhiteArray('#800080', recCount * 1.2);\n\t\tfor (let i = 0; i < recCount; i++) {\n\t\t\tconst curRecStyle = {\n\t\t\t\tbackground: `linear-gradient(1turn,${blueRecColors[blueRecColors.length - i - 1]},${purpleRecColors[\n\t\t\t\t\tpurpleRecColors.length - i - 1\n\t\t\t\t]})`,\n\t\t\t\ttransform: hovered\n\t\t\t\t\t? `rotate(${endRotation + rotationOffset * i}deg) skewY(0deg)`\n\t\t\t\t\t: `rotate(${startRotation + rotationOffset * i}deg) skewY(45deg)`,\n\t\t\t\ttransition: hovered\n\t\t\t\t\t? `all ${startTransition + transitionOffset * i}s ${cubicBezierFunction}`\n\t\t\t\t\t: `all ${endTransition}s ${cubicBezierFunction}`\n\t\t\t};\n\t\t\trectangleArray.push(\n\t\t\t\t<div key={i} style={{ ...rectangleStyle, ...curRecStyle }} className=\"rectangle\" id={`rec${i}`} />\n\t\t\t);\n\t\t}\n\t\treturn rectangleArray;\n\t}\n\n\tconst btnStyle = buttonPressed ? { ...btnDefaultStyle, ...btnPressedStyle } : btnDefaultStyle;\n\n\treturn (\n\t\t<button\n\t\t\tstyle={btnStyle}\n\t\t\tclassName={className}\n\t\t\tonMouseOver={() => setHoveredState(true)}\n\t\t\tonMouseLeave={() => (!buttonPressed ? setHoveredState(false) : null)}\n\t\t\tonClick={() => {\n\t\t\t\tsetPressedState(true);\n\t\t\t\tbounceTimer.current = setTimeout(() => {\n\t\t\t\t\tsetPressedState(false);\n\t\t\t\t\treturn clearTimeout(bounceTimer.current);\n\t\t\t\t}, bounceDelay);\n\t\t\t\tclickTimer.current = setTimeout(() => {\n\t\t\t\t\tonClick();\n\t\t\t\t\treturn clearTimeout(clickTimer.current);\n\t\t\t\t}, clickDelay);\n\t\t\t}}\n\t\t>\n\t\t\t{rectangleArray}\n\t\t\t<div style={textStyle}>{text}</div>\n\t\t\t<div style={whiteBackground} />\n\t\t</button>\n\t);\n};\n\nexport default WaveButton;\n","export const getWaveButtonStyles = (hovered) => {\n\treturn {\n\t\tbtnDefaultStyle: {\n\t\t\tposition: 'relative',\n\t\t\toverflow: 'hidden',\n\t\t\tcursor: 'pointer',\n\t\t\tbackground: 'none',\n\t\t\tzIndex: '0',\n\t\t\tborderRadius: '1rem',\n\t\t\tborder: '1px #ccc solid',\n\t\t\toutline: 'none',\n\t\t\ttransition: '0.3s',\n\t\t\ttop: '0px',\n\t\t\tboxShadow: '0px 5px 0px 2px #eee'\n\t\t},\n\n\t\tbtnPressedStyle: {\n\t\t\ttransition: '0.1s',\n\t\t\ttop: '10px',\n\t\t\tboxShadow: 'none'\n\t\t},\n\n\t\trectangleStyle: {\n\t\t\ttop: '0%',\n\t\t\tleft: '-30%',\n\t\t\theight: '350%',\n\t\t\twidth: '70rem',\n\t\t\tposition: 'absolute',\n\t\t\tzIndex: '-1',\n\t\t\tborderRadius: '50rem'\n\t\t},\n\n\t\ttextStyle: {\n\t\t\tzIndex: '1',\n\t\t\tcolor: hovered ? 'white' : 'black',\n\t\t\ttransition: hovered ? 'color 1s cubic-bezier(0,2.53,.53,-1.51)' : `color 0s`\n\t\t},\n\n\t\twhiteBackground: {\n\t\t\tzIndex: '-2',\n\t\t\ttop: '0',\n\t\t\tleft: '0',\n\t\t\tposition: 'absolute',\n\t\t\theight: '100%',\n\t\t\twidth: '100%',\n\t\t\tbackgroundColor: 'white'\n\t\t}\n\t};\n};\n","import React, { useRef } from 'react';\nimport WaveButton from 'js/components/WaveButton';\nimport {\n\tfindIndexOfArrayInMatrix,\n\trandomArrayEntry,\n\tisNonEmptyArray,\n\tcompareArrays\n} from 'js/utility/utilityFunctions';\n\nexport const OptionsButtons = (props) => {\n\tconst {\n\t\tmapTracks,\n\t\tplacedTracks,\n\t\tsetGameWinState,\n\t\tsetPlacedTracks,\n\t\tsetDisplay,\n\t\tdisplay,\n\t\tseed,\n\t\tinGameNewMap,\n\t\tquitGame\n\t} = props;\n\tconst clipboard = useRef(null);\n\n\tconst getRandomNonPlacedTrack = (mapTracks, placedTracks) => {\n\t\tconst placedTracksArray = placedTracks.map((el) => el.tile);\n\t\tconst placedRailTypesArray = placedTracks.map((el) => el.railType);\n\t\tconst unplacedTracks = [ ...mapTracks ].filter((el) => {\n\t\t\tif (el.defaultTrack) return false;\n\t\t\tconst index = findIndexOfArrayInMatrix(el.tile, placedTracksArray);\n\t\t\tif (index === -1) return true;\n\t\t\treturn placedRailTypesArray[index] !== el.railType;\n\t\t});\n\t\tif (isNonEmptyArray(unplacedTracks)) return randomArrayEntry(unplacedTracks);\n\t\telse return null;\n\t};\n\n\tconst replaceOldTrackInArray = (newTrack, tracks) => {\n\t\tif (!newTrack) return tracks;\n\t\tconst filteredTracks = tracks.filter((el) => !compareArrays(newTrack.tile, el.tile));\n\t\treturn [ ...filteredTracks, newTrack ];\n\t};\n\n\treturn (\n\t\t<div className=\"inGameOptions\">\n\t\t\t<div className=\"topRowInGameButtons\">\n\t\t\t\t<WaveButton\n\t\t\t\t\tkey={'addHintTrackButton'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst randomTrack = getRandomNonPlacedTrack(mapTracks, placedTracks);\n\t\t\t\t\t\tconst newTrackArray = replaceOldTrackInArray(randomTrack, placedTracks);\n\t\t\t\t\t\tsetPlacedTracks(newTrackArray);\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'Add Hint Track'}\n\t\t\t\t\tclickDelay={50}\n\t\t\t\t/>\n\t\t\t\t<WaveButton\n\t\t\t\t\tkey={'highlightDefaultTilesBtn'}\n\t\t\t\t\tonClick={() => setDisplay({ ...display, defaultHighlights: !display.defaultHighlights })}\n\t\t\t\t\ttext={display.defaultHighlights ? 'Hide Default Tiles' : 'Show Default Tiles'}\n\t\t\t\t\tclickDelay={50}\n\t\t\t\t/>\n\t\t\t\t<WaveButton\n\t\t\t\t\tkey={'showMapSolutionBtn'}\n\t\t\t\t\tonClick={() => setDisplay({ ...display, solutionVisible: !display.solutionVisible })}\n\t\t\t\t\ttext={display.solutionVisible ? 'Hide Map Solution' : 'Show Map Solution'}\n\t\t\t\t\tclickDelay={200}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"bottomRowInGameButtons\">\n\t\t\t\t<WaveButton\n\t\t\t\t\tkey={'resetMapBtn'}\n\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\tsetGameWinState(false);\n\t\t\t\t\t\tsetPlacedTracks([]);\n\t\t\t\t\t\tsetDisplay({ ...display, winPopUp: false, solutionVisible: false });\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'Reset Map'}\n\t\t\t\t\tclickDelay={100}\n\t\t\t\t/>\n\t\t\t\t<WaveButton\n\t\t\t\t\tkey={'saveMapBtn'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetDisplay({ ...display, savePopUp: true, winPopUp: false });\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'Save Map'}\n\t\t\t\t\tclickDelay={100}\n\t\t\t\t/>\n\t\t\t\t<div className=\"mapSeedOptionContainer\">\n\t\t\t\t\t<WaveButton\n\t\t\t\t\t\tstyle={{ zIndex: '4' }}\n\t\t\t\t\t\tclassName=\"mapSeedBtn\"\n\t\t\t\t\t\tkey=\"mapSeedBtn\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tclipboard.current.select();\n\t\t\t\t\t\t\tdocument.execCommand('copy');\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttext={''}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"mapSeedExplanation\">\n\t\t\t\t\t\t<span>Copy map seed to clipboard</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tref={clipboard}\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t\tunselectable=\"on\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\topacity: 0,\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\theight: 0,\n\t\t\t\t\t\t\tresize: 'none',\n\t\t\t\t\t\t\tcursor: 'default'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvalue={seed}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<WaveButton\n\t\t\t\t\tkey={'newMapBtn'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetGameWinState(false);\n\t\t\t\t\t\tsetPlacedTracks([]);\n\t\t\t\t\t\tsetDisplay({ ...display, winPopUp: false, solutionVisible: false });\n\t\t\t\t\t\tinGameNewMap();\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'New Map'}\n\t\t\t\t\tclickDelay={200}\n\t\t\t\t/>\n\n\t\t\t\t<WaveButton key={'quitBtn'} onClick={() => quitGame()} text={'Quit Game'} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default OptionsButtons;\n","import { isNonEmptyArray } from 'js/utility/utilityFunctions';\n\nexport const saveMapToLocal = async (mapToSave) => {\n\tlet localMaps = JSON.parse(window.localStorage.getItem('savedMaps'));\n\tif (isNonEmptyArray(localMaps)) {\n\t\tconst newMapArray = [ ...localMaps, mapToSave ];\n\t\tawait window.localStorage.setItem('savedMaps', JSON.stringify(newMapArray));\n\t} else {\n\t\tawait window.localStorage.setItem('savedMaps', JSON.stringify([ mapToSave ]));\n\t}\n};\n\nexport const getLocalStorageMaps = () => {\n\tlet localMaps = JSON.parse(window.localStorage.getItem('savedMaps'));\n\tif (!isNonEmptyArray(localMaps)) localMaps = [];\n\treturn localMaps;\n};\n\nexport const deleteLocalSavedMap = async (deleteMapSeed) => {\n\tconst localMaps = getLocalStorageMaps();\n\tconst newMapArray = localMaps.filter((el) => el.seed !== deleteMapSeed);\n\tawait window.localStorage.setItem('savedMaps', JSON.stringify(newMapArray));\n};\n\nexport const deleteAllLocalSavedMaps = async () => {\n\tawait window.localStorage.setItem('savedMaps', JSON.stringify([]));\n};\n","import React, { useState } from 'react';\nimport { saveMapToLocal } from 'js/utility/localStorage';\nimport WaveButton from 'js/components/WaveButton';\n\nexport const SaveMapDisplay = (props) => {\n\tconst { display, setDisplay, gameState } = props;\n\tconst [ mapSaveName, setMapSaveName ] = useState(null);\n\treturn (\n\t\t<div key={'saveMapDisplay'} className=\"saveMapDisplay\" onContextMenu={(e) => e.preventDefault()}>\n\t\t\t<p>Enter a name to save map as:</p>\n\t\t\t<button\n\t\t\t\tkey={'closeSaveMapDisplay'}\n\t\t\t\tclassName={'closePopUpWindow'}\n\t\t\t\tonClick={() => setDisplay({ ...display, savePopUp: false })}\n\t\t\t>\n\t\t\t\tX\n\t\t\t</button>\n\t\t\t<input\n\t\t\t\tkey={'saveNameInputBox'}\n\t\t\t\tclassName={'saveNameInputBox'}\n\t\t\t\tonChange={(e) => setMapSaveName(e.target.value)}\n\t\t\t/>\n\t\t\t<WaveButton\n\t\t\t\tkey={'confirmSaveMapBtn'}\n\t\t\t\tclassName={'confirmSaveMapBtn'}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tsaveMapToLocal({ name: mapSaveName, ...gameState });\n\t\t\t\t\tsetMapSaveName(null);\n\t\t\t\t\tsetDisplay({ ...display, savePopUp: false });\n\t\t\t\t}}\n\t\t\t\ttext={'Save Map'}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default SaveMapDisplay;\n","import React from 'react';\nimport { randomIntFromInterval } from 'js/utility/utilityFunctions';\nimport { generateRandomRGBColor, colorToWhiteArray } from 'js/utility/colorFunctions';\n\nexport const WinDisplayBackground = (props) => {\n\tlet balloonContainer = [];\n\tconst colorSelected = props.themeColor.available[props.themeColor.selected];\n\tif (props.visualEffects) {\n\t\tconst balloonCount = 300;\n\t\tfor (let i = 0; i < balloonCount; i++) {\n\t\t\tconst color = generateRandomRGBColor();\n\t\t\tconst left = props.visualEffects ? randomIntFromInterval(-20, 100) : 50;\n\t\t\tconst delay = props.visualEffects ? randomIntFromInterval(0, 10000) : 0;\n\t\t\tconst balloonStyle = {\n\t\t\t\tleft: `${left}%`,\n\t\t\t\tbackgroundColor: color,\n\t\t\t\tcolor: color,\n\t\t\t\topacity: 0,\n\t\t\t\tanimationDelay: `${delay}ms`\n\t\t\t};\n\t\t\tballoonContainer.push(\n\t\t\t\t<div key={i} className=\"balloon\" style={balloonStyle}>\n\t\t\t\t\t<div key={`balloonString${i}`} className={'balloonString'}>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t} else {\n\t\tconst lightenedColor = colorToWhiteArray(colorSelected, 10)[8];\n\t\tballoonContainer.push(<div style={{ width: '100%', height: '100%', backgroundColor: lightenedColor }} />);\n\t}\n\treturn balloonContainer;\n};\n\nexport default WinDisplayBackground;\n","import React from 'react';\nimport 'css/balloon.css';\nimport WinDisplayBackground from 'js/components/WinDisplayBackground';\n\nexport const GameWinDisplay = (props) => {\n\tconst { display, setDisplay, visualEffects, themeColor } = props;\n\treturn (\n\t\t<div key={'gameWinDisplay'} className=\"winDisplay\" onContextMenu={(e) => e.preventDefault()}>\n\t\t\t<h2 key={'winText'} className=\"winText\">\n\t\t\t\tYou Win!\n\t\t\t</h2>\n\t\t\t<button\n\t\t\t\tkey={'closeWinDisplay'}\n\t\t\t\tclassName={'closePopUpWindow'}\n\t\t\t\tonClick={() => setDisplay({ ...display, winPopUp: false })}\n\t\t\t>\n\t\t\t\tX\n\t\t\t</button>\n\t\t\t<div key={'balloonContainer'} className={'balloonContainer'}>\n\t\t\t\t<WinDisplayBackground visualEffects={visualEffects} themeColor={themeColor} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default GameWinDisplay;\n","import curvedtrack from 'img/curvedtrack.png';\nimport straighttrack from 'img/straighttrack.png';\nimport { convertRemToPx } from 'js/utility/utilityFunctions';\n\nexport const generateMapIcon = async (mapObject, complete) => {\n\tconst options = {\n\t\theaders: true,\n\t\tcomplete,\n\t\tdimensions: 250,\n\t\tcutOut: false\n\t};\n\tconst canvas = await generateCanvas(mapObject, options);\n\tconst image = canvas.toDataURL('image/png');\n\treturn image;\n};\n\nexport const generateMapBackground = async (mapObject, remSize) => {\n\tconst options = {\n\t\theaders: false,\n\t\tcomplete: false,\n\t\tdimensions: convertRemToPx(remSize) * mapObject.headerLabels.x.length,\n\t\tcutOut: true\n\t};\n\tconst canvas = await generateCanvas(mapObject, options);\n\tconst image = canvas.toDataURL('image/png');\n\treturn image;\n};\n\nconst getRotationFromRailType = (railType) => {\n\tlet rotation;\n\tswitch (railType) {\n\t\tcase 'horizontal':\n\t\t\trotation = 90;\n\t\t\tbreak;\n\t\tcase 'topLeftCorner':\n\t\t\trotation = 90;\n\t\t\tbreak;\n\t\tcase 'topRightCorner':\n\t\t\trotation = 180;\n\t\t\tbreak;\n\t\tcase 'bottomRightCorner':\n\t\t\trotation = 270;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\trotation = 0;\n\t}\n\treturn rotation;\n};\n\nconst getTrackImages = async () => {\n\treturn await Promise.all([ loadImage(straighttrack), loadImage(curvedtrack) ]);\n};\n\nconst generateCanvasObject = async (mapObject, options) => {\n\tlet canvas = document.createElement('canvas');\n\tlet context = canvas.getContext('2d');\n\n\tcanvas.width = options.dimensions;\n\tcanvas.height = options.dimensions;\n\n\tconst mapWidth = mapObject.headerLabels.x.length;\n\tconst mapHeight = mapObject.headerLabels.y.length;\n\tconst gridMapWidth = mapWidth + options.headers;\n\tconst gridMapHeight = mapHeight + options.headers;\n\tconst iconTileWidth = canvas.width / gridMapWidth;\n\tconst iconTileHeight = canvas.height / gridMapHeight;\n\tconst [ straightTrackImage, curvedTrackImage ] = await getTrackImages();\n\n\treturn {\n\t\tcanvas,\n\t\tcontext,\n\t\ticonTile: {\n\t\t\twidth: iconTileWidth,\n\t\t\theight: iconTileHeight\n\t\t},\n\t\tmap: {\n\t\t\twidth: mapWidth,\n\t\t\theight: mapHeight\n\t\t},\n\t\tgridMap: {\n\t\t\twidth: gridMapWidth,\n\t\t\theight: gridMapHeight\n\t\t},\n\t\ttrackImage: {\n\t\t\tstraight: straightTrackImage,\n\t\t\tcurved: curvedTrackImage\n\t\t},\n\t\toptions\n\t};\n};\n\nconst generateCanvas = async (mapObject, options) => {\n\tlet canvasObj = await generateCanvasObject(mapObject, options);\n\tcanvasObj.context = drawWhiteBackground(canvasObj);\n\tcanvasObj.context = drawAllTracks(mapObject, canvasObj);\n\tcanvasObj.context = drawGrid(mapObject, canvasObj);\n\tif (options.cutOut) canvasObj.context = cutOutBackgroundBox(canvasObj);\n\n\treturn canvasObj.canvas;\n};\n\nconst loadImage = (imgURL) => {\n\treturn new Promise((resolve, reject) => {\n\t\tlet img = new Image();\n\t\timg.onload = () => resolve(img);\n\t\timg.onerror = reject;\n\t\timg.src = imgURL;\n\t});\n};\n\nconst drawRotatedImage = (el, canvasObj) => {\n\tconst { context, options } = canvasObj;\n\tconst { width, height } = canvasObj.iconTile;\n\tconst { straight, curved } = canvasObj.trackImage;\n\tlet rotation = getRotationFromRailType(el.railType);\n\tcontext.save();\n\tcontext.translate(el.tile[0] * width + width / 2, (el.tile[1] + options.headers) * height + height / 2);\n\tcontext.rotate(rotation * (Math.PI / 180));\n\tcontext.drawImage(\n\t\tel.railType === 'vertical' || el.railType === 'horizontal' ? straight : curved,\n\t\t-width / 2,\n\t\t-height / 2,\n\t\twidth,\n\t\theight\n\t);\n\tcontext.restore();\n\treturn context;\n};\n\nconst drawStraightImage = (el, canvasObj) => {\n\tconst { context, options } = canvasObj;\n\tconst { width, height } = canvasObj.iconTile;\n\tconst { straight, curved } = canvasObj.trackImage;\n\tcontext.drawImage(\n\t\tel.railType === 'vertical' || el.railType === 'horizontal' ? straight : curved,\n\t\tel.tile[0] * width,\n\t\t(el.tile[1] + options.headers) * height,\n\t\twidth,\n\t\theight\n\t);\n\treturn context;\n};\n\nconst drawWhiteBackground = (canvasObj) => {\n\tconst { canvas, context } = canvasObj;\n\tcontext.fillStyle = 'white';\n\tcontext.fillRect(0, 0, canvas.width, canvas.height);\n\treturn context;\n};\n\nconst drawAllTracks = (mapObject, canvasObj) => {\n\tlet { options, context } = canvasObj;\n\tmapObject.tracks.forEach((el) => {\n\t\tif (options.complete || el.defaultTrack) {\n\t\t\tif (\n\t\t\t\tel.railType === 'horizontal' ||\n\t\t\t\tel.railType === 'topLeftCorner' ||\n\t\t\t\tel.railType === 'topRightCorner' ||\n\t\t\t\tel.railType === 'bottomRightCorner'\n\t\t\t) {\n\t\t\t\tcontext = drawRotatedImage(el, canvasObj);\n\t\t\t} else {\n\t\t\t\tcontext = drawStraightImage(el, canvasObj);\n\t\t\t}\n\t\t}\n\t});\n\treturn context;\n};\n\nfunction drawGrid(mapObject, canvasObj) {\n\tlet { context, gridMap, iconTile, options, map } = canvasObj;\n\tfor (let i = 0; i < gridMap.width * gridMap.height; i++) {\n\t\tlet x = i % gridMap.width;\n\t\tlet y = Math.floor(i / gridMap.height);\n\t\tif (options.headers && (x === map.width || y === 0)) {\n\t\t\tconst drawObj = {\n\t\t\t\ttile: { x, y },\n\t\t\t\tmapObject\n\t\t\t};\n\t\t\tcontext = drawHeaderBox(drawObj, canvasObj);\n\t\t}\n\t\tcontext.fillStyle = 'black';\n\t\tcontext.strokeRect(x * iconTile.width, y * iconTile.height, iconTile.width, iconTile.height);\n\t}\n\treturn context;\n}\n\nfunction drawHeaderBox(drawObj, canvasObj) {\n\tlet context = canvasObj.context;\n\tlet mapWidth = canvasObj.map.width;\n\tconst { x, y } = drawObj.tile;\n\tcontext = drawHeaderBoxBackground(drawObj.tile, canvasObj);\n\tif ((y === 0 && x !== mapWidth) || (x === mapWidth && y !== 0)) context = drawHeaderBoxText(drawObj, canvasObj);\n\treturn context;\n}\n\nfunction drawHeaderBoxBackground(tile, canvasObj) {\n\tlet { context, iconTile } = canvasObj;\n\tconst { x, y } = tile;\n\tcontext.fillStyle = '#FFE4B5';\n\tcontext.fillRect(x * iconTile.width, y * iconTile.height, iconTile.width, iconTile.height);\n\treturn context;\n}\n\nfunction drawHeaderBoxText(drawObj, canvasObj) {\n\tlet { context, iconTile } = canvasObj;\n\tconst { x, y } = drawObj.tile;\n\tcontext.fillStyle = 'black';\n\tcontext.font = '1.5rem Georgia';\n\tcontext.textAlign = 'center';\n\tcontext.textBaseline = 'middle';\n\tcontext.fillText(getHeaderBoxText(drawObj, canvasObj), (x + 0.5) * iconTile.width, (y + 0.5) * iconTile.height);\n\treturn context;\n}\n\nfunction getHeaderBoxText(drawObj, canvasObj) {\n\tconst mapWidth = canvasObj.map.width;\n\tconst mapObject = drawObj.mapObject;\n\tconst { x, y } = drawObj.tile;\n\tlet headerText = 'ERROR';\n\tif (y === 0 && x !== mapWidth) headerText = mapObject.headerLabels.x[x];\n\tif (x === mapWidth && y !== 0) headerText = mapObject.headerLabels.y[y - 1];\n\treturn headerText;\n}\n\nfunction cutOutBackgroundBox(canvasObj) {\n\tlet { context, iconTile, map } = canvasObj;\n\tconst boxWidth = 250;\n\tconst boxHeight = 150;\n\tcontext.clearRect(\n\t\t(map.width + 1) * iconTile.width / 2 - boxWidth / 2,\n\t\t(map.height - 1) * iconTile.height / 2 - boxHeight / 2,\n\t\tboxWidth,\n\t\tboxHeight\n\t);\n\tcontext.strokeRect(\n\t\t(map.width + 1) * iconTile.width / 2 - boxWidth / 2,\n\t\t(map.height - 1) * iconTile.height / 2 - boxHeight / 2,\n\t\tboxWidth,\n\t\tboxHeight\n\t);\n\treturn context;\n}\n","export const getGameMapContainerStyle = (mapSize, tileRemSize) => {\n\treturn {\n\t\tdisplay: 'inline-block',\n\t\tposition: 'relative',\n\t\tzIndex: '0',\n\t\tmarginBottom: '1rem',\n\t\tWebkitUserSelect: 'none',\n\t\tMozUserSelect: 'none',\n\t\tmsUserSelect: 'none',\n\t\tuserSelect: 'none',\n\t\tboxSizing: 'border-box',\n\t\tposition: 'relative',\n\t\twidth: `${(mapSize + 1) * tileRemSize}rem`,\n\t\theight: `${(mapSize + 1) * tileRemSize}rem`\n\t};\n};\n","import React, { useEffect, useState } from 'react';\nimport 'css/game.css';\n\nimport Map from 'js/components/Map';\nimport OptionsButtons from 'js/components/OptionsButtons';\nimport SaveMapDisplay from 'js/components/SaveMapDisplay';\nimport GameWinDisplay from 'js/components/GameWinDisplay';\n\nimport { generateMapBackground } from 'js/generation/icon/generateMapIcon';\nimport { getGameMapContainerStyle } from 'js/styles/game';\n\nexport const Game = (props) => {\n\tconst [ gameWon, setGameWinState ] = useState(false);\n\tconst [ placedTracks, setPlacedTracks ] = useState([]);\n\n\tconst [ display, setDisplay ] = useState({\n\t\twinPopUp: false,\n\t\tsavePopUp: false,\n\t\tsaveBoxCutOut: null,\n\t\tdefaultHighlights: false,\n\t\tsolutionVisible: false\n\t});\n\n\tuseEffect(\n\t\t() => {\n\t\t\tasync function addCutOutToScreen() {\n\t\t\t\tif (display.savePopUp) {\n\t\t\t\t\tsetDisplay({\n\t\t\t\t\t\t...display,\n\t\t\t\t\t\tsaveBoxCutOut: await generateMapBackground(props.gameState.mapObject, props.tileRemSize)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsetDisplay({ ...display, saveBoxCutOut: null });\n\t\t\t\t}\n\t\t\t}\n\t\t\taddCutOutToScreen();\n\t\t},\n\t\t[ display.savePopUp ]\n\t);\n\n\treturn (\n\t\t<div>\n\t\t\t<div style={getGameMapContainerStyle(props.gameState.size, props.tileRemSize)}>\n\t\t\t\t{display.winPopUp && (\n\t\t\t\t\t<GameWinDisplay\n\t\t\t\t\t\tdisplay={display}\n\t\t\t\t\t\tsetDisplay={setDisplay}\n\t\t\t\t\t\tvisualEffects={props.visualEffects}\n\t\t\t\t\t\tthemeColor={props.themeColor}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{display.savePopUp && (\n\t\t\t\t\t<SaveMapDisplay display={display} setDisplay={setDisplay} gameState={props.gameState} />\n\t\t\t\t)}\n\t\t\t\t<Map\n\t\t\t\t\tkey={props.mapSeed}\n\t\t\t\t\tclassName=\"gameMap\"\n\t\t\t\t\ttileRemSize={props.tileRemSize}\n\t\t\t\t\tdefaultTilesHighlighted={display.defaultHighlights}\n\t\t\t\t\tmapSolutionVisible={display.solutionVisible}\n\t\t\t\t\ttrainTrackMap={props.gameState.mapObject}\n\t\t\t\t\tmapHeight={props.gameState.size}\n\t\t\t\t\tmapWidth={props.gameState.size}\n\t\t\t\t\tsetGameCompleteState={(val) => {\n\t\t\t\t\t\tsetGameWinState(val);\n\t\t\t\t\t\tsetDisplay({ ...display, winPopUp: val });\n\t\t\t\t\t}}\n\t\t\t\t\tgameComplete={gameWon}\n\t\t\t\t\tcontrolsActive={!display.savePopUp}\n\t\t\t\t\tmapVisible={!display.saveBoxCutOut}\n\t\t\t\t\tsetPlacedTracks={(val) => setPlacedTracks(val)}\n\t\t\t\t\tplacedTracks={placedTracks}\n\t\t\t\t\trailImages={props.railImages}\n\t\t\t\t\tthemeColor={props.themeColor}\n\t\t\t\t\tvisualEffects={props.visualEffects}\n\t\t\t\t/>\n\t\t\t\t<img\n\t\t\t\t\talt=\"\"\n\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\tsrc={display.saveBoxCutOut}\n\t\t\t\t\tclassName=\"saveBoxMapCutout\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: `${props.tileRemSize}rem`,\n\t\t\t\t\t\tleft: '0px',\n\t\t\t\t\t\tborder: display.saveBoxCutOut ? '1px solid black' : 'none'\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<OptionsButtons\n\t\t\t\tsetGameWinState={setGameWinState}\n\t\t\t\tplacedTracks={placedTracks}\n\t\t\t\tsetPlacedTracks={setPlacedTracks}\n\t\t\t\tsetDisplay={setDisplay}\n\t\t\t\tmapTracks={props.gameState.mapObject.tracks}\n\t\t\t\tdisplay={display}\n\t\t\t\tseed={props.gameState.seed}\n\t\t\t\tinGameNewMap={props.inGameNewMap}\n\t\t\t\tquitGame={props.quitGame}\n\t\t\t\tvisualEffects={props.visualEffects}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default Game;\n","import React, { useEffect, useState } from 'react';\n\nconst Dropdown = ({ style, placeholder, options, onChange, onHover, className }) => {\n\tconst [ listOpen, setListOpen ] = useState(false);\n\tconst [ defaultValue, setDefaultValue ] = useState(placeholder);\n\tconst [ hoveredOption, setHoveredOption ] = useState(null);\n\n\tconst containerStyle = {\n\t\tbackground: '#fff',\n\t\tborder: '1px #aaa solid',\n\t\tlineHeight: style.height,\n\t\t...style,\n\t\tposition: 'relative',\n\t\tWebkitUserSelect: 'none',\n\t\tMozUserSelect: 'none',\n\t\tmsUserSelect: 'none',\n\t\tuserSelect: 'none',\n\t\tborderRadius: listOpen ? '1rem 1rem 0 0' : '1rem',\n\t\tboxShadow: '0px 5px 0px 2px #eee',\n\t\tcursor: 'pointer'\n\t};\n\n\tconst listItemStyle = {\n\t\t...containerStyle,\n\t\tborderTop: 'none'\n\t};\n\n\tconst renderDropDownList = (options) => {\n\t\tlet dropDownList = [];\n\t\toptions.forEach((item, i) => {\n\t\t\tdropDownList.push(\n\t\t\t\t<div\n\t\t\t\t\tclassName={'dropdown'}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\t...listItemStyle,\n\t\t\t\t\t\tbackground: hoveredOption === i ? '#9999FF' : '#fff',\n\t\t\t\t\t\tcolor: hoveredOption === i ? 'white' : 'black',\n\t\t\t\t\t\tborderRadius: i === options.length - 1 ? '0 0 1rem 1rem' : '0'\n\t\t\t\t\t}}\n\t\t\t\t\tkey={`dropdownOption${i}`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\toptionSelected(item);\n\t\t\t\t\t\tsetDefaultValue(item.display);\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\toptionHovered(item.mapObject);\n\t\t\t\t\t\tsetHoveredOption(i);\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseLeave={() => {\n\t\t\t\t\t\toptionHovered(null);\n\t\t\t\t\t\tsetHoveredOption(null);\n\t\t\t\t\t}}\n\t\t\t\t\tonContextMenu={(e) => e.preventDefault()}\n\t\t\t\t>\n\t\t\t\t\t{item.display}\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\t\treturn dropDownList;\n\t};\n\n\tconst renderDropdownArrow = () => {\n\t\tconst arrowStyling = { fontSize: '0.75rem', position: 'absolute', right: '5%' };\n\t\treturn <span style={arrowStyling}></span>;\n\t};\n\n\tuseEffect(() => {\n\t\tif (listOpen) {\n\t\t\tdocument.addEventListener('mousedown', whileDropdownOpenClick);\n\t\t} else {\n\t\t\tdocument.removeEventListener('mousedown', whileDropdownOpenClick);\n\t\t}\n\t\treturn () => document.removeEventListener('mousedown', whileDropdownOpenClick);\n\t});\n\n\tconst whileDropdownOpenClick = (e) => {\n\t\tif (e.target.className === 'dropdown') {\n\t\t\treturn;\n\t\t}\n\t\tsetListOpen(false);\n\t\tonHover(false);\n\t};\n\n\tconst optionSelected = (item, mapObject) => {\n\t\tonChange(item, mapObject);\n\t\tsetListOpen(false);\n\t};\n\n\tconst optionHovered = (item) => {\n\t\tonHover(item);\n\t};\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t<div\n\t\t\t\tclassName={'dropdown'}\n\t\t\t\tstyle={{ ...containerStyle, backgroundColor: '#fff' }}\n\t\t\t\tonMouseDown={(e) => {\n\t\t\t\t\tif (e.buttons === 1) setListOpen(!listOpen);\n\t\t\t\t}}\n\t\t\t\tonContextMenu={(e) => e.preventDefault()}\n\t\t\t>\n\t\t\t\t{defaultValue}\n\t\t\t\t{renderDropdownArrow()}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tposition: 'absolute'\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{listOpen ? renderDropDownList(options) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Dropdown;\n","import React from 'react';\nimport 'css/confirmDeleteScreen.css';\nimport WaveButton from 'js/components/WaveButton';\nimport { deleteLocalSavedMap, deleteAllLocalSavedMaps } from 'js/utility/localStorage';\n\nexport const DeleteMapConfirmScreen = (props) => {\n\treturn (\n\t\t<div className=\"deleteConfirmScreen\">\n\t\t\t<h3 className=\"deleteConfirmLabel\">\n\t\t\t\tAre you sure you want to delete {props.deleteModeOnAll ? 'ALL saved maps?' : 'the following saved map?'}\n\t\t\t</h3>\n\t\t\t<img\n\t\t\t\talt=\"\"\n\t\t\t\tsrc={props.deleteModeOnAll ? null : props.mapIcon}\n\t\t\t\tstyle={{ display: props.deleteModeOnAll ? 'none' : 'block' }}\n\t\t\t\tclassName=\"confirmDeleteIcon\"\n\t\t\t/>\n\t\t\t<div className=\"deleteButtons\">\n\t\t\t\t<WaveButton\n\t\t\t\t\tclassName=\"confirmDeleteBtn\"\n\t\t\t\t\tkey={'confirmDeleteBtn'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (props.deleteModeOnAll) deleteAllLocalSavedMaps();\n\t\t\t\t\t\telse deleteLocalSavedMap(props.gameState.seed);\n\t\t\t\t\t\tprops.quitToLoadScreen();\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'Confirm'}\n\t\t\t\t/>\n\t\t\t\t<WaveButton\n\t\t\t\t\tclassName=\"cancelDeleteBtn\"\n\t\t\t\t\tkey={'cancelDeleteBtn'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tprops.quitToLoadScreen();\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'Cancel'}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default DeleteMapConfirmScreen;\n","import React from 'react';\nimport WaveButton from 'js/components/WaveButton';\n\nexport const ReturnToMainMenuBtn = (props) => {\n\treturn (\n\t\t<WaveButton\n\t\t\tclassName=\"returnToMainMenuBtn\"\n\t\t\tkey={'returnToMainMenuBtn'}\n\t\t\tonClick={() => {\n\t\t\t\tprops.setCurrentScreen('mainMenu');\n\t\t\t}}\n\t\t\ttext={'Return To Main Menu'}\n\t\t/>\n\t);\n};\n\nexport default ReturnToMainMenuBtn;\n","import React, { useState } from 'react';\nimport WaveButton from 'js/components/WaveButton';\nimport Dropdown from 'js/components/Dropdown';\nimport DeleteMapConfirmScreen from 'js/screen/deleteMapConfirmScreen.jsx';\nimport { generateMapIcon } from 'js/generation/icon/generateMapIcon';\nimport ReturnToMainMenuBtn from 'js/components/ReturnToMainMenuBtn.jsx';\n\nimport { getLocalStorageMaps } from 'js/utility/localStorage';\n\nfunction renderSavedMapsDropdownValues() {\n\tconst localMaps = getLocalStorageMaps();\n\tlet dropDownValues = [];\n\tlocalMaps.forEach(async (el) => {\n\t\tdropDownValues.push({\n\t\t\tdisplay: el.name,\n\t\t\tseed: el.seed,\n\t\t\tsize: el.size,\n\t\t\tmapObject: el.mapObject\n\t\t});\n\t});\n\n\treturn dropDownValues;\n}\n\nexport const LoadMapScreen = (props) => {\n\tconst [ screenState, setScreenState ] = useState('load');\n\tconst [ mapIcon, setMapIcon ] = useState(null);\n\n\tasync function displaySavedGameMapIcon(mapObject) {\n\t\tsetMapIcon(mapObject ? await generateMapIcon(mapObject, false) : null);\n\t}\n\n\tif (screenState === 'load') {\n\t\treturn (\n\t\t\t<div className=\"menu loadMapScreen\">\n\t\t\t\t<Dropdown\n\t\t\t\t\tclassName=\"loadMapDropdown\"\n\t\t\t\t\tstyle={{ width: '12rem', height: '2rem' }}\n\t\t\t\t\tplaceholder={'Select a map'}\n\t\t\t\t\toptions={renderSavedMapsDropdownValues()}\n\t\t\t\t\tonChange={(item) => {\n\t\t\t\t\t\tconst { display, ...mapObject } = item;\n\t\t\t\t\t\tprops.setGameState({ ...props.gameState, ...mapObject });\n\t\t\t\t\t}}\n\t\t\t\t\tonHover={(mapObject) => {\n\t\t\t\t\t\tif (mapObject !== null) displaySavedGameMapIcon(mapObject);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<img\n\t\t\t\t\talt=\"\"\n\t\t\t\t\tsrc={mapIcon}\n\t\t\t\t\tclassName=\"mapIcon\"\n\t\t\t\t\tstyle={{ border: mapIcon ? '0.15rem #aaa solid' : 'none' }}\n\t\t\t\t/>\n\n\t\t\t\t<WaveButton\n\t\t\t\t\tclassName=\"loadSaveMapBtn\"\n\t\t\t\t\tkey={'loadSaveMapBtn'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (props.gameState.mapObject) props.setGameState({ ...props.gameState, active: true });\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'Load Map'}\n\t\t\t\t/>\n\t\t\t\t<WaveButton\n\t\t\t\t\tclassName=\"deleteSaveMapBtn\"\n\t\t\t\t\tkey={'deleteSaveMapBtn'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (mapIcon) setScreenState('deleteOne');\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'Delete Map'}\n\t\t\t\t/>\n\t\t\t\t<WaveButton\n\t\t\t\t\tclassName=\"deleteAllSavedMapsBtn\"\n\t\t\t\t\tkey={'deleteAllSavedMapsBtn'}\n\t\t\t\t\tonClick={() => setScreenState('deleteAll')}\n\t\t\t\t\ttext={'Delete All Maps'}\n\t\t\t\t/>\n\t\t\t\t<ReturnToMainMenuBtn {...props} />\n\t\t\t</div>\n\t\t);\n\t} else {\n\t\tconst deleteModeOnAll = screenState === 'deleteOne' ? false : true;\n\t\treturn (\n\t\t\t<DeleteMapConfirmScreen\n\t\t\t\t{...props}\n\t\t\t\tmapIcon={mapIcon}\n\t\t\t\tdeleteModeOnAll={deleteModeOnAll}\n\t\t\t\tquitToLoadScreen={() => {\n\t\t\t\t\tsetMapIcon(null);\n\t\t\t\t\tsetScreenState('load');\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t}\n};\n\nexport default LoadMapScreen;\n","import { removeArraysFromMatrix } from 'js/utility/utilityFunctions.js';\n\nexport const getLegalMoves = (coordinate, genMap) => {\n\tconst adjacentMoves = getAdjacentTiles(coordinate);\n\tlet legalMoves = removeOutOfBoundsMoves(adjacentMoves, genMap.parameters);\n\tlegalMoves = removeMovesToVisitedTiles(legalMoves, genMap.tiles);\n\treturn legalMoves;\n};\n\nexport const removeOutOfBoundsMoves = (moves, parameters) => {\n\tconst { mapWidth, mapHeight } = parameters;\n\treturn moves.filter((el) => el[0] >= 0 && el[1] >= 0 && el[0] < mapWidth && el[1] < mapHeight);\n};\n\nexport const removeMovesToVisitedTiles = (moves, tiles) => {\n\treturn removeArraysFromMatrix(tiles, moves);\n};\n\nexport const getAdjacentTiles = (coordinate) => {\n\treturn Array(4).fill(coordinate).map((el, i) => [ el[0] + (i - 1) % 2, el[1] + (i - 2) % 2 ]);\n};\n","import { getLegalMoves } from 'js/generation/map/genericGenMapFunctions.js';\nimport { removeDuplicateArraysFromMatrix, checkIfArrayIsInMatrix } from 'js/utility/utilityFunctions.js';\n\nexport const checkIfPossibleToReachTargetIterative = (move, genMap) => {\n\tconst { mapWidth, mapHeight } = genMap.parameters;\n\tlet tiles = [ ...genMap.tiles ];\n\tlet currentMoves = [ move ]; // convert array to matrix of length 1\n\tfor (let i = 0; i < mapWidth * mapHeight; i++) {\n\t\tlet legalMoves = currentMoves.map((el) => {\n\t\t\treturn getLegalMoves(el, { ...genMap, tiles });\n\t\t});\n\t\tlegalMoves = [].concat.apply([], legalMoves);\n\t\tcurrentMoves.forEach((move) => tiles.push(move));\n\t\tcurrentMoves = [];\n\t\tif (legalMoves.length === 0) break;\n\t\tlegalMoves = removeDuplicateArraysFromMatrix(legalMoves);\n\t\tlegalMoves.forEach((move) => currentMoves.push(move));\n\t}\n\tconst possible = checkIfArrayIsInMatrix(genMap.end, tiles);\n\treturn possible;\n};\n","import {\n\trandomIntFromInterval,\n\tfindIndexOfArrayInMatrix,\n\tremoveDuplicateArraysFromMatrix,\n\tremoveArraysFromMatrix,\n\tfindCommonArraysOfAllMatrices,\n\thalveArray,\n\tshuffleArray\n} from 'js/utility/utilityFunctions';\nimport { getAdjacentTiles } from 'js/generation/map/genericGenMapFunctions';\n\n// Definitive indices are required for a single solution without trial and error\nexport const generateDefaultTileIndices = (allTiles, parameters) => {\n\tconst definitiveIndices = getAllTwoByTwoDefaultIndices(allTiles, parameters);\n\tconst mapInfo = { mapLength: allTiles.length, difficulty: parameters.difficulty };\n\tconst optionalIndices = modifyDefinitiveIndices(definitiveIndices, mapInfo);\n\tconst mandatoryIndices = getStartAndEndIndices(allTiles);\n\treturn [ ...new Set([ ...optionalIndices, ...mandatoryIndices ]) ];\n};\n\nconst modifyDefinitiveIndices = (definitiveIndices, mapInfo) => {\n\tconst { mapLength, difficulty } = mapInfo;\n\tconst helperIndices = getHelperIndices(definitiveIndices, mapLength);\n\tif (difficulty === 1) return [ ...definitiveIndices, ...helperIndices ];\n\tif (difficulty === 2) return [ ...definitiveIndices, ...halveArray(helperIndices) ];\n\tif (difficulty === 3) return definitiveIndices;\n\tif (difficulty === 4) return halveArray(definitiveIndices);\n\tif (difficulty === 5) return [];\n};\n\nconst getHelperIndices = (indices, mapLength) => {\n\tconst all = [ ...Array(mapLength).keys() ];\n\tconst possible = all.filter((el) => indices.indexOf(el) === -1);\n\tconst shuffled = shuffleArray(possible);\n\treturn halveArray(shuffled);\n};\n\nfunction getStartAndEndIndices(allTiles) {\n\treturn [ 0, allTiles.length - 1 ];\n}\n\nfunction getAllTwoByTwoDefaultIndices(allTiles, parameters) {\n\tlet defaultCoordinates = iterateThroughEachPossibleSquare(allTiles, parameters);\n\tdefaultCoordinates = removeDefaultTilesWithMoreThanOneAdjacent(defaultCoordinates);\n\tconst defaultIndices = defaultCoordinates.map((el) => findIndexOfArrayInMatrix(el, allTiles));\n\treturn [ ...new Set(defaultIndices) ];\n}\nfunction iterateThroughEachPossibleSquare(allTiles, parameters) {\n\tlet nonDefaultTrackTiles = allTiles;\n\tlet defaultCoordinates = [];\n\tfor (let y = 0; y < 2; y++) {\n\t\tfor (let x = 0; x < 2; x++) {\n\t\t\tconst offset = { x, y };\n\t\t\tconst coordinates = getSquareDefaultCoordinates(nonDefaultTrackTiles, offset, parameters);\n\t\t\tdefaultCoordinates.push(coordinates);\n\t\t\tnonDefaultTrackTiles = removeArraysFromMatrix(coordinates, allTiles);\n\t\t}\n\t}\n\treturn [].concat(...defaultCoordinates);\n}\n\nfunction removeDefaultTilesWithMoreThanOneAdjacent(defaultCoordinates) {\n\tlet currentDefaultTiles = [ ...defaultCoordinates ];\n\treturn defaultCoordinates.filter(function(tile) {\n\t\tconst adjDefTileCount = getAdjacentDefaultTileCount(tile, currentDefaultTiles);\n\t\tconst moreThanOneAdj = adjDefTileCount > 1;\n\t\tif (moreThanOneAdj) currentDefaultTiles = removeArraysFromMatrix([ tile ], currentDefaultTiles);\n\t\treturn !moreThanOneAdj;\n\t});\n}\n\nfunction getAdjacentDefaultTileCount(tile, currentDefaultTiles) {\n\tconst adjTiles = getAdjacentTiles(tile);\n\tconst nonDefTiles = removeArraysFromMatrix(currentDefaultTiles, adjTiles);\n\treturn 4 - nonDefTiles.length;\n}\n\nfunction getSquareDefaultCoordinates(nonDefaultTrackTiles, offset, parameters) {\n\tconst squares = splitMapIntoSquares(offset, parameters);\n\tconst fullSquares = filterForFullSquares(nonDefaultTrackTiles, squares);\n\tconst defaultCoordinates = getRandomNonDuplicateCoordinatesFromMatrix(fullSquares);\n\treturn defaultCoordinates;\n}\n\nfunction getRandomNonDuplicateCoordinatesFromMatrix(matrix) {\n\tconst coordinates = matrix.map((el) => el[randomIntFromInterval(0, el.length - 1)]);\n\treturn removeDuplicateArraysFromMatrix(coordinates);\n}\n\nfunction filterForFullSquares(allTiles, squares) {\n\treturn squares.filter((square) => checkIfSquareIsFull(square, allTiles));\n}\n\nfunction checkIfSquareIsFull(square, allTiles) {\n\treturn findCommonArraysOfAllMatrices([ square, allTiles ]).length === 4;\n}\n\nfunction splitMapIntoSquares(offset, parameters) {\n\tconst { mapWidth, mapHeight } = parameters;\n\tlet squares = [];\n\tfor (let y = offset.y; y < mapHeight - 1 - offset.y; y += 2) {\n\t\tfor (let x = offset.x; x < mapWidth - 1 - offset.x; x += 2) {\n\t\t\tsquares.push(getTwoByTwoSquare(x, y));\n\t\t}\n\t}\n\treturn squares;\n}\n\nfunction getTwoByTwoSquare(x, y) {\n\tlet square = [];\n\tfor (let b = 0; b < 2; b++) {\n\t\tfor (let a = 0; a < 2; a++) {\n\t\t\tsquare.push([ a + x, b + y ]);\n\t\t}\n\t}\n\treturn square;\n}\n","import { compareArrays } from 'js/utility/utilityFunctions';\n\nexport const removeExitMove = (legalMoves, genMap) => {\n\tlegalMoves = legalMoves.filter((move) => !compareArrays(move, genMap.end));\n\treturn legalMoves;\n};\n","import { compareArrays, findIndexOfArrayInMatrix } from 'js/utility/utilityFunctions';\nimport { removeOutOfBoundsMoves, getAdjacentTiles } from 'js/generation/map/genericGenMapFunctions';\n\nexport const removeAroundExitMoves = (legalMoves, genMap) => {\n\tlegalMoves = legalMoves.filter((move) => !checkIfMoveIsAroundExitTile(move, genMap));\n\treturn legalMoves;\n};\n\nfunction checkIfMoveIsAroundExitTile(move, genMap) {\n\tconst tilesAroundExit = chooseSurroundOrAdjacentExitTiles(move, genMap);\n\tlet moveIsAdjExit = false;\n\ttilesAroundExit.forEach(function(tile) {\n\t\tif (compareArrays(move, tile)) moveIsAdjExit = true;\n\t});\n\treturn moveIsAdjExit;\n}\n\nfunction chooseSurroundOrAdjacentExitTiles(move, genMap) {\n\tif (checkIfTilesAdjacent(move, genMap)) {\n\t\treturn getTilesSurroundingExit(genMap);\n\t} else {\n\t\treturn getTilesAdjacentAndExit(genMap);\n\t}\n}\n\nfunction checkIfTilesAdjacent(tile, genMap) {\n\tconst adjacentTiles = getTilesAdjacentAndExit(genMap);\n\tconst tileIsAdjacent = findIndexOfArrayInMatrix(tile, adjacentTiles) !== -1;\n\treturn tileIsAdjacent;\n}\n\nfunction getTilesSurroundingExit(genMap) {\n\tconst adjacentTiles = getSurroundingTiles(genMap.end);\n\treturn removeOutOfBoundsMoves(adjacentTiles, genMap.parameters);\n}\n\nfunction getSurroundingTiles(coordinate) {\n\tlet tileArray = [];\n\tfor (let a = -1; a <= 1; a++) {\n\t\tfor (let b = -1; b <= 1; b++) {\n\t\t\ttileArray.push([ coordinate[0] + a, coordinate[1] + b ]);\n\t\t}\n\t}\n\treturn tileArray;\n}\n\nfunction getTilesAdjacentAndExit(genMap) {\n\tconst adjacentTiles = getAdjacentTiles(genMap.end);\n\treturn removeOutOfBoundsMoves(adjacentTiles, genMap.parameters);\n}\n","import { getLegalMoves } from 'js/generation/map/genericGenMapFunctions';\nimport { checkIfPossibleToReachTargetIterative } from 'js/generation/map/checkIfPossibleToReachTargetIterative';\n\nexport const removeSealingMoves = (legalMoves, genMap) => {\n\tif (!checkIfMapCovered(genMap, 0.5)) {\n\t\tlegalMoves = legalMoves.filter((move) => !checkIfMoveSeals(move, genMap));\n\t}\n\treturn legalMoves;\n};\n\nconst checkIfMapCovered = (genMap, modifier) => {\n\tconst { mapWidth, mapHeight } = genMap.parameters;\n\tconst mapCoverage = modifier * mapWidth * mapHeight;\n\treturn genMap.tiles.length >= mapCoverage;\n};\n\nconst checkIfMoveSeals = (move, genMap) => {\n\tconst newGenMapObj = { ...genMap, tiles: [ ...genMap.tiles, move ] };\n\tconst nextLegalMoves = getLegalMoves(move, genMap);\n\tfor (let i = 0; i < nextLegalMoves.length; i++) {\n\t\tif (!checkIfPossibleToReachTargetIterative(nextLegalMoves[i], newGenMapObj)) return true;\n\t}\n\treturn false;\n};\n","import { compareArrays } from 'js/utility/utilityFunctions';\nimport { findDirectionFromMove } from 'js/utility/directionsConversions.js';\n\nexport const removeHookMoves = (legalMoves, genMap) => {\n\tif (genMap.tiles.length > 2) {\n\t\tlegalMoves = legalMoves.filter((move) => !checkIfMoveWillBeHook(move, genMap.tiles));\n\t}\n\treturn legalMoves;\n};\n\nconst checkIfMoveWillBeHook = (prospectiveMove, generatedTiles) => {\n\tconst lastThreeTiles = getLastSpecifiedAmountOfTiles(3, generatedTiles);\n\tconst prospectiveLastFourTiles = [ prospectiveMove, ...lastThreeTiles ];\n\tconst dirArr = getSeriesOfDirectionsFromMoveArray(prospectiveLastFourTiles);\n\tlet wasHook = checkIfMoveArrayFormsHook(dirArr);\n\treturn wasHook;\n};\n\nconst getSeriesOfDirectionsFromMoveArray = (moves) => {\n\tlet directions = [];\n\tfor (let i = 0; i < moves.length - 1; i++) {\n\t\tdirections.unshift(findDirectionFromMove(moves[i], moves[i + 1]));\n\t}\n\treturn directions;\n};\n\nconst getLastSpecifiedAmountOfTiles = (numberOfTiles, tiles) => {\n\treturn tiles.slice(Math.max(tiles.length - numberOfTiles, 0)).reverse();\n};\n\nconst checkIfMoveArrayFormsHook = (moveArray) => {\n\tlet movesFormHook = false;\n\tif (\n\t\tcompareArrays(moveArray, [ 0, 1, 2 ]) ||\n\t\tcompareArrays(moveArray, [ 1, 2, 3 ]) ||\n\t\tcompareArrays(moveArray, [ 2, 3, 0 ]) ||\n\t\tcompareArrays(moveArray, [ 3, 0, 1 ])\n\t) {\n\t\tmovesFormHook = true;\n\t}\n\tif (\n\t\tcompareArrays(moveArray, [ 3, 2, 1 ]) ||\n\t\tcompareArrays(moveArray, [ 2, 1, 0 ]) ||\n\t\tcompareArrays(moveArray, [ 1, 0, 3 ]) ||\n\t\tcompareArrays(moveArray, [ 0, 3, 2 ])\n\t) {\n\t\tmovesFormHook = true;\n\t}\n\treturn movesFormHook;\n};\n","import {\n\tisNonEmptyArray,\n\tremoveDuplicateArraysFromMatrix,\n\tcheckIfArrayIsInMatrix\n} from 'js/utility/utilityFunctions.js';\nimport { getLegalMoves } from 'js/generation/map/genericGenMapFunctions.js';\n\nexport const removeMovesWithLessTilesFromExit = (legalMoves, genMap) => {\n\tconst moveWithMore = getMovesWithMoreTilesAwayFromExit(legalMoves, genMap);\n\tif (isNonEmptyArray(moveWithMore)) return [ ...moveWithMore ];\n\telse return legalMoves;\n};\n\nfunction getMovesWithMoreTilesAwayFromExit(legalMoves, genMap) {\n\tlet pathLengths = legalMoves.map((el) => getMinimumDistanceToExit(el, genMap));\n\tconst indices = getIndicesOfLargestElementsInArray(pathLengths);\n\tlet moves = [];\n\tfor (let i = 0; i < indices.length; i++) {\n\t\tmoves.push(legalMoves[indices[i]]);\n\t}\n\treturn moves;\n}\nconst getMinimumDistanceToExit = (move, genMap) => {\n\tconst { mapWidth, mapHeight } = genMap.parameters;\n\tlet tiles = [ ...genMap.tiles ];\n\tlet currentMoves = [ move ]; // convert array to matrix of length 1\n\tfor (let i = 0; i < mapWidth * mapHeight; i++) {\n\t\tlet legalMoves = currentMoves.map((el) => {\n\t\t\treturn getLegalMoves(el, { ...genMap, tiles });\n\t\t});\n\t\tlegalMoves = [].concat.apply([], legalMoves);\n\t\tcurrentMoves.forEach((move) => tiles.push(move));\n\t\tcurrentMoves = [];\n\t\tif (checkIfArrayIsInMatrix(genMap.end, tiles)) return i;\n\t\tlegalMoves = removeDuplicateArraysFromMatrix(legalMoves);\n\t\tlegalMoves.forEach((move) => currentMoves.push(move));\n\t}\n};\n\nconst getIndicesOfLargestElementsInArray = (array) => {\n\tconst largestValue = array[array.indexOf(Math.max(...array))];\n\tlet largestIndices = [];\n\tfor (let i = 0; i < array.length; i++) {\n\t\tif (array[i] === largestValue) largestIndices.push(i);\n\t}\n\treturn largestIndices;\n};\n","import seedrandom from 'seedrandom';\n\nimport { randomIntFromInterval, compareArrays, isNonEmptyArray } from 'js/utility/utilityFunctions';\nimport {\n\tdirectionsToTrackRailType,\n\tgetTilesInEachDirection,\n\tgetDirectionOfEachMove\n} from 'js/utility/directionsConversions.js';\n\nimport { generateStartEndPoints } from 'js/generation/map/generateStartEndPoints';\nimport { getLegalMoves } from 'js/generation/map/genericGenMapFunctions';\nimport { checkIfPossibleToReachTargetIterative } from 'js/generation/map/checkIfPossibleToReachTargetIterative';\nimport { generateDefaultTileIndices } from 'js/generation/map/generateDefaultTileIndices';\n\nimport { removeExitMove } from 'js/generation/map/mutateMoveArray/removeExitMove';\nimport { removeAroundExitMoves } from 'js/generation/map/mutateMoveArray/removeAroundExitMoves';\nimport { removeSealingMoves } from 'js/generation/map/mutateMoveArray/removeSealingMoves';\nimport { removeHookMoves } from 'js/generation/map/mutateMoveArray/removeHookMoves';\nimport { removeMovesWithLessTilesFromExit } from 'js/generation/map/mutateMoveArray/removeMovesWithLessTilesFromExit';\n\nexport const generateNewMap = (passedParameters) => {\n\tseedrandom(passedParameters.seed, { global: true });\n\n\tconst parameters = {\n\t\tmapWidth: passedParameters.size,\n\t\tmapHeight: passedParameters.size,\n\t\tdifficulty: passedParameters.difficulty\n\t};\n\n\tlet trainTrackMap = {\n\t\ttracks: [],\n\t\theaderLabels: []\n\t};\n\n\tconst allTiles = generateMapTiles(parameters);\n\tconst moveDirections = getDirectionOfEachMove(allTiles, parameters);\n\tconst railTypes = directionsToTrackRailType(moveDirections);\n\tconst defaultTilesIndices = generateDefaultTileIndices(allTiles, parameters);\n\n\ttrainTrackMap.headerLabels = generateMapHeaders(allTiles, parameters);\n\n\tfor (let i = 0; i < allTiles.length; i++) {\n\t\tlet isDefaultTrack = defaultTilesIndices.includes(i);\n\n\t\ttrainTrackMap.tracks.push({\n\t\t\ttile: allTiles[i],\n\t\t\trailType: railTypes[i],\n\t\t\tdefaultTrack: isDefaultTrack\n\t\t});\n\t}\n\treturn trainTrackMap;\n};\n\nfunction generateMapTiles(parameters) {\n\tconst [ start, end ] = generateStartEndPoints(parameters);\n\n\tlet genMap = {\n\t\tstart,\n\t\tend,\n\t\ttiles: [ start ],\n\t\tcurrent: start,\n\t\tparameters\n\t};\n\n\tlet mapComplete = false;\n\n\twhile (!mapComplete) {\n\t\tlet nextMove = newMove(genMap);\n\t\tgenMap.tiles.push(nextMove);\n\t\tgenMap.current = nextMove;\n\t\tif (compareArrays(nextMove, genMap.end)) {\n\t\t\tmapComplete = true;\n\t\t}\n\t}\n\treturn genMap.tiles;\n}\n\nfunction newMove(genMap) {\n\tlet nextMove;\n\tlet legalMoves = getLegalMoves(genMap.current, genMap);\n\n\tif (checkIfOnlyLegalMoveIsExit(legalMoves, genMap.end)) {\n\t\tnextMove = genMap.end;\n\t} else {\n\t\tlegalMoves = legalMoves.filter((move) => checkIfPossibleToReachTargetIterative(move, genMap));\n\t\tlegalMoves = mutateMoveArray(legalMoves, genMap);\n\t\tnextMove = legalMoves[randomIntFromInterval(0, legalMoves.length - 1)];\n\t}\n\treturn nextMove;\n}\n\nfunction checkIfOnlyLegalMoveIsExit(legalMoves, endCoordinate) {\n\treturn legalMoves.length === 1 && compareArrays(legalMoves[0], endCoordinate);\n}\n\nfunction mutateMoveArray(legalMoves, genMap) {\n\tlet moveMutateFunctions = [];\n\n\tmoveMutateFunctions.push(removeExitMove);\n\tmoveMutateFunctions.push(removeAroundExitMoves);\n\tmoveMutateFunctions.push(removeSealingMoves);\n\tmoveMutateFunctions.push(removeHookMoves);\n\tmoveMutateFunctions.push(removeMovesWithLessTilesFromExit);\n\n\tfor (let i = 0; i < moveMutateFunctions.length; i++) {\n\t\tlet currentFunc = moveMutateFunctions[i];\n\t\tlet mutatedMoveArray = currentFunc(legalMoves, genMap);\n\t\tif (!isNonEmptyArray(mutatedMoveArray)) {\n\t\t\tbreak;\n\t\t} else {\n\t\t\tlegalMoves = mutatedMoveArray;\n\t\t}\n\t}\n\treturn legalMoves;\n}\n\nfunction generateMapHeaders(allTiles, parameters) {\n\tconst { mapWidth, mapHeight } = parameters;\n\tlet mapHeaders = { x: [], y: [] };\n\tfor (let i = 0; i < mapWidth; i++) {\n\t\tmapHeaders.x.push(getTilesInEachDirection([ i, -1 ], allTiles)[2].length);\n\t}\n\tfor (let i = 0; i < mapHeight; i++) {\n\t\tmapHeaders.y.push(getTilesInEachDirection([ -1, i ], allTiles)[1].length);\n\t}\n\treturn mapHeaders;\n}\n","export const generateStartEndPoints = (parameters) => {\n\tlet edges = getEdgeCoordinatesClockwiseOrder(parameters);\n\tlet startCoordinate = edges.splice(Math.floor(Math.random() * edges.length), 1)[0];\n\tlet endCoordinate = edges.splice(Math.floor(Math.random() * edges.length), 1)[0];\n\treturn [ startCoordinate, endCoordinate ];\n};\n\nfunction getEdgeCoordinatesClockwiseOrder(parameters) {\n\tconst { mapWidth, mapHeight } = parameters;\n\tlet coordinates = [];\n\tfor (let x = 0; x < mapWidth - 1; x++) coordinates.push([ x, 0 ]); //top\n\tfor (let y = 0; y < mapHeight - 1; y++) coordinates.push([ mapWidth - 1, y ]); //right\n\tfor (let x = mapWidth - 1; x > 0; x--) coordinates.push([ x, mapHeight - 1 ]); //bottom\n\tfor (let y = mapHeight - 1; y > 0; y--) coordinates.push([ 0, y ]); //left\n\treturn coordinates;\n}\n","import React, { useEffect, useState } from 'react';\nimport 'css/howToPlayScreen.css';\nimport ReturnToMainMenuBtn from 'js/components/ReturnToMainMenuBtn.jsx';\nimport { generateNewMap } from 'js/generation/map/generateMap';\nimport { generateMapIcon } from 'js/generation/icon/generateMapIcon';\n\nexport const HowToPlayScreen = (props) => {\n\tconst [ maps, setMaps ] = useState(false);\n\n\tuseEffect(() => {\n\t\tasync function getMaps() {\n\t\t\tconst gameParameters = { size: 6, seed: 251583746297744, difficulty: 3 };\n\t\t\tconst map = generateNewMap(gameParameters);\n\t\t\tconst emptyMap = await generateMapIcon(map, false);\n\t\t\tconst completeMap = await generateMapIcon(map, true);\n\t\t\tsetMaps({ empty: emptyMap, complete: completeMap });\n\t\t}\n\t\tgetMaps();\n\t}, []);\n\n\treturn (\n\t\t<div className=\"howToPlayScreen\" key=\"howToPlayScreen\">\n\t\t\t<h2 className=\"howToPlayTitle\">How To Play</h2>\n\t\t\t<div className=\"howToPlayGrid\" style={{ opacity: maps ? '1' : '0' }}>\n\t\t\t\t<div className=\"howToPlayMapField\">\n\t\t\t\t\t<img className=\"howToPlayMap\" alt=\"\" src={maps.empty} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"howToPlayTextField\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThe goal of the game is to create a train track path between the entrance and the exit of the\n\t\t\t\t\t\tboard.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tEach row and column must contain the specified amount of tracks in the corresponding header.\n\t\t\t\t\t\tHeaders display green if correct and red if overfilled.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Tracks cannot overlap. In order to win the path must be fully connected with no extra tracks.</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tDefault tiles (such as the entrance and exit) cannot be removed from the map. The higher the\n\t\t\t\t\t\tdifficulty selected, the less default tiles on the map.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"howToPlayMapField\">\n\t\t\t\t\t<img className=\"howToPlayMap\" alt=\"\" src={maps.complete} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"howToPlayTextField\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tLeft clicking places a track. Hovering over different sections of a tile will show what type of\n\t\t\t\t\t\ttrack will be placed on left click.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tRight clicking places an X mark. X marks are for labelling tiles where you know there is no\n\t\t\t\t\t\ttrack.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tPressing both mouse buttons at the same time places a dot mark. Dot marks are for labelling\n\t\t\t\t\t\ttiles where you know there is a track but are not sure which type.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Holding down a mouse button and dragging over other tiles will place multiple tracks/markers.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ReturnToMainMenuBtn {...props} />\n\t\t</div>\n\t);\n};\n\nexport default HowToPlayScreen;\n","import React, { useState } from 'react';\n\nexport const DifficultySlider = (props) => {\n\tconst [ hover, setHover ] = useState(false);\n\tconst SLIDER_REM_WIDTH = 5;\n\n\tconst containerStyle = {\n\t\tdisplay: 'flex',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center'\n\t};\n\n\tconst labelDefaultStyle = {\n\t\tposition: 'absolute',\n\t\theight: '1.5rem',\n\t\twidth: '1.5rem',\n\t\tdisplay: 'flex',\n\t\talignItems: 'center',\n\t\tjustifyContent: 'center',\n\t\tborder: '1px solid #444',\n\t\tbackgroundColor: 'white',\n\t\tborderRadius: '100%',\n\t\tzIndex: '-1',\n\t\topacity: '0',\n\t\ttransition: '0.5s',\n\t\ttransform: `translate(${(props.gameState.difficulty - 3) * 67.5}%, 100%)`\n\t};\n\n\tconst labelHoverStyle = {\n\t\ttransform: `translate(${(props.gameState.difficulty - 3) * 67.5}%, 120%)`,\n\t\topacity: '1',\n\t\ttransition: '1s'\n\t};\n\n\tconst labelStyle = hover ? { ...labelDefaultStyle, ...labelHoverStyle } : labelDefaultStyle;\n\n\treturn (\n\t\t<div style={containerStyle}>\n\t\t\t<input\n\t\t\t\tclassName=\"difficultySlider\"\n\t\t\t\tonChange={(e) =>\n\t\t\t\t\tprops.setGameState({\n\t\t\t\t\t\t...props.gameState,\n\t\t\t\t\t\tdifficulty: parseInt(e.target.value)\n\t\t\t\t\t})}\n\t\t\t\ttype=\"range\"\n\t\t\t\tmin=\"1\"\n\t\t\t\tmax=\"5\"\n\t\t\t\tvalue={props.gameState.difficulty}\n\t\t\t\tstyle={{ width: `${SLIDER_REM_WIDTH}rem` }}\n\t\t\t\tonMouseOver={() => setHover(true)}\n\t\t\t\tonMouseLeave={() => setHover(false)}\n\t\t\t/>\n\t\t\t<div className=\"difficultyLabel\" style={labelStyle}>\n\t\t\t\t{props.gameState.difficulty}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default DifficultySlider;\n","import React, { useEffect } from 'react';\nimport 'css/startMapScreen.css';\nimport WaveButton from 'js/components/WaveButton';\nimport Dropdown from 'js/components/Dropdown';\nimport DifficultySlider from 'js/components/DifficultySlider';\nimport ReturnToMainMenuBtn from 'js/components/ReturnToMainMenuBtn.jsx';\nimport { getRandomSeed } from 'js/utility/utilityFunctions';\n\nconst SLIDER_WIDTH_REM = 5;\n\nfunction getMapSizeOptions() {\n\tlet mapSizeOptions = [];\n\tfor (let i = 0; i < 3; i++) {\n\t\tconst mapSize = 6 + i * 2;\n\t\tmapSizeOptions.push({\n\t\t\tdisplay: `${mapSize}x${mapSize}`,\n\t\t\tvalue: mapSize\n\t\t});\n\t}\n\treturn mapSizeOptions;\n}\n\nexport const StartMapScreen = (props) => {\n\tuseEffect(() => {\n\t\tprops.setGameState({ ...props.gameState, seed: getRandomSeed() });\n\t}, []);\n\n\treturn (\n\t\t<div className=\"menu startMapScreen\">\n\t\t\t<div className=\"startMapOptionsContainer\">\n\t\t\t\t<p className=\"startMapOptionLabel\" key={'Map Size Label'}>\n\t\t\t\t\tMap Size\n\t\t\t\t</p>\n\t\t\t\t<Dropdown\n\t\t\t\t\tkey={'selectMapSize'}\n\t\t\t\t\tstyle={{ width: '3rem', height: '2rem', textAlign: 'center', padding: '0 1.25rem 0 0.5rem' }}\n\t\t\t\t\toptions={getMapSizeOptions()}\n\t\t\t\t\tclassName=\"mapSizeOption\"\n\t\t\t\t\tplaceholder={`${props.gameState.size}x${props.gameState.size}`}\n\t\t\t\t\tonHover={() => null}\n\t\t\t\t\tonChange={(item) => {\n\t\t\t\t\t\tprops.setGameState({ ...props.gameState, size: item.value });\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<p className=\"startMapOptionLabel\" key={'Map Seed Label'}>\n\t\t\t\t\tMap Seed\n\t\t\t\t</p>\n\t\t\t\t<div className=\"mapSeedOptionRow\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tkey=\"mapSeedInput\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"mapSeedInput\"\n\t\t\t\t\t\tid=\"mapSeedInput\"\n\t\t\t\t\t\tdefaultValue={props.gameState.seed}\n\t\t\t\t\t\tonChange={(e) => props.setGameState({ ...props.gameState, seed: e.target.value })}\n\t\t\t\t\t\tstyle={{ width: '8rem', textAlign: 'center' }}\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey=\"rerollSeedBtn\"\n\t\t\t\t\t\tclassName=\"rerollSeedBtn\"\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tprops.setGameState({ ...props.gameState, seed: getRandomSeed() });\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"diceSymbol\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<p className=\"startMapOptionLabel\">Difficulty:</p>\n\n\t\t\t\t<div className=\"startMapSliderRow\">\n\t\t\t\t\t<DifficultySlider {...props} />\n\t\t\t\t\t<div className=\"questionBox difficultyQuestionBox\">?</div>\n\t\t\t\t\t<div className=\"startOptionExplanation difficultyExplanation\">\n\t\t\t\t\t\tAdjusts the amount of default tiles in game. Difficulty 3 ensures the absolute minimum amount of\n\t\t\t\t\t\tdefault tiles required for a map that has one definitive solution.<br />\n\t\t\t\t\t\t<br />Difficulties above 3 may require trial and error and will likely have multiple possible\n\t\t\t\t\t\tsolutions (only one solution accepted).\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<p className=\"startMapOptionLabel\">Theme Color:</p>\n\t\t\t\t<div className=\"startMapSliderRow\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"colorSlider\"\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tprops.setThemeColor({\n\t\t\t\t\t\t\t\t...props.themeColor,\n\t\t\t\t\t\t\t\tselected: parseInt(e.target.value)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\tmax={props.themeColor.available.length - 1}\n\t\t\t\t\t\tvalue={props.themeColor.selected}\n\t\t\t\t\t\tstyle={{ width: `${SLIDER_WIDTH_REM * 2}rem` }}\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"colorDemoBox\"\n\t\t\t\t\t\tstyle={{ backgroundColor: props.themeColor.available[props.themeColor.selected] }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"startOptionOptionRow\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tclassName=\"startOptionCheckbox\"\n\t\t\t\t\t\tdefaultChecked={!props.visualEffects}\n\t\t\t\t\t\tonChange={(e) => props.setVisualEffects(!e.target.checked)}\n\t\t\t\t\t/>\n\t\t\t\t\t<p className=\"startOptionRowLabel\">Disable Visual Effects</p>\n\t\t\t\t\t<div className=\"questionBox visualEffectsQuestionBox\">?</div>\n\t\t\t\t\t<div className=\"startOptionExplanation visualEffectsExplanation\">\n\t\t\t\t\t\tDisables the game background and win display visual effects.<br />\n\t\t\t\t\t\t<br />Can increase performance on old browsers/PCs.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<WaveButton\n\t\t\t\t\tclassName=\"generateMapBtn\"\n\t\t\t\t\tkey={'generateMapBtn'}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tprops.generateMap();\n\t\t\t\t\t}}\n\t\t\t\t\ttext={'Generate Map'}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<ReturnToMainMenuBtn {...props} />\n\t\t</div>\n\t);\n};\n\nexport default StartMapScreen;\n","import React from 'react';\nimport ReturnToMainMenuBtn from 'js/components/ReturnToMainMenuBtn.jsx';\n\nexport const AboutScreen = (props) => {\n\treturn (\n\t\t<div className=\"menu aboutScreen\">\n\t\t\t<p>This game was created with React.</p>\n\t\t\t<p>\n\t\t\t\t<a href=\"https://github.com/morgan-sam/Train-Tracks-React\">Source Code</a>\n\t\t\t</p>\n\t\t\t<p>Samuel Morgan - 2020</p>\n\t\t\t<ReturnToMainMenuBtn {...props} />\n\t\t</div>\n\t);\n};\n\nexport default AboutScreen;\n","import React from 'react';\nimport WaveButton from 'js/components/WaveButton';\n\nexport const MainMenuScreen = (props) => {\n\treturn (\n\t\t<div className=\"menu mainMenu\" key=\"mainMenuScreen\">\n\t\t\t<WaveButton\n\t\t\t\tclassName=\"startGameBtn\"\n\t\t\t\tkey={'startGameBtn'}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.setCurrentScreen('startMap');\n\t\t\t\t}}\n\t\t\t\ttext={'Start Game'}\n\t\t\t/>\n\t\t\t<WaveButton\n\t\t\t\tclassName=\"loadSavedGameBtn\"\n\t\t\t\tkey={'loadSavedGameBtn'}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.setCurrentScreen('loadMap');\n\t\t\t\t}}\n\t\t\t\ttext={'Load Saved Map'}\n\t\t\t/>\n\t\t\t<WaveButton\n\t\t\t\tclassName=\"howToPlayPageBtn\"\n\t\t\t\tkey={'howToPlayPageBtn'}\n\t\t\t\tonClick={async () => {\n\t\t\t\t\tprops.setCurrentScreen('howToPlay');\n\t\t\t\t}}\n\t\t\t\ttext={'How To Play'}\n\t\t\t/>\n\t\t\t<WaveButton\n\t\t\t\tclassName=\"aboutBtn\"\n\t\t\t\tkey={'aboutBtn'}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.setCurrentScreen('about');\n\t\t\t\t}}\n\t\t\t\ttext={'About'}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default MainMenuScreen;\n","import React from 'react';\nimport Game from 'js/components/Game';\nimport LoadMapScreen from 'js/screen/loadMapScreen.jsx';\nimport HowToPlayScreen from 'js/screen/howToPlayScreen.jsx';\nimport StartMapScreen from 'js/screen/startMapScreen.jsx';\nimport AboutScreen from 'js/screen/aboutScreen.jsx';\nimport MainMenuScreen from 'js/screen/mainMenuScreen.jsx';\n\nexport const Screen = (props) => {\n\tconst getScreenDisplay = (screen) => {\n\t\tswitch (screen) {\n\t\t\tcase 'mainMenu':\n\t\t\t\treturn <MainMenuScreen {...props} />;\n\t\t\tcase 'startMap':\n\t\t\t\treturn <StartMapScreen {...props} />;\n\t\t\tcase 'loadMap':\n\t\t\t\treturn <LoadMapScreen {...props} />;\n\t\t\tcase 'howToPlay':\n\t\t\t\treturn <HowToPlayScreen {...props} />;\n\t\t\tcase 'about':\n\t\t\t\treturn <AboutScreen {...props} />;\n\t\t\tcase 'game':\n\t\t\t\treturn <Game {...props} />;\n\t\t\tdefault:\n\t\t\t\treturn <MainMenuScreen {...props} />;\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"screen\" key={props.currentScreen}>\n\t\t\t<h1 key={'title'} className=\"gameTitle\">\n\t\t\t\tTrain Tracks\n\t\t\t</h1>\n\t\t\t{getScreenDisplay(props.currentScreen)}\n\t\t</div>\n\t);\n};\n\nexport default Screen;\n","import { convertRemToPx } from 'js/utility/utilityFunctions';\n\nexport const generateUnknownTrackIcon = (tileRemSize) => {\n\tconst tilePixelSize = convertRemToPx(tileRemSize);\n\tconst canvas = generateCanvas(tilePixelSize);\n\tconst image = canvas.toDataURL('image/png');\n\treturn image;\n};\n\nconst generateCanvas = (tilePixelSize) => {\n\tlet canvas = document.createElement('canvas');\n\n\tcanvas.width = tilePixelSize;\n\tcanvas.height = tilePixelSize;\n\tcanvas.context = drawWhiteBackground(canvas);\n\tcanvas.context = clearCircle(canvas, tilePixelSize / 3);\n\treturn canvas;\n};\n\nconst drawWhiteBackground = (canvas) => {\n\tlet context = canvas.getContext('2d');\n\tcontext.fillStyle = 'white';\n\tcontext.fillRect(0, 0, canvas.width, canvas.height);\n\treturn context;\n};\n\nconst clearCircle = (canvas, radius) => {\n\tlet context = canvas.getContext('2d');\n\tlet x = canvas.width / 2;\n\tlet y = canvas.height / 2;\n\tcontext.save();\n\tcontext.beginPath();\n\tcontext.arc(x, y, radius, 0, 2 * Math.PI, true);\n\tcontext.clip();\n\tcontext.clearRect(x - radius, y - radius, radius * 2, radius * 2);\n\tcontext.restore();\n};\n","import { convertRemToPx } from 'js/utility/utilityFunctions';\n\nexport const generateCrossTrackIcon = (tileRemSize) => {\n\tconst tilePixelSize = convertRemToPx(tileRemSize);\n\tconst canvas = generateCanvas(tilePixelSize);\n\tconst image = canvas.toDataURL('image/png');\n\treturn image;\n};\n\nconst generateCanvas = (tilePixelSize) => {\n\tlet canvas = document.createElement('canvas');\n\n\tcanvas.width = tilePixelSize;\n\tcanvas.height = tilePixelSize;\n\tcanvas.context = drawWhiteBackground(canvas);\n\tcanvas.context = clearCross(canvas);\n\treturn canvas;\n};\n\nconst drawWhiteBackground = (canvas) => {\n\tlet context = canvas.getContext('2d');\n\tcontext.fillStyle = 'white';\n\tcontext.fillRect(0, 0, canvas.width, canvas.height);\n\treturn context;\n};\n\nconst clearCross = (canvas) => {\n\tlet context = canvas.getContext('2d');\n\tlet x = canvas.width / 2;\n\tlet y = canvas.height / 2;\n\tconst cw = 5; //cross width\n\tconst cl = 50; //cross length\n\n\tcontext.save();\n\tcontext.beginPath();\n\tcontext.translate(x, y);\n\tcontext.rotate(45 * Math.PI / 180);\n\tcontext.rect(-cw / 2, -cl / 2, cw, cl);\n\tcontext.rotate(90 * Math.PI / 180);\n\tcontext.rect(-cw / 2, -cl / 2, cw, cl);\n\tcontext.clip();\n\tcontext.translate(-x, -y);\n\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n};\n","import React, { useEffect, useState } from 'react';\nimport Screen from 'js/components/Screen';\n\nimport { generateNewMap } from 'js/generation/map/generateMap';\nimport { getRandomSeed } from 'js/utility/utilityFunctions';\n\nimport { generateUnknownTrackIcon } from 'js/generation/icon/generateUnknownTrackIcon';\nimport { generateCrossTrackIcon } from 'js/generation/icon/generateCrossTrackIcon';\nimport { roygbivArray } from 'js/utility/colorFunctions';\n\nexport const App = () => {\n\tconst [ gameState, setGameState ] = useState({\n\t\tsize: 8,\n\t\tseed: getRandomSeed(),\n\t\tdifficulty: 3,\n\t\tmapObject: null,\n\t\tactive: false,\n\t\tvisualEffects: true\n\t});\n\n\tconst [ currentScreen, setCurrentScreen ] = useState('mainMenu');\n\tconst [ tileRemSize, setTileRemSize ] = useState(3.5);\n\tconst [ railImages, setRailImages ] = useState({\n\t\tunknown: generateUnknownTrackIcon(tileRemSize),\n\t\tcross: generateCrossTrackIcon(tileRemSize)\n\t});\n\tconst [ themeColor, setThemeColor ] = useState({ available: roygbivArray(), selected: 0 });\n\tconst [ visualEffects, setVisualEffects ] = useState(true);\n\n\tfunction generateMap(seed = gameState.seed) {\n\t\tconst gameParameters = { size: gameState.size, seed, difficulty: gameState.difficulty };\n\t\tconst mapObject = generateNewMap(gameParameters);\n\t\tsetGameState({\n\t\t\t...gameState,\n\t\t\tseed,\n\t\t\tmapObject,\n\t\t\tactive: true\n\t\t});\n\t}\n\n\tconst inGameNewMap = () => {\n\t\tconst newSeed = getRandomSeed();\n\t\tgenerateMap(newSeed);\n\t};\n\n\tfunction quitGame() {\n\t\tsetCurrentScreen('mainMenu');\n\t\tsetGameState({\n\t\t\t...gameState,\n\t\t\tmapObject: null,\n\t\t\tseed: getRandomSeed(),\n\t\t\tactive: false\n\t\t});\n\t}\n\n\tuseEffect(\n\t\t() => {\n\t\t\tif (gameState.mapObject !== null && gameState.active) {\n\t\t\t\tsetCurrentScreen('game');\n\t\t\t}\n\t\t},\n\t\t[ gameState.mapObject, gameState.active ]\n\t);\n\n\tuseEffect(\n\t\t() => {\n\t\t\tconst mapSeedInput = document.getElementById('mapSeedInput');\n\t\t\tif (mapSeedInput) mapSeedInput.value = gameState.seed;\n\t\t},\n\t\t[ gameState.seed ]\n\t);\n\n\tconst screenProps = {\n\t\tcurrentScreen,\n\t\tsetCurrentScreen,\n\t\tgameState,\n\t\tsetGameState,\n\t\tinGameNewMap,\n\t\tgenerateMap,\n\t\tquitGame,\n\t\ttileRemSize,\n\t\trailImages,\n\t\tthemeColor,\n\t\tsetThemeColor,\n\t\tvisualEffects,\n\t\tsetVisualEffects\n\t};\n\n\treturn (\n\t\t<div key={'app'} className=\"app\">\n\t\t\t<div key={'screenContainer'} className=\"screenContainer\">\n\t\t\t\t<Screen {...screenProps} />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from 'js/components/App';\nimport 'css/reset.css';\nimport 'css/index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}