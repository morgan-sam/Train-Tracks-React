(this["webpackJsonptrain-tracks-react"]=this["webpackJsonptrain-tracks-react"]||[]).push([[0],{14:function(e,t,n){e.exports=n(30)},27:function(e,t){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),i=n(2),l=n(3),u=n(1),s=n.n(u),f=n(4),p=function(e){var t;return"table-heading"===e.className&&(t=0),"emptyTile"===e.className&&(t=1),"transparentTile"===e.className&&(t=0),r.a.createElement("div",{className:"white-background",style:{position:"absolute",top:"0",left:"0",height:"100%",width:"100%",background:"white",zIndex:"-2",transition:"opacity ".concat(t,"s"),opacity:"table-heading"===e.className||"emptyTile"===e.className||"transparentTile"===e.className?"0":"1"}})},m=n(6),d=n.n(m),h=n(9),v=n.n(h),g=function(e){var t,n;return 1===e.length&&(e[0]%2===0&&(t="vertical"),e[0]%2===1&&(t="horizontal"),n=t),2===e.length&&(e[0]%2===0&&e[1]%2===0&&(t="vertical"),e[0]%2===1&&e[1]%2===1&&(t="horizontal"),(0===e[0]&&1===e[1]||3===e[0]&&2===e[1])&&(t="bottomRightCorner"),(1===e[0]&&2===e[1]||0===e[0]&&3===e[1])&&(t="bottomLeftCorner"),(2===e[0]&&3===e[1]||1===e[0]&&0===e[1])&&(t="topLeftCorner"),(3===e[0]&&0===e[1]||2===e[0]&&1===e[1])&&(t="topRightCorner"),n=e[1]%2===0?"vertical":"horizontal"),[t,n]},b=function(e){var t;switch(e){case"vertical":t={trackType:v.a,trackRotation:0};break;case"horizontal":t={trackType:v.a,trackRotation:90};break;case"bottomLeftCorner":t={trackType:d.a,trackRotation:0};break;case"topLeftCorner":t={trackType:d.a,trackRotation:90};break;case"topRightCorner":t={trackType:d.a,trackRotation:180};break;case"bottomRightCorner":t={trackType:d.a,trackRotation:270};break;case"T":case"X":t={trackType:e,trackRotation:"none"};break;default:t={trackType:"none",trackRotation:"none"}}return t},k=function(e){var t;return e.target.classList.contains("axisButton")&&((e.target.classList.contains("top")||e.target.classList.contains("bottom"))&&(t="vertical"),(e.target.classList.contains("right")||e.target.classList.contains("left"))&&(t="horizontal")),e.target.classList.contains("cornerButton")&&(e.target.classList.contains("top-left")&&(t="topLeftCorner"),e.target.classList.contains("top-right")&&(t="topRightCorner"),e.target.classList.contains("bottom-left")&&(t="bottomLeftCorner"),e.target.classList.contains("bottom-right")&&(t="bottomRightCorner")),e.target.classList.contains("centreButton")&&(t="T"),t},y=function(e){return r.a.createElement("div",{className:"cornerButton ".concat(e.corner)})},E=function(e){return r.a.createElement("div",{className:"axisButton ".concat(e.edge)})},T=function(){return r.a.createElement("div",{className:"centreButton"})},w=function(e){return[["top-left","top-right","bottom-left","bottom-right"].map((function(e){return r.a.createElement(y,{corner:e,key:e})})),["top","right","bottom","left"].map((function(e){return r.a.createElement(E,{edge:e,key:e})})),r.a.createElement(T,{key:e.x})]},x=function(e){var t,n,c,o=Object(a.useState)({tile:"-",railType:"-"}),i=Object(l.a)(o,2),u=i[0],s=i[1];function f(t){return{tile:[e.x,e.y],railType:k(t),tileClass:h(t),mouseButton:t.buttons}}function m(t){var n=f(t);e.hoverStartEvent(n),0===t.buttons&&function(e){s({tile:e.tile,railType:e.railType})}(n)}function d(t){var n=h(t);s({tile:"-",railType:"-"}),e.hoverEndEvent(n)}function h(e){var t,n=e.currentTarget.className;return n.includes("mapTile")&&(t="mapTile"),n.includes("defaultTrack")&&(t="defaultTrack"),n.includes("table-heading")&&(t="table-heading"),t}if(!e.trackData&&e.x===u.tile[0]&&e.y===u.tile[1]){var v=function(){var e,t,n=b(u.railType);return"T"!==n.trackType?e={backgroundImage:"url(".concat(n.trackType,")"),transform:"rotate(".concat(n.trackRotation,"deg)"),opacity:.5}:(t=n.trackType,e={opacity:.5}),[e,t]}(),g=Object(l.a)(v,2);t=g[0],n=g[1]}if("mapTile"===e.className&&e.trackData){var y=function(){var t,n;return"T"!==e.trackData.trackType&&"X"!==e.trackData.trackType?t={backgroundImage:"url(".concat(e.trackData.trackType,")"),transform:"rotate(".concat(e.trackData.trackRotation,"deg)"),opacity:1}:(n=e.trackData.trackType,t={opacity:1}),[t,n]}(),E=Object(l.a)(y,2);t=E[0],n=E[1]}if(e.trackData&&"defaultTrack"===e.className||e.trackData&&"completeTrack"===e.className){var T=[{backgroundImage:"url(".concat(e.trackData.trackType,")"),transform:"rotate(".concat(e.trackData.trackRotation,"deg)"),opacity:1,filter:e.highlighted?"hue-rotate(200deg) saturate(10)":"none",transition:"filter 1s ease-in-out"},null],x=Object(l.a)(T,2);t=x[0],n=x[1]}return"transparentTile"===e.className&&(c={border:"none"},t={border:"none"}),r.a.createElement("div",{className:"square ".concat(e.className),onContextMenu:function(e){return e.preventDefault()},onMouseOver:"table-heading"!==e.className?function(e){return m(e)}:null,onMouseLeave:"table-heading"!==e.className?function(e){return d(e)}:null,onMouseDown:"table-heading"!==e.className?function(t){return function(t){var n=f(t);1===n.mouseButton&&e.leftClickEvent(n),2===n.mouseButton&&e.rightClickEvent(n),3===n.mouseButton&&e.bothClickEvent(n)}(t)}:null,onMouseUp:"table-heading"!==e.className?function(t){return function(t){var n=f(t);0===t.button&&e.leftReleaseEvent(n),2===t.button&&e.rightReleaseEvent()}(t)}:null},r.a.createElement("div",{className:"tile-button-container",style:c},r.a.createElement(w,e),r.a.createElement("p",{className:"boxLabel",style:{color:function(e){switch(e){case"underfilled":return"black";case"full":return"green";case"overfilled":return"red";default:return"black"}}(e.fillState)}},e.text)),r.a.createElement("div",{className:"tile-display",style:t},n),r.a.createElement(p,e))},S=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},O=function(e,t){for(var n=-1,a=0;a<t.length;a++)C(e,t[a])&&(n=a);return n},C=function(e,t){var n=!1;return e.length===t.length&&(n=e.every((function(e,n){return e===t[n]}))),n},N=function(e){for(var t=-1,n=0,a=0;a<e.length;a++)e[a].length>n&&(t=a,n=e[a].length);return t},M=function(e){return Array.isArray(e)&&e.length>0},j=function(e){return e.filter((function(t,n){return n===O(t,e)}))},R=function(e,t){return e.forEach((function(e){t=t.filter((function(t){return!C(t,e)}))})),t},B=function(){return Math.floor(Math.random()*Math.pow(10,15))},L=n(12),D=n.n(L),P=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];D()(n,{global:!0});var r={tracks:[],headerLabels:[]},c=m(),o=ee(c),i=ce(o),u=oe(c);r.headerLabels=_(c);for(var s=0;s<c.length;s++){var p=u.includes(s);r.tracks.push({tile:c[s],railType:i[s],defaultTrack:p})}return r;function m(){for(var e=Z(),t=Object(l.a)(e,2),n=t[0],a=t[1],r=[n],c=!1,o=n;!c;){var i=b(o,r,a);r.push(i),o=i,C(i,a)&&(c=!0)}return r}function d(e,t){var n=v(h(e));return n=g(n,t)}function h(e){return Array(4).fill(e).map((function(e,t){return[e[0]+(t-1)%2,e[1]+(t-2)%2]}))}function v(n){return n.filter((function(n){return n[0]>=0&&n[1]>=0&&n[0]<e&&n[1]<t}))}function g(e,t){return e.filter((function(e){var n=!1;return t.forEach((function(t){C(e,t)&&(n=!0)})),!n}))}function b(e,t,n){var a=d(e,t);return k(a,n)?n:(a=y(a=a.filter((function(e){return Q(e,n,t)})),t,n))[S(0,a.length-1)]}function k(e,t){return 1===e.length&&C(e[0],t)}function y(e,t,n){var r=[I,P,V];a||r.push(U);for(var c=0;c<r.length;c++){var o=(0,r[c])(e,t,n);if(!M(o))break;e=o}return e}function E(e){for(var t=[],n=-1;n<=1;n++)for(var a=-1;a<=1;a++)t.push([e[0]+n,e[1]+a]);return t}function T(e){var t=h(e);return v([].concat(Object(f.a)(t),[e]))}function w(e){var t=E(e);return v([].concat(Object(f.a)(t),[e]))}function x(e,t){var n=T(t);return-1!==O(e,n)}function B(e,t){return x(e,t)?w(t):T(t)}function L(e,t){var n=B(e,t),a=!1;return n.forEach((function(t){C(e,t)&&(a=!0)})),a}function P(e,t,n){return e=e.filter((function(e){return!L(e,n)}))}function I(e,t,n){return A(t,.5)||(e=e.filter((function(e){return!G(e,t,n)}))),e}function A(n,a){var r=a*e*t;return n.length>=r}function G(e,t,n){var a=d(e,t),r=!1;return a.forEach((function(a){Q(a,n,[].concat(Object(f.a)(t),[e]))||(r=!0)})),r}function F(e,t,n){var a=[];e.forEach((function(e){a.push(H(e,n,t))}));var r=N(a);return a[r][0]}function U(e,t,n){var a=F(e,t,n);return M(a)?[a]:e}function H(e,t,n){var a;function r(t,n,c,o){n.push(t);var i=d(t,n);M(i)&&i.forEach((function(t){o--,C(t,c)?function(e,t,n){var r=O(e,n),c=n.slice(r);a=[].concat(Object(f.a)(c),[t])}(e,c,Object(f.a)(n)):o>0&&r(t,Object(f.a)(n),c,o)}))}for(var c=0;!M(a);)c++,r(e,[n],t,c);return a}function V(e,t,n){return t.length>2&&(e=e.filter((function(e){return!X(e,t)}))),e}function W(e,t){for(var n=[],a=function(a){var r=2*Math.ceil(a%3/2)+1,c=t.filter((function(t){return t[a%2]===e[a%2]})).filter((function(t){return t[(a+1)%2]*-r<e[(a+1)%2]*-r}));n.push(c)},r=0;r<4;r++)a(r);return n}function X(e,t){var n=q(3,t);return Y(J([e].concat(Object(f.a)(n))))}function J(e){for(var t=[],n=0;n<e.length-1;n++)t.unshift(z(e[n],e[n+1]));return t}function q(e,t){return t.slice(Math.max(t.length-e,0)).reverse()}function Y(e){var t=!1;return(C(e,[0,1,2])||C(e,[1,2,3])||C(e,[2,3,0])||C(e,[3,0,1]))&&(t=!0),(C(e,[3,2,1])||C(e,[2,1,0])||C(e,[1,0,3])||C(e,[0,3,2]))&&(t=!0),t}function Q(e,t,n){var a=!1;if(C(e,t))a=!0;else{var r=Object(f.a)(n);r.push(K(e,r)),r.forEach((function(e){C(e,t)&&(a=!0)}))}return a}function K(e,t){var n=d(e,t);return M(n)&&n.forEach((function(e){t.push(e),t.push(K(e,t))})),t}function Z(){var e=$();return[e.splice(Math.floor(Math.random()*e.length),1)[0],e.splice(Math.floor(Math.random()*e.length),1)[0]]}function $(){for(var n=[],a=0;a<e-1;a++)n.push([a,0]);for(var r=0;r<t-1;r++)n.push([e-1,r]);for(var c=e-1;c>0;c--)n.push([c,t-1]);for(var o=t-1;o>0;o--)n.push([0,o]);return n}function _(n){for(var a={x:[],y:[]},r=0;r<e;r++)a.x.push(W([r,-1],n)[2].length);for(var c=0;c<t;c++)a.y.push(W([-1,c],n)[1].length);return a}function ee(e){var t=[];t.push(te(e[0]));for(var n=0;n<e.length-1;n++){var a=z(e[n+1],e[n]);t.push(a)}return t.push(ne(e[e.length-1])),t}function te(e){var t=ae(e);return t[S(0,t.length-1)]}function ne(e){var t=re(e);return t[S(0,t.length-1)]}function ae(n){var a=[];return 0===n[0]&&a.push(1),0===n[1]&&a.push(2),n[0]===e-1&&a.push(3),n[1]===t-1&&a.push(0),a}function re(n){var a=[];return 0===n[0]&&a.push(3),0===n[1]&&a.push(0),n[0]===e-1&&a.push(1),n[1]===t-1&&a.push(2),a}function ce(e){for(var t=[],n=0;n<e.length;n++)(0===e[n]&&0===e[n+1]||2===e[n]&&2===e[n+1])&&t.push("vertical"),(1===e[n]&&1===e[n+1]||3===e[n]&&3===e[n+1])&&t.push("horizontal"),(2===e[n]&&1===e[n+1]||3===e[n]&&0===e[n+1])&&t.push("topRightCorner"),(3===e[n]&&2===e[n+1]||0===e[n]&&1===e[n+1])&&t.push("bottomRightCorner"),(0===e[n]&&3===e[n+1]||1===e[n]&&2===e[n+1])&&t.push("bottomLeftCorner"),(1===e[n]&&0===e[n+1]||2===e[n]&&3===e[n+1])&&t.push("topLeftCorner");return t}function oe(e){var t=[];return t.push.apply(t,Object(f.a)(le(e))),t.push.apply(t,Object(f.a)(ie(e))),Object(f.a)(new Set(t))}function ie(e){return[0,e.length-1]}function le(e){var t=ue();return(t=se(t)).map((function(t){return O(t,e)}))}function ue(){for(var e,t=c,n=[],a=0;a<2;a++)for(var r=0;r<2;r++){var o=pe(t,r,a);n.push(o),t=R(o,c)}return(e=[]).concat.apply(e,n)}function se(e){var t=Object(f.a)(e);return e.filter((function(e){var n=fe(e,t)>1;return n&&(t=R([e],t)),!n}))}function fe(e,t){var n=h(e);return 4-R(t,n).length}function pe(e,t,n){return me(de(e,ve(t,n)))}function me(e){var t=e.map((function(e){return e[S(0,e.length-1)]}));return j(t)}function de(e,t){return t.filter((function(t){return he(t,e)}))}function he(e,t){var n=0;return e.forEach((function(e){t.forEach((function(t){C(e,t)&&n++}))})),4===n}function ve(n,a){for(var r=[],c=a;c<t-1-a;c+=2)for(var o=n;o<e-1-n;o+=2)r.push(ge(o,c));return r}function ge(e,t){for(var n=[],a=0;a<2;a++)for(var r=0;r<2;r++)n.push([r+e,a+t]);return n}},z=function(e,t){var n,a,r,c=(r=t,[(a=e)[0]-r[0],a[1]-r[1]]);return C(c,[0,-1])&&(n=0),C(c,[1,0])&&(n=1),C(c,[0,1])&&(n=2),C(c,[-1,0])&&(n=3),n};var I=function(){var e=100,t=S(e,255);t>255-e/2?e*=.8:e/=.8;var n=S(e,255);n>255-e/2?e*=.8:e/=.8;var a=S(e,255);return"rgb(".concat([t,n,a],")")},A=function(e,t){return function(e,t){for(var n=[],a=function(e,t){return e.map((function(e){return(255-e)/(t-1)}))}(e,t),r=function(t){var r=e.map((function(e,n){return Math.floor(e+t*a[n])}));n.push(r)},c=0;c<t;c++)r(c);return n}(function(e){return e.replace("#","").match(/.{1,2}/g).map((function(e){return parseInt(Number("0x".concat(e)),10)}))}(e),Math.ceil(t)).map((function(e){return"#"+e.map((function(e){var t=e.toString(16);return"0"===t?"00":t})).join("")}))};var G=function(e){for(var t=A("#b19cd9",21),n=[],a=0;a<20;a++){var c={backgroundColor:t[a],animation:"spin ".concat(15+.25*(a+1),"s infinite linear"),height:"".concat(100-4*a,"%"),width:"".concat(100-4*a,"%")};n.push(r.a.createElement("div",{key:a,className:"mapBackgroundShape",style:c}))}return r.a.createElement("div",{className:"mapBackgroundContainer"},n)};var F=function(e){var t=Object(a.useRef)([null,null]),n=Object(a.useRef)(),c=Object(a.useRef)(),o=Object(a.useRef)(),i=Object(a.useRef)(),l=Object(a.useRef)(),u=Object(a.useRef)(),p=Object(a.useRef)();function m(e){3===e.mouseButton&&"mapTile"===e.tileClass&&v(e.tile,"T")}function d(){var e=z(c.current,t.current);return h(c.current).includes(e)}function h(t){return function(t){var n,a=[],r=function(t,n){var r=T(t);r||(r=w(e.trainTrackMap,t[0],t[1])),r&&a.push({tile:t,railType:r,position:n})};t[0]>0&&(n=[t[0]-1,t[1]],r(n,3));t[0]<e.mapWidth&&(n=[t[0]+1,t[1]],r(n,1));t[1]>0&&(n=[t[0],t[1]-1],r(n,0));t[1]<e.mapHeight&&(n=[t[0],t[1]+1],r(n,2));return a}(t).map((function(e){var t;return 0===e.position&&("vertical"!==e.railType&&"bottomLeftCorner"!==e.railType&&"bottomRightCorner"!==e.railType||(t=2)),3===e.position&&("horizontal"!==e.railType&&"bottomRightCorner"!==e.railType&&"topRightCorner"!==e.railType||(t=1)),2===e.position&&("vertical"!==e.railType&&"topLeftCorner"!==e.railType&&"topRightCorner"!==e.railType||(t=0)),1===e.position&&("horizontal"!==e.railType&&"topLeftCorner"!==e.railType&&"bottomLeftCorner"!==e.railType||(t=3)),t})).filter((function(e){return void 0!==e}))}function v(e,t){k([{tile:e,railType:t}])}function k(t){var n;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=y(t),t.forEach((function(e){e.railType&&n.push(e)})),a.next=4,s.a.awrap(e.setPlacedTracks(n));case 4:return a.next=6,s.a.awrap(N(e.trainTrackMap));case 6:case"end":return a.stop()}}))}function y(t){var n=[];return e.placedTracks.forEach((function(e){var a=!1;t.forEach((function(t){C(e.tile,t.tile)&&(a=!0)})),a||n.push(e)})),n}function E(t){var n;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.placedTracks.filter((function(e){return!(e.tile[0]===t[0]&&e.tile[1]===t[1])})),a.next=3,s.a.awrap(e.setPlacedTracks(n));case 3:return a.next=5,s.a.awrap(N(e.trainTrackMap));case 5:case"end":return a.stop()}}))}function T(t){var n=null;return e.placedTracks.forEach((function(e){e.tile[0]===t[0]&&e.tile[1]===t[1]&&(n=e.railType)})),n}function w(e,t,n){var a=null;return e.tracks.forEach((function(e){e.tile[0]===t&&e.tile[1]===n&&e.defaultTrack&&(a=e.railType)})),a}function S(e){var t=[];return e.tracks.forEach((function(e){e.defaultTrack&&t.push(e)})),t}function O(t,n){var a="underfilled",r=S(e.trainTrackMap),c="x"===t?0:1,o=r.filter((function(e){return e.tile[c]===n})).length,i=e.trainTrackMap.tracks.filter((function(e){return e.tile[c]===n})).length;return e.placedTracks.forEach((function(e){e.tile[c]===n&&"X"!==e.railType&&o++})),i<o?a="overfilled":i===o&&(a="full"),a}function N(t){var n=function(e,t){return e.tracks.filter((function(e){var n=e.defaultTrack;return t.forEach((function(t){C(e.tile,t.tile)&&e.railType===t.railType&&(n=!0)})),n})).length}(t,e.placedTracks),a=S(t).length,r=e.placedTracks.filter((function(e){return"X"!==e.railType})).length;n===t.tracks.length&&t.tracks.length===r+a&&e.setGameCompleteState(!0)}var j={leftClickEvent:e.controlsActive?function(e){i.current=T(e.tile),l.current=e,u.current=[null,null,e.tile]}:function(){return null},rightClickEvent:e.controlsActive?function(e){!function(e){var t=T(e.tile);p.current=null===t?"X":"DELETE"}(e),function(e){"mapTile"===e.tileClass&&(T(e.tile)?E(e.tile):v(e.tile,p.current))}(e)}:function(){return null},bothClickEvent:e.controlsActive?function(e){m(e)}:function(){return null},leftReleaseEvent:e.controlsActive?function(e){M(u.current)&&(!function(e){C(l.current.tile,t.current)&&"mapTile"===e.tileClass&&v(e.tile,e.railType)}(e),u.current=[])}:function(){return null},rightReleaseEvent:e.controlsActive?function(){p.current=void 0}:function(){return null},hoverStartEvent:e.controlsActive?function(e){(function(e){var n=!1;return C(e.tile,t.current)||(n=!0),n})(e)&&(function(e){c.current=t.current,t.current=e.tile,n.current=e.tileClass}(e),1===e.mouseButton&&function(){var e=!0;t.current[0]>c.current[0]+1&&(e=!1);t.current[0]<c.current[0]-1&&(e=!1);t.current[1]>c.current[1]+1&&(e=!1);t.current[1]<c.current[1]-1&&(e=!1);return e}()&&function(e){M(u.current)&&(u.current.shift(),u.current.push(e.tile),function(e){var a,r=function(){for(var e=[],t=u.current,n=t.findIndex((function(e){return null!==e}));n<t.length-1;n++)e.push(z(t[n+1],t[n]));return e}(),s=g(r),p=[];C(c.current,l.current.tile)&&(a=function(e){var t=z(e,c.current),n=h(c.current);if(M(n)){var a=n[(r=0,o=n.length-1,Math.floor(Math.random()*(o-r+1)+r))];return g([a,t])}var r,o}(e));if(M(a))p.unshift.apply(p,Object(f.a)(function(e){var a=[];"mapTile"===o.current&&a.unshift({tile:c.current,railType:e[0]});"mapTile"!==n.current||d()||a.unshift({tile:t.current,railType:e[1]});return a}(a)));else{if("mapTile"===o.current){var m=function(e,t,n){var a=!1;switch(z(n,t)){case 0:"bottomLeftCorner"!==e&&"bottomRightCorner"!==e&&"horizontal"!==e||(a=!0);break;case 1:"bottomLeftCorner"!==e&&"topLeftCorner"!==e&&"vertical"!==e||(a=!0);break;case 2:"topLeftCorner"!==e&&"topRightCorner"!==e&&"horizontal"!==e||(a=!0);break;case 3:"bottomRightCorner"!==e&&"topRightCorner"!==e&&"vertical"!==e||(a=!0)}return a}(i.current,l.current.tile,e);C(c.current,l.current.tile)&&i.current&&"T"!==i.current&&!m||p.unshift({tile:c.current,railType:s[0]})}"mapTile"!==n.current||d()||p.unshift({tile:t.current,railType:s[1]})}k(p)}(e.tile))}(e),2===e.mouseButton&&function(e){"X"===p.current?"mapTile"===e.tileClass&&v(e.tile,p.current):"DELETE"===p.current&&E(e.tile)}(e),3===e.mouseButton&&function(e){m(e)}(e))}:function(){return null},hoverEndEvent:e.controlsActive?function(e){o.current=e}:function(){return null}},R={leftClickEvent:function(){return null},rightClickEvent:function(){return null},bothClickEvent:function(){return null},leftReleaseEvent:function(){return null},rightReleaseEvent:function(){return null},hoverStartEvent:function(){return null},hoverEndEvent:function(){return null},leftClickDragArray:null,rightClickDragValue:null};function B(e,t,n,a){return r.a.createElement(x,{className:"table-heading",key:e,x:e,y:t,text:n,fillState:a})}function L(e,t,n,a){return r.a.createElement(x,Object.assign({className:"mapTile",key:e,x:e,y:t,mapSolutionVisible:a,trackData:n},j))}function D(t,n,a){var c,o=!1;return t.tracks.forEach((function(t){t.tile[0]===n&&t.tile[1]===a-1&&(c=t.railType,e.defaultTilesHighlighted&&t.defaultTrack&&(o=!0))})),c?function(e,t,n,a){return r.a.createElement(x,Object.assign({className:"completeTrack",key:e,x:e,y:t,highlighted:a,trackData:b(n)},R))}(n,a-1,c,o):function(e,t){return r.a.createElement(x,Object.assign({className:"emptyTile",key:e,x:e,y:t,highlighted:!1,trackData:b(null)},R))}(n,a-1)}function P(t,n,a){var c=w(t,n,a-1);return c?function(e,t,n,a){return r.a.createElement(x,Object.assign({className:"defaultTrack",key:e,x:e,y:t,highlighted:a,trackData:b(n)},j))}(n,a-1,c,e.defaultTilesHighlighted):function(t,n){var a;return e.placedTracks.forEach((function(e){e.tile[0]===t&&e.tile[1]===n-1&&(a=b(e.railType))})),L(t,n-1,a||null)}(n,a)}Object(a.useEffect)((function(){N(e.trainTrackMap)}),[e.placedTracks]);var I=function(t){for(var n=[],a=function(a){n.push(r.a.createElement("div",{className:"mapRow",key:a},Object(f.a)(Array(e.mapWidth+1)).map((function(n,c){return 0===a?function(t,n,a){return B(n,a-1,t.headerLabels.x[n],e.gameComplete?"full":O("x",n))}(t,c,a):c===e.mapWidth?function(t,n,a){return B(n,a-1,t.headerLabels.y[a-1],e.gameComplete?"full":O("y",a-1))}(t,c,a):e.mapVisible?function(t,n,a){return e.gameComplete||e.mapSolutionVisible?D(t,n,a):P(t,n,a)}(t,c,a):function(e,t){return r.a.createElement(x,Object.assign({className:"transparentTile",key:e,x:e,y:t,highlighted:!1,trackData:b(null)},R))}(c,a-1)}))))},c=0;c<e.mapHeight+1;c++)a(c);return n}(e.trainTrackMap);return r.a.createElement("div",{className:"map"},I,r.a.createElement(G,null))},U=function(e){var t=e.className,n=e.onClick,c=e.text,o=Object(a.useState)(!1),u=Object(l.a)(o,2),s=u[0],f=u[1],p=Object(a.useState)(!1),m=Object(l.a)(p,2),d=m[0],h=(m[1],{position:"relative",overflow:"hidden",cursor:"pointer",background:"none",zIndex:"0",borderRadius:"1rem",border:"1px #ccc solid",outline:"none",transition:"0.3s",top:"0px",boxShadow:"0px 5px 0px 2px #eee"}),v={zIndex:"1",color:s?"white":"black",transition:s?"color ".concat(1,"s ","cubic-bezier(0,2.53,.53,-1.51)"):"color 0s"},g={top:"0%",left:"-30%",height:"350%",width:"70rem",position:"absolute",zIndex:"-1",borderRadius:"50rem"},b=function(e){for(var t=[],n=A("#5bb1cd",1.2*e),a=A("#800080",1.2*e),c=0;c<e;c++){var o={background:"linear-gradient(1turn,".concat(n[n.length-c-1],",").concat(a[a.length-c-1],")"),transform:s?"rotate(".concat(2*c-5,"deg) skewY(0deg)"):"rotate(".concat(30+2*c,"deg) skewY(45deg)"),transition:s?"all ".concat(1.5+.1*c,"s ").concat("cubic-bezier(0,1.84,0,.32)"):"all ".concat(3,"s ").concat("cubic-bezier(0,1.84,0,.32)")};t.push(r.a.createElement("div",{key:c,style:Object(i.a)({},g,{},o),className:"rectangle",id:"rec".concat(c)}))}return t}(5);var k=d?Object(i.a)({},h,{},{transition:"0.1s",top:"10px",boxShadow:"none"}):h;return r.a.createElement("button",{style:k,className:t,onMouseOver:function(){return f(!0)},onMouseLeave:function(){return d?null:f(!1)},onClick:function(){f(!0),n()}},b,r.a.createElement("div",{style:v},c),r.a.createElement("div",{style:{zIndex:"-2",top:"0",left:"0",position:"absolute",height:"100%",width:"100%",backgroundColor:"white"}}))},H=function(e,t){var n,a,r;return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:!0,complete:!1,dimensions:250,cutOut:!1},t.next=3,s.a.awrap(J(e,n));case 3:return a=t.sent,r=a.toDataURL("image/png"),t.abrupt("return",r);case 6:case"end":return t.stop()}}))},V=function(e){var t,n,a;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={headers:!0,complete:!0,dimensions:250,cutOut:!1},r.next=3,s.a.awrap(J(e,t));case 3:return n=r.sent,a=n.toDataURL("image/png"),r.abrupt("return",a);case 6:case"end":return r.stop()}}))},W=function(e){var t,n,a;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={headers:!1,complete:!1,dimensions:64*e.headerLabels.x.length,cutOut:!0},r.next=3,s.a.awrap(J(e,t));case 3:return n=r.sent,a=n.toDataURL("image/png"),r.abrupt("return",a);case 6:case"end":return r.stop()}}))},X=function(e){var t;switch(e){case"horizontal":case"topLeftCorner":t=90;break;case"topRightCorner":t=180;break;case"bottomRightCorner":t=270;break;default:t=0}return t},J=function(e,t){var n,a,r,c,o,i,l,u,f,p,m,h,g,b,k,y,E;return s.a.async((function(T){for(;;)switch(T.prev=T.next){case 0:return E=function(){u.clearRect((a+1)*i/2-125,(r-1)*l/2-75,250,150),u.strokeRect((a+1)*i/2-125,(r-1)*l/2-75,250,150)},y=function(t,n){var r="ERROR";return 0===n&&t!==a&&(r=e.headerLabels.x[t]),t===a&&0!==n&&(r=e.headerLabels.y[n-1]),r},k=function(e,t){u.fillStyle="black",u.font="1.5rem Georgia",u.textAlign="center",u.textBaseline="middle",u.fillText(y(e,t),(e+.5)*i,(t+.5)*l)},b=function(e,t){u.fillStyle="#FFE4B5",u.fillRect(e*i,t*l,i,l)},g=function(e,t){b(e,t),(0===t&&e!==a||e===a&&0!==t)&&k(e,t)},n=document.createElement("canvas"),a=e.headerLabels.x.length,r=e.headerLabels.y.length,n.width=t.dimensions,n.height=t.dimensions,c=a+t.headers,o=r+t.headers,i=n.width/c,l=n.height/o,u=n.getContext("2d"),T.next=17,s.a.awrap(q(d.a));case 17:return f=T.sent,T.next=20,s.a.awrap(q(v.a));case 20:return p=T.sent,m=function(e){var n=X(e.railType);u.save(),u.translate(e.tile[0]*i+i/2,(e.tile[1]+t.headers)*l+l/2),u.rotate(n*(Math.PI/180)),u.drawImage("vertical"===e.railType||"horizontal"===e.railType?p:f,-i/2,-l/2,i,l),u.restore()},h=function(e){u.drawImage("vertical"===e.railType||"horizontal"===e.railType?p:f,e.tile[0]*i,(e.tile[1]+t.headers)*l,i,l)},u.fillStyle="white",u.fillRect(0,0,n.width,n.height),e.tracks.forEach((function(e){(t.complete||e.defaultTrack)&&("horizontal"===e.railType||"topLeftCorner"===e.railType||"topRightCorner"===e.railType||"bottomRightCorner"===e.railType?m(e):h(e))})),function(){for(var e=0;e<c*o;e++){var n=e%c,r=Math.floor(e/o);!t.headers||n!==a&&0!==r||g(n,r),u.fillStyle="black",u.strokeRect(n*i,r*l,i,l)}}(),t.cutOut&&E(),T.abrupt("return",n);case 29:case"end":return T.stop()}}))},q=function(e){return new Promise((function(t,n){var a=new Image;a.onload=function(){return t(a)},a.onerror=n,a.src=e}))},Y=function(){var e=JSON.parse(window.localStorage.getItem("savedMaps"));return M(e)||(e=[]),e},Q=function(e){var t=Object(a.useRef)(null),n=Object(a.useState)(!1),c=Object(l.a)(n,2),o=c[0],u=c[1],p=Object(a.useState)(null),m=Object(l.a)(p,2),d=m[0],h=m[1],v=Object(a.useState)([]),g=Object(l.a)(v,2),b=g[0],k=g[1],y=Object(a.useState)({winPopUp:!1,savePopUp:!1,saveBoxCutOut:null,defaultHighlights:!1,solutionVisible:!1}),E=Object(l.a)(y,2),T=E[0],w=E[1];return Object(a.useEffect)((function(){s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!T.savePopUp){t.next=13;break}return t.t0=w,t.t1=i.a,t.t2={},t.t3=T,t.next=7,s.a.awrap(W(e.gameState.mapObject));case 7:t.t4=t.sent,t.t5={saveBoxCutOut:t.t4},t.t6=(0,t.t1)(t.t2,t.t3,t.t5),(0,t.t0)(t.t6),t.next=14;break;case 13:w(Object(i.a)({},T,{saveBoxCutOut:null}));case 14:case"end":return t.stop()}}))}),[T.savePopUp]),r.a.createElement("div",null,r.a.createElement("div",{className:"gameMapContainer"},T.winPopUp?r.a.createElement("div",{key:"gameWinDisplay",className:"winDisplay",onContextMenu:function(e){return e.preventDefault()}},r.a.createElement("h2",{key:"winText",className:"winText"},"You Win!"),r.a.createElement("button",{key:"closeWinDisplay",className:"closePopUpWindow",onClick:function(){return w(Object(i.a)({},T,{winPopUp:!1}))}},"X"),r.a.createElement("div",{key:"balloonContainer",className:"balloonContainer"},function(){for(var t=e.gameState.balloonCloud?300:1,n=[],a=0;a<t;a++){var c=I(),o=e.gameState.balloonCloud?S(-20,100):50,i=e.gameState.balloonCloud?S(0,1e4):0,l={left:"".concat(o,"%"),backgroundColor:c,color:c,opacity:0,animationDelay:"".concat(i,"ms")};n.push(r.a.createElement("div",{key:a,className:"balloon",style:l},r.a.createElement("div",{key:"balloonString".concat(a),className:"balloonString"},"\u0601")))}return n}())):null,T.savePopUp?r.a.createElement("div",{key:"saveMapDisplay",className:"saveMapDisplay",onContextMenu:function(e){return e.preventDefault()}},r.a.createElement("p",null,"Enter a name to save map as:"),r.a.createElement("button",{key:"closeSaveMapDisplay",className:"closePopUpWindow",onClick:function(){return w(Object(i.a)({},T,{savePopUp:!1}))}},"X"),r.a.createElement("input",{key:"saveNameInputBox",className:"saveNameInputBox",onChange:function(e){return h(e.target.value)}}),r.a.createElement(U,{key:"confirmSaveMapBtn",className:"confirmSaveMapBtn",onClick:function(){!function(e){var t,n;s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=JSON.parse(window.localStorage.getItem("savedMaps")),!M(t)){a.next=7;break}return n=[].concat(Object(f.a)(t),[e]),a.next=5,s.a.awrap(window.localStorage.setItem("savedMaps",JSON.stringify(n)));case 5:a.next=9;break;case 7:return a.next=9,s.a.awrap(window.localStorage.setItem("savedMaps",JSON.stringify([e])));case 9:case"end":return a.stop()}}))}(Object(i.a)({name:d},e.gameState)),h(null),w(Object(i.a)({},T,{savePopUp:!1}))},text:"Save Map"})):null,r.a.createElement(F,{key:e.mapSeed,className:"gameMap",defaultTilesHighlighted:T.defaultHighlights,mapSolutionVisible:T.solutionVisible,trainTrackMap:e.gameState.mapObject,mapHeight:e.gameState.size,mapWidth:e.gameState.size,setGameCompleteState:function(e){u(e),w(Object(i.a)({},T,{winPopUp:e}))},gameComplete:o,controlsActive:!T.savePopUp,mapVisible:!T.saveBoxCutOut,setPlacedTracks:function(e){return k(e)},placedTracks:b}),r.a.createElement("img",{alt:"",draggable:"false",src:T.saveBoxCutOut,className:"saveBoxMapCutout",style:{position:"absolute",top:"64px",left:"0px",border:T.saveBoxCutOut?"1px solid black":"none"}})),r.a.createElement("div",{className:"inGameOptions"},r.a.createElement("div",{className:"topRowInGameButtons"},r.a.createElement(U,{key:"resetMapBtn",onClick:function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:u(!1),k([]),w(Object(i.a)({},T,{winPopUp:!1,solutionVisible:!1}));case 3:case"end":return e.stop()}}))},text:"Reset Map"}),r.a.createElement(U,{key:"highlightDefaultTilesBtn",onClick:function(){return w(Object(i.a)({},T,{defaultHighlights:!T.defaultHighlights}))},text:T.defaultHighlights?"Hide Default Tiles":"Show Default Tiles"}),r.a.createElement(U,{key:"showMapSolutionBtn",onClick:function(){return w(Object(i.a)({},T,{solutionVisible:!T.solutionVisible}))},text:T.solutionVisible?"Hide Map Solution":"Show Map Solution"})),r.a.createElement("div",{className:"bottomRowInGameButtons"},r.a.createElement("div",{className:"mapSeedOptionContainer"},r.a.createElement(U,{style:{zIndex:"4"},className:"mapSeedBtn",key:"mapSeedBtn",onClick:function(){t.current.select(),document.execCommand("copy")},text:"\ud83c\udf31"}),r.a.createElement("div",{className:"mapSeedExplanation"},r.a.createElement("span",null,"Copy map seed to clipboard")),r.a.createElement("textarea",{ref:t,readOnly:!0,unselectable:"on",style:{position:"absolute",top:0,left:0,opacity:0,width:0,height:0,resize:"none",cursor:"default"},value:e.gameState.seed})),r.a.createElement(U,{key:"saveMapBtn",onClick:function(){w(Object(i.a)({},T,{savePopUp:!0,winPopUp:!1}))},text:"Save Map"}),r.a.createElement(U,{key:"newMapBtn",onClick:function(){u(!1),k([]),w(Object(i.a)({},T,{winPopUp:!1,solutionVisible:!1})),e.inGameNewMap()},text:"New Map"}),r.a.createElement(U,{key:"quitBtn",onClick:function(){return e.quitGame()},text:"Quit Game"}))))},K=n(13),Z=function(e){var t=e.style,n=e.placeholder,c=e.options,o=e.onChange,u=e.onHover,s=e.className,f=Object(a.useState)(!1),p=Object(l.a)(f,2),m=p[0],d=p[1],h=Object(a.useState)(n),v=Object(l.a)(h,2),g=v[0],b=v[1],k=Object(a.useState)(null),y=Object(l.a)(k,2),E=y[0],T=y[1],w=Object(i.a)({background:"#fff",border:"1px #aaa solid",lineHeight:t.height},t,{position:"relative",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",borderRadius:m?"1rem 1rem 0 0":"1rem",boxShadow:"0px 5px 0px 2px #eee",cursor:"pointer"}),x=Object(i.a)({},w,{borderTop:"none"});Object(a.useEffect)((function(){return m?document.addEventListener("mousedown",S):document.removeEventListener("mousedown",S),function(){return document.removeEventListener("mousedown",S)}}));var S=function(e){"dropdown"!==e.target.className&&(d(!1),u(!1))},O=function(e,t,n){o(e,t,n),d(!1)},C=function(e){u(e)};return r.a.createElement("div",{className:s},r.a.createElement("div",{className:"dropdown",style:Object(i.a)({},w,{backgroundColor:"#fff"}),onMouseDown:function(e){1===e.buttons&&d(!m)},onContextMenu:function(e){return e.preventDefault()}},g,r.a.createElement("span",{style:{fontSize:"0.75rem",position:"absolute",right:"5%"}},"\u25bc")),r.a.createElement("div",{style:{position:"absolute"}},m?function(e){var t=[];return e.forEach((function(n,a){t.push(r.a.createElement("div",{className:"dropdown",style:Object(i.a)({},x,{background:E===a?"#9999FF":"#fff",color:E===a?"white":"black",borderRadius:a===e.length-1?"0 0 1rem 1rem":"0"}),key:"dropdownOption".concat(a),onClick:function(){O(n),b(n.display)},onMouseOver:function(){C(n.mapObject),T(a)},onMouseLeave:function(){C(null),T(null)},onContextMenu:function(e){return e.preventDefault()}},n.display))})),t}(c):null))},$=function(e){return r.a.createElement("div",{className:"deleteConfirmScreen"},r.a.createElement("h3",{className:"deleteConfirmLabel"},"Are you sure you want to delete ",e.deleteModeOnAll?"ALL saved maps?":"the following saved map?"),r.a.createElement("img",{alt:"",src:e.deleteModeOnAll?null:e.mapIcon,style:{display:e.deleteModeOnAll?"none":"block"},className:"confirmDeleteIcon"}),r.a.createElement("div",{className:"deleteButtons"},r.a.createElement(U,{className:"confirmDeleteBtn",key:"confirmDeleteBtn",onClick:function(){console.log(e),e.deleteModeOnAll?s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(window.localStorage.setItem("savedMaps",JSON.stringify([])));case 2:case"end":return e.stop()}})):function(e){var t,n;s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=Y(),n=t.filter((function(t){return t.seed!==e})),a.next=4,s.a.awrap(window.localStorage.setItem("savedMaps",JSON.stringify(n)));case 4:case"end":return a.stop()}}))}(e.gameState.seed),e.quitToLoadScreen()},text:"Confirm"}),r.a.createElement(U,{className:"cancelDeleteBtn",key:"cancelDeleteBtn",onClick:function(){e.quitToLoadScreen()},text:"Cancel"})))},_=function(e){return r.a.createElement(U,{className:"returnToMainMenuBtn",key:"returnToMainMenuBtn",onClick:function(){e.setCurrentScreen("mainMenu")},text:"Return To Main Menu"})};function ee(){var e=Y(),t=[];return e.forEach((function(e){return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t.push({display:e.name,seed:e.seed,size:e.size,mapObject:e.mapObject,pathFinding:e.pathFinding});case 1:case"end":return n.stop()}}))})),t}var te=function(e){var t=Object(a.useState)("load"),n=Object(l.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(null),f=Object(l.a)(u,2),p=f[0],m=f[1];if("load"===c)return r.a.createElement("div",{className:"loadMapSection"},r.a.createElement(Z,{className:"loadMapDropdown",style:{width:"12rem",height:"2rem"},placeholder:"Select a map",options:ee(),onChange:function(t){t.display;var n=Object(K.a)(t,["display"]);e.setGameState(Object(i.a)({},e.gameState,{},n))},onHover:function(e){null!==e&&function(e){s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=m,!e){t.next=7;break}return t.next=4,s.a.awrap(H(e));case 4:t.t1=t.sent,t.next=8;break;case 7:t.t1=null;case 8:t.t2=t.t1,(0,t.t0)(t.t2);case 10:case"end":return t.stop()}}))}(e)}}),r.a.createElement("img",{alt:"",src:p,className:"mapIcon",style:{border:p?"0.15rem #aaa solid":"none"}}),r.a.createElement(U,{className:"loadSaveMapBtn",key:"loadSaveMapBtn",onClick:function(){e.gameState.mapObject&&e.setGameState(Object(i.a)({},e.gameState,{active:!0}))},text:"Load Map"}),r.a.createElement(U,{className:"deleteSaveMapBtn",key:"deleteSaveMapBtn",onClick:function(){p&&o("deleteOne")},text:"Delete Map"}),r.a.createElement(U,{className:"deleteAllSavedMapsBtn",key:"deleteAllSavedMapsBtn",onClick:function(){return o("deleteAll")},text:"Delete All Maps"}),r.a.createElement(_,e));var d="deleteOne"!==c;return r.a.createElement($,Object.assign({},e,{mapIcon:p,deleteModeOnAll:d,quitToLoadScreen:function(){m(null),o("load")}}))},ne=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){!function(){var e,t,n;s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=P(6,6,986707260499975,!0),a.next=3,s.a.awrap(H(e));case 3:return t=a.sent,a.next=6,s.a.awrap(V(e));case 6:n=a.sent,o({empty:t,complete:n});case 8:case"end":return a.stop()}}))}()}),[]),r.a.createElement("div",{className:"howToPlayScreen",key:"howToPlayScreen"},r.a.createElement("h2",{className:"howToPlayTitle"},"How To Play"),r.a.createElement("div",{className:"howToPlayGrid"},r.a.createElement("div",{className:"howToPlayMapField"},r.a.createElement("img",{className:"howToPlayMap",alt:"",src:c.empty})),r.a.createElement("div",{className:"howToPlayTextField"},r.a.createElement("p",null,"The goal of the game is to create a train track path between the entrance and the exit of the board."),r.a.createElement("p",null,"Each row and column must contain the specified amount of tracks in the corresponding header. Headers display green if correct and red if overfilled."),r.a.createElement("p",null,"Tracks cannot overlap. In order to win the path must be fully connected with no extra tracks."),r.a.createElement("p",null,"Default tiles (such as the entrance and exit) cannot be removed from the map. You can toggle the colour of default tiles (blue/brown) in game.")),r.a.createElement("div",{className:"howToPlayMapField"},r.a.createElement("img",{className:"howToPlayMap",alt:"",src:c.complete})),r.a.createElement("div",{className:"howToPlayTextField"},r.a.createElement("p",null,"Left clicking places a track. Hovering over different sections of a tile will show what type of track will be placed on left click."),r.a.createElement("p",null,"Right clicking places an X mark. X marks are useful for tiles where you know there is no track."),r.a.createElement("p",null,"Pressing both mouse buttons at the same time places a T mark. T marks are useful for tiles where you know there is a track but are not sure which type."),r.a.createElement("p",null,"Holding down a mouse button and dragging over other tiles will place multiple tracks/markers."))),r.a.createElement(_,e))};function ae(){for(var e=[],t=0;t<3;t++){var n=6+2*t;e.push({display:"".concat(n,"x").concat(n),value:n})}return e}var re=function(e){return Object(a.useEffect)((function(){e.setGameState(Object(i.a)({},e.gameState,{seed:B()}))}),[]),r.a.createElement("div",{className:"generateMapSection"},r.a.createElement("p",{key:"Map Size Label"},"Map Size"),r.a.createElement("div",null,e.selectedMap?e.selectedMap.size:null),r.a.createElement(Z,{key:"selectMapSize",style:{width:"3rem",height:"2rem",textAlign:"center",padding:"0 1.25rem 0 0.5rem"},options:ae(),className:"mapSizeOption",placeholder:"".concat(e.gameState.size,"x").concat(e.gameState.size),onHover:function(){return null},onChange:function(t){e.setGameState(Object(i.a)({},e.gameState,{size:t.value}))}}),r.a.createElement("p",{key:"Map Seed Label"},"Map Seed"),r.a.createElement("div",{className:"mapSeedOptionRow"},r.a.createElement("input",{key:"mapSeedInput",type:"text",className:"mapSeedInput",id:"mapSeedInput",defaultValue:e.gameState.seed,onChange:function(t){return e.setGameState(Object(i.a)({},e.gameState,{seed:t.target.value}))},style:{width:"8rem",textAlign:"center"}}),r.a.createElement("div",{key:"rerollSeedBtn",className:"rerollSeedBtn",onClick:function(t){t.preventDefault(),e.setGameState(Object(i.a)({},e.gameState,{seed:B()}))}},r.a.createElement("span",{className:"diceSymbol"},"\u2684"))),r.a.createElement("div",{className:"pathFindingOptionRow"},r.a.createElement("input",{type:"checkbox",className:"pathFindingCheckbox",onChange:function(t){return e.setGameState(Object(i.a)({},e.gameState,{pathFinding:!t.target.checked}))}}),r.a.createElement("p",{className:"pathFindingLabel"},"Disable Map Generation Path Finding"),r.a.createElement("div",{className:"pathFindingQuestionBox"},"?"),r.a.createElement("div",{className:"pathFindingExplanation"},"Disables use of breadth first search algorithm in map generation. Can increase performance on old browsers/PCs. Maps may be lessed balanced.")),r.a.createElement("div",{className:"pathFindingOptionRow"},r.a.createElement("input",{type:"checkbox",className:"pathFindingCheckbox",onChange:function(t){return e.setGameState(Object(i.a)({},e.gameState,{balloonCloud:!t.target.checked}))}}),r.a.createElement("p",{className:"pathFindingLabel"},"Disable Win Screen Balloon Cloud"),r.a.createElement("div",{className:"pathFindingQuestionBox"},"?"),r.a.createElement("div",{className:"pathFindingExplanation"},"Disables the balloon cloud effect at the end of a game win. Can increase performance on old browsers/PCs.")),r.a.createElement(U,{key:"generateMapBtn",onClick:function(){e.generateMap()},text:"Generate Map"}),r.a.createElement(_,e))},ce=function(e){return r.a.createElement("div",null,r.a.createElement("p",null,"This game was created with React."),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/morgan-sam/Train-Tracks-React"},"Source Code")),r.a.createElement("p",null,"Samuel Morgan - 2020"),r.a.createElement(_,e))},oe=function(e){return r.a.createElement("div",{className:"mainMenuScreen",key:"mainMenuScreen"},r.a.createElement(U,{className:"startGameBtn",key:"startGameBtn",onClick:function(){e.setCurrentScreen("startMap")},text:"Start Game"}),r.a.createElement(U,{className:"loadSavedGameBtn",key:"loadSavedGameBtn",onClick:function(){e.setCurrentScreen("loadMap")},text:"Load Saved Map"}),r.a.createElement(U,{className:"howToPlayPageBtn",key:"howToPlayPageBtn",onClick:function(){return s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e.setCurrentScreen("howToPlay");case 1:case"end":return t.stop()}}))},text:"How To Play"}),r.a.createElement(U,{className:"aboutBtn",key:"aboutBtn",onClick:function(){e.setCurrentScreen("about")},text:"About"}))},ie=function(){var e=Object(a.useState)({size:8,seed:B(),mapObject:null,pathFinding:!0,active:!1,balloonCloud:!0}),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)("mainMenu"),u=Object(l.a)(o,2),s=u[0],f=u[1];function p(){var e=!n.pathFinding,t=P(n.size,n.size,n.seed,e);c(Object(i.a)({},n,{mapObject:t,active:!0}))}function m(){var e=B(),t=!n.pathFinding,a=P(n.size,n.size,e,t);c(Object(i.a)({},n,{seed:e,mapObject:a}))}function d(){c(Object(i.a)({},n,{mapObject:null,seed:B(),active:!1})),f("mainMenu")}return Object(a.useEffect)((function(){null!==n.mapObject&&n.active&&f("game")}),[n.mapObject,n.active]),Object(a.useEffect)((function(){var e=document.getElementById("mapSeedInput");e&&(e.value=n.seed)}),[n.seed]),r.a.createElement("div",{key:"appScreen",className:"appScreen"},r.a.createElement("div",{key:"menuScreen",className:"menuScreen"},r.a.createElement("h1",{key:"title",className:"gameTitle"},"Train Tracks"),function(){var e={currentScreen:s,setCurrentScreen:f,gameState:n,setGameState:c,inGameNewMap:m,generateMap:p,quitGame:d};switch(s){case"mainMenu":return r.a.createElement(oe,e);case"startMap":return r.a.createElement(re,e);case"loadMap":return r.a.createElement(te,e);case"howToPlay":return r.a.createElement(ne,e);case"about":return r.a.createElement(ce,e);case"game":return r.a.createElement(Q,e);default:return r.a.createElement(oe,e)}}()))};n(28),n(29);o.a.render(r.a.createElement(ie,null),document.getElementById("root"))},6:function(e,t,n){e.exports=n.p+"static/media/curvedtrack.513c0cf6.png"},9:function(e,t,n){e.exports=n.p+"static/media/straighttrack.9d34a133.png"}},[[14,1,2]]]);
//# sourceMappingURL=main.22494a6a.chunk.js.map